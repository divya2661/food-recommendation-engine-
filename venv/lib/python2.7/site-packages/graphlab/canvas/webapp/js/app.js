require=function e(t,a,r){function n(i,o){if(!a[i]){if(!t[i]){var l="function"==typeof require&&require;if(!o&&l)return l(i,!0);if(s)return s(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var d=a[i]={exports:{}};t[i][0].call(d.exports,function(e){var a=t[i][1][e];return n(a?a:e)},d,d.exports,e,t,a,r)}return a[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n}({1:[function(e,t,a){"use strict";function r(e){"selected_variable"in e&&!m.deepEquals(S.state.selected_variable,e.selected_variable)&&(f.cancelAll(),e.messages=[]),g.set(e)}function n(){x?c.ajax({type:"GET",url:"/vars",success:function(e,t,a){e.messages=S.state.messages.concat(e.exceptions.map(function(e){return y.log("encountered an exception"),y.log(e),{text:"An error occurred of type "+e.type+": "+e.message,stack_trace:e.stack_trace}})),delete e.exceptions,r(e),setTimeout(n,2e3)},error:function(){r({messages:S.state.messages.concat([{text:"Lost connection to GraphLab Create Python session. Call .show() again from Python to re-invoke Canvas."}])})}}):setTimeout(n,1e3)}function s(){x||null!==S.state.task&&!S.state.task.finished?setTimeout(s,1e3):c.ajax({type:"GET",url:"/ping",success:function(e){setTimeout(s,1e3)}})}function i(e){var t=m.tryGetProperty(S.state.selected_variable,"name");m.deepEquals(t,e)||(f.cancelAll(),c.ajax({type:"POST",url:"/vars",data:{selected:JSON.stringify(e)},success:function(e){r(e)}}))}function o(e,t){var a={feedback:"\n\n"+e+"\n",log:JSON.stringify(t),language:navigator.language,recipient:"support@dato.com",subject:S.state.gl_product_key,version:S.state.gl_version,email:S.state.user_email,env_report:"REMOTE_ADDR,HTTP_USER_AGENT",print_config:"subject",sort:"order:version,email,feedback,log,language"};c.ajax({type:"POST",url:"http://formmail.dreamhost.com/cgi-bin/formmail.cgi",data:a})}var l=e("lodash"),c=e("zepto-browserify").$,d=e("bowser"),u=e("dato-dux"),p=e("react/addons"),h=e("./page_layout"),m=e("./common_util"),f=e("./taskqueue"),b=e("./common_controls"),g=e("./state"),y=e("./logging"),v=e("./data_components/data_views"),w=e("./model_components/model_views"),E={model_objects:e("./model_components/model_objects"),data_objects:e("./data_components/data_objects"),job:e("./job_components/job"),job_session:e("./job_components/job_session"),predservice:e("./ps_components/predservice"),ps_session:e("./ps_components/ps_session")},_=m.merge(m.merge(v.views,E),w.views),x=!0,S=null,k=p.createClass({displayName:"Descriptives",handleClick:function(e){var t=this.props.selected_variable.concat([e]);i(t)},render:function(){if(0===this.props.selected_variable.length)return null;if("NoneType"===this.props.type)return null;var e=this.props.type;return p.createElement("div",{className:"canvas-descriptives"},p.createElement("span",null,p.createElement("span",{className:"label"},"Type:")," ",e),l.map(this.props.descriptives,function(e,t){var a="number"==typeof e?m.formatNumber(e):e;return p.createElement("span",{key:t},p.createElement("span",{className:"label"},!l.isEmpty(this.props.links)&&t in this.props.links?p.createElement("a",{href:"javascript:",onClick:this.handleClick.bind(this,this.props.links[t]),style:{color:"#84c5e1",fontWeight:300,textDecoration:"underline"}},t+":"):" "+t+":")," ",String(a))},this))}}),T=p.createClass({displayName:"PythonVariable",getInitialState:function(){return{hover:!1}},handleClick:function(e){i(this.props.variable.name)},onMouseOver:function(e){this.setState({hover:!0})},onMouseOut:function(e){this.setState({hover:!1})},render:function(){var e=this.props.variable.type.toLowerCase(),t={dataobjects:"data",modelobjects:"models",predictiveservices:"predserv",jobs:"jobs"};if(e in t){var a=t[e],r=this.props.selected?"sel":this.state.hover?"hvr":"nml";return p.createElement("a",{href:"javascript:",onClick:this.handleClick,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,style:{display:"block"}},p.createElement("img",{src:"/images/lnav_"+a+"_"+r+".png",alt:this.props.variable.name}))}return null}}),C=p.createClass({displayName:"PythonVariables",isSelectedVariable:function(e){var t=m.tryGetProperty(this.props.selected_variable,"name",[]);return e.length>t.length?!1:m.deepEquals(t.slice(0,e.length),e)},render:function(){var e=m.tryGetProperty(this.props.selected_variable,"name",[]),t=m.tryGetProperty(this.props.selected_variable,"type"),a=-1!==v.types.indexOf(t)&&e.length>0&&"Jobs"!=e[0]||m.deepEquals(m.tryGetProperty(this.props.selected_variable,"name"),["Data"]),r=-1!==w.types.indexOf(t)&&e.length>0&&"Jobs"!=e[0]||m.deepEquals(m.tryGetProperty(this.props.selected_variable,"name"),["Models"]);return p.createElement("div",null,p.createElement("h3",{className:"canvas-title"},"GraphLab ",p.createElement("span",{className:"canvas-brand"},"Canvas")),p.createElement(T,{variable:{name:["Data"],type:"DataObjects"},selected:a}),p.createElement(T,{variable:{name:["Models"],type:"ModelObjects"},selected:r}),this.props.variables.map(function(e,t){if(-1!==v.types.indexOf(e.type)||m.deepEquals(e.name,["Data"]))return null;var a=this.isSelectedVariable(e.name);return p.createElement(T,{variable:e,selected:a,key:t})},this))}}),N=p.createClass({displayName:"ProgressBar",render:function(){var e=this.props.task,t=Math.round(100*m.tryGetProperty(e,"progress",0)),a=m.tryGetProperty(e,"finished"),r=["width",0===t?"0s":"0.6s","ease,","opacity",a?"2s":"0s","ease"].join(" "),n={width:t+"%",opacity:a?0:.5,transition:r,WebkitTransition:r},s="canvas-progressbar progress progress-striped active";return p.createElement("div",{className:s},p.createElement("div",{className:"progress-bar",role:"progressbar","aria-valuenow":t,"aria-valuemin":"0","aria-valuemax":"100",style:n}),p.createElement("div",{className:"canvas-progressbar-contents"},this.props.children))}}),P=p.createClass({displayName:"BreadcrumbTitle",getBreadcrumbPiece:function(e,t,a){var r=e[t],n=a?p.createElement("polygon",{points:"0,0 10,11, 0,22",fill:"#495163"}):p.createElement("g",null,p.createElement("rect",{x:0,y:0,width:11,height:22,fill:"#495163"}),p.createElement("line",{x1:0,y1:-2,x2:10,y2:11,strokeWidth:3,stroke:"#5a6378",strokeLinecap:"square"}),p.createElement("line",{x1:10,y1:11,x2:0,y2:24,strokeWidth:3,stroke:"#5a6378",strokeLinecap:"square"}));return p.createElement("span",null,p.createElement("a",{href:"javascript:",onClick:i.bind(this,e.slice(0,t+1)),style:{height:22,lineHeight:"1.15em",fontSize:14,backgroundColor:"#495163",display:"inline-block",verticalAlign:"middle",color:"white",padding:"4px 4px 4px 10px"}},r),p.createElement("svg",{style:{width:11,height:22,verticalAlign:"middle"}},n))},getTitle:function(e,t,a){var r=e[t];return p.createElement("span",{className:"active",style:{marginLeft:a>1?10:0,fontSize:18,fontWeight:500,letterSpacing:"0.03em"}},r)},render:function(){var e=m.tryGetProperty(this.props.selected_variable,"name",[]),t=m.tryGetProperty(this.props.selected_variable,"type",""),a=-1!==v.types.indexOf(t)&&e.length>0&&"Jobs"!=e[0];return p.createElement("div",{className:"canvas-breadcrumb"},a?this.getBreadcrumbPiece(["Data"],0,1===e.length):null,e.map(function(t,r){return p.createElement("span",{key:r},r===e.length-1?this.getTitle(e,r,e.length+(a?1:0)):this.getBreadcrumbPiece(e,r,r==e.length-2))}.bind(this)))}}),A=p.createClass({displayName:"FeedbackButton",mixins:[b.Modal],getInitialState:function(){return{includeLog:!0}},setEmail:function(e){this.props.setEmail(e.target.value)},submit:function(){var e,t=document.querySelector(".canvas-feedback-textarea").value;this.state.includeLog&&(e=y.get()),o(t,e),this.modalClose()},getRadioButton:function(e){var t={type:"radio",name:"canvas-feedback-log",value:e?"true":"false",onChange:this.setState.bind(null,{includeLog:e})};this.state.includeLog===e&&(t.checked=!0);var a=p.DOM.input(t);return p.createElement("span",null,e?"Yes":"No",a)},render:function(){var e={type:"email",name:"canvas-feedback-email",className:"canvas-feedback-email",placeholder:"E-mail (optional)",onChange:this.setEmail},t=p.DOM.input(e),a=p.createElement("div",{className:"canvas-feedback-form"},p.createElement("div",{className:"canvas-feedback-log-area"},p.createElement("label",{htmlFor:"canvas-feedback-log"},"Include log file with feedback?"),p.createElement("span",{className:"canvas-feedback-log-radios"},this.getRadioButton(!0),this.getRadioButton(!1))),p.createElement("div",null,p.createElement("textarea",{name:"canvas-feedback-text",className:"canvas-feedback-textarea",placeholder:"Enter your feedback..."})),p.createElement("div",null,"If you would like a reply via e-mail, enter your address.",t),p.createElement("div",{className:"canvas-form-buttons"},p.createElement(u.Button,{buttonStyle:"primary",style:{marginLeft:0},href:"javascript:",onClick:this.submit},"Submit"),p.createElement(u.Button,{href:"javascript:",onClick:this.modalClose},"Cancel"))),r=this.modalOpen.bind(null,"Send Feedback",a,null),n=p.createElement("a",{className:"canvas-feedback-button",href:"javascript:",onClick:r},"Send us",p.createElement("br",null),"Feedback");return p.createElement("div",{className:"canvas-feedback"},p.createElement("img",{src:"/images/gl_logo.png",style:{width:60,height:39}}),n,this.getModal())}}),M=p.createClass({displayName:"Header",render:function(){return p.createElement("div",{className:"canvas-header-container"},p.createElement("div",{className:"canvas-header-colorbar"},["#b0007f","#0a8cc4","#85bd00","#ff5500","#5e5555"].map(function(e,t){var a={backgroundColor:e,left:String(20*t)+"%"};return p.createElement("div",{key:e,style:a})})))}}),L=p.createClass({displayName:"DataStructureView",getViewFile:function(e){return m.tryGetProperty(e.selected_variable,"view_file")},render:function(){var e=this.getViewFile(this.props);if(null!==e&&e in _){var t=_[e],a=t.View;return p.createElement("div",{style:{marginLeft:h.get("view_main_margin_left"),marginRight:h.get("view_main_margin_right"),marginBottom:h.get("view_main_margin_bottom")}},p.createElement(a,{selectVariable:i,selected_variable:this.props.selected_variable,variables:this.props.variables}))}return p.createElement("div",null)}}),O=p.createClass({displayName:"StatusItem",mixins:[b.Modal],getInitialState:function(){return{showReportBug:!0}},reportBug:function(){o("unexpected_exception: "+JSON.stringify(this.props.message),JSON.stringify(y.get())),this.setState({showReportBug:!1})},render:function(){var e=null;if("stack_trace"in this.props.message){var t=this.modalOpen.bind(this,"Stack Trace",p.createElement("pre",null,p.createElement("code",null,this.props.message.stack_trace))),a=this.state.showReportBug?p.createElement("a",{href:"javascript:",onClick:this.reportBug},"Report Bug to GraphLab"):"Bug reported.";e=p.createElement("div",{className:"canvas-statusbar-stack-trace-link"}," | ",p.createElement("a",{href:"javascript:",onClick:t},"View Stack Trace")," | ",a,this.getModal())}return p.createElement("div",{className:"alert alert-danger alert-dismissable"},p.createElement("button",{type:"button",className:"close","aria-hidden":"true",onClick:this.props.dismiss},"×"),this.props.message.text,e)}}),D=p.createClass({displayName:"StatusBar",render:function(){return p.createElement("div",{className:"canvas-statusbar"},this.props.messages.map(function(e,t){return p.createElement(O,{key:t,message:e,dismiss:l.partial(this.props.dismiss,t)})}.bind(this)))}}),R=p.createClass({displayName:"LeftBar",render:function(){return p.createElement("div",{className:"canvas-leftnav"},this.props.children)}}),q=p.createClass({displayName:"Page",getInitialState:function(){return{selected_variable:null,variables:[],task:null,messages:[],gl_version:"unknown",gl_product_key:"unknown",user_email:null}},shouldComponentUpdate:function(e,t){return!m.deepEquals(this.state,t)},componentWillMount:function(){y.reportMetric("script_load.duration.ms",Date.now()-g_scriptLoadStart),window.onerror=function(e,t,a){y.reportMetric("unhandled_exception",null,{error:e.substring(0,100),url:t.substring(0,100),line:a})},window.onfocus=function(){x=!0},window.onblur=function(){x=!1},y.reportMetric("browser",null,{name:d.browser.name,version:d.browser.version})},componentDidMount:function(){S=this,g.addListener(S),n(),s(),f.start()},setEmail:function(e){this.setState({user_email:e})},dismissStatus:function(e){this.setState({messages:this.state.messages.slice(0,e).concat(this.state.messages.slice(e+1))})},render:function(){var e=this.state.selected_variable;return p.createElement("div",{id:"canvas-page"},p.createElement("div",{className:"canvas-body-container"},p.createElement(R,null,p.createElement(C,{variables:this.state.variables,selected_variable:e}),p.createElement(A,{setEmail:this.setEmail,user_email:this.state.user_email})),p.createElement("div",{className:"canvas-main"},p.createElement(M,null),p.createElement(D,{messages:this.state.messages,dismiss:this.dismissStatus}),p.createElement(N,{task:this.state.task,selected_variable:e},p.createElement(P,{selected_variable:e}),p.createElement(k,{selected_variable:m.tryGetProperty(e,"name",[]),descriptives:m.tryGetProperty(e,"descriptives",{}),links:m.tryGetProperty(e,"descriptives_links",{}),type:m.tryGetProperty(e,"type")})),p.createElement(L,{selected_variable:e,variables:this.state.variables}))))}});t.exports=q},{"./common_controls":2,"./common_util":3,"./data_components/data_objects":4,"./data_components/data_views":5,"./job_components/job":13,"./job_components/job_session":14,"./logging":15,"./model_components/model_objects":23,"./model_components/model_views":26,"./page_layout":30,"./ps_components/predservice":49,"./ps_components/ps_session":50,"./state":51,"./taskqueue":53,bowser:"bowser","dato-dux":"dato-dux",lodash:"lodash","react/addons":"react/addons","zepto-browserify":"zepto-browserify"}],2:[function(e,t,a){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=e("react/addons"),s=(e("./page_layout"),e("./common_util")),i=e("./taskqueue"),o=(e("lodash"),n.createClass({displayName:"Tooltip",render:function(){var e={display:this.props.show?"":"none",top:this.props.y-50,left:this.props.x-150};return n.createElement("div",{style:e,className:"canvas-tooltip"},this.props.data)}})),l=n.createClass({displayName:"Modal",doNothing:function(e){e.stopPropagation()},render:function(){var e=this.props.title?n.createElement("div",{className:"modal-header"},n.createElement("button",{type:"button",className:"close",onClick:this.props.closeModal},"×"),n.createElement("h4",{className:"modal-title"},this.props.title)):null,t="modal-dialog "+(this.props.additionalClass?this.props.additionalClass:"");return n.createElement("div",{style:{color:"black"}},n.createElement("div",{onClick:this.props.closeModal,className:"modal fade"+(this.props.open?" in":""),style:{display:this.props.open?"block":"none"}},n.createElement("div",{onClick:this.doNothing,className:t},n.createElement("div",{className:"modal-content"},e,n.createElement("div",{className:"modal-body"},this.props.body)))),n.createElement("div",{className:"modal-backdrop fade "+(this.props.open?"in":"hidden")}))}}),c={setWindowDimensions:function(){this.setState({windowResize:!0})},componentWillMount:function(){window.addEventListener("resize",this.setWindowDimensions)},componentWillUnmount:function(){window.removeEventListener("resize",this.setWindowDimensions)}};t.exports={Button:n.createClass({displayName:"Button",getInitialState:function(){return{depressed:!1}},getDefaultProps:function(){return{backgroundColor:"#0a8cc4",depressedColor:"#005991"}},mouseDown:function(){this.setState({depressed:!0})},mouseUp:function(){this.setState({depressed:!1})},click:function(e){return this.mouseUp(),this.props.disabled?void 0:this.props.onClick(e)},render:function(){var e=s.merge({display:"inline-block",paddingLeft:12,paddingRight:12,height:26,fontSize:12,color:"white",backgroundColor:this.state.depressed?this.props.depressedColor:this.props.backgroundColor,textTransform:"uppercase",textAlign:"center",textDecoration:"none",lineHeight:"26px",transition:"background-color "+(this.state.depressed?0:200)+"ms linear"},this.props.style);return this.props.disabled&&(e.backgroundColor="grey",e.cursor="not-allowed"),n.createElement("a",{href:"javascript:",onClick:this.click,onMouseDown:this.mouseDown,onMouseUp:this.mouseUp,disabled:this.props.disabled,style:e},this.props.children)}}),Menu:{mixins:[c],getInitialState:function(){return{items:[],menuOpen:!1,top:0,left:0}},itemClick:function(e,t){t.preventDefault(),t.stopPropagation(),e.onClick(this.props.selected_variable,t)},openMenu:function(e,t){this.setState({menuOpen:!0,items:e,top:t.clientY,left:t.clientX})},closeMenu:function(){this.setState({menuOpen:!1})},getMenu:function(){return this.state.menuOpen?n.createElement("div",null,n.createElement("div",{style:{position:"fixed",top:0,left:0,width:this.state.windowWidth,height:this.state.windowHeight,zIndex:40},onClick:this.closeMenu}),n.createElement("div",{style:{position:"fixed",top:this.state.top,left:this.state.left,border:"1px solid #ddd",zIndex:41}},this.state.items.map(function(e,t){return n.createElement("div",{key:t},n.createElement("a",{href:"javascript:",onClick:this.itemClick.bind(this,e),style:{display:"inline-block",width:"100%",padding:4,backgroundColor:"white"}},e.label))}.bind(this)))):n.createElement("div",null)}},Searchable:{getInitialState:function(){return{search_value:""}},getSearchBox:function(e,t){return n.createElement("input",{type:"search",value:this.state.search_value,onChange:this.setSearchValue,placeholder:e,style:t})},setSearchValue:function(e){this.setState({search_value:e.target.value})}},Slider:n.createClass({displayName:"Slider",render:function(){return s.assert(this.props.value>=this.props.min),s.assert(this.props.value<=this.props.max),n.createElement("div",{className:"canvas-slider"},n.createElement("div",{className:"canvas-slider-label"},this.props.label),n.createElement("div",{className:"canvas-slider-control"},this.props.min,n.createElement("input",r({},this.props,{type:"range",name:"canvas-slider-range"})),this.props.max),n.createElement("div",{className:"canvas-slider-box"},n.createElement("input",r({},this.props,{type:"number",name:"canvas-slider-number"}))))}}),SortableTable:n.createClass({displayName:"SortableTable",getValue:function(e,t,a){var r=null;if(null===t)if(-1!==this.props.sortable.indexOf(a)){var s="fa fa-sort";this.props.sortColumn===a&&("number"===this.props.types[a]?s+="-numeric":"string"===this.props.types[a]&&(s+="-alpha")),this.props.sortColumn===a&&this.props.sortDesc?s+="-desc":this.props.sortColumn===a&&(s+="-asc"),r=n.createElement("span",null,e[a],n.createElement("a",{onClick:this.sort.bind(this,a),href:"javascript:"},n.createElement("i",{className:s,style:{marginLeft:6,marginRight:6}})))}else r=e[a];else r=e[t][a];return n.createElement("div",{style:{padding:8,display:"inline-block"}},r)},getDefaultProps:function(){return{sortable:[],sortColumn:null,sortDesc:!1,renderTD:!0}},copyProps:function(){return{data:s.deepCopy(this.props.data),sortColumn:this.props.sortColumn,sortDesc:this.props.sortDesc}},sort:function(e){var t=this.props.sortColumn===e&&!this.props.sortDesc;this.props.onSort(e,t)},render:function(){var e=s.deepCopy(this.props.data),t=this.props.sortDesc;e.sort(function(e,a){return e=e[this.props.sortColumn],a=a[this.props.sortColumn],"number"===this.props.types[this.props.sortColumn]&&("n/a"===e&&(e=null),"n/a"===a&&(a=null)),null===e?null===a?0:1:null===a?1:"number"==typeof e?t?a-e:e-a:(s.assert("string"==typeof e),t?a.localeCompare(e):e.localeCompare(a))}.bind(this));var a=this.getValue;return"getValue"in this.props&&(a=this.props.getValue.bind(this)),n.createElement("div",{style:this.props.style},n.createElement("table",{className:"table table-bordered",style:s.merge({width:"auto",border:"none"},this.props.tableStyle)},n.createElement("thead",null,n.createElement("tr",null,this.props.headers.map(function(e,t){return n.createElement("th",{key:t,style:{whiteSpace:"nowrap",verticalAlign:"middle",padding:0,border:"none"}},a(this.props.headers,null,t))}.bind(this)))),n.createElement("tbody",null,e.map(function(t,r){return n.createElement("tr",{key:r},t.map(function(t,s){var i=a(e,r,s);return this.props.renderTD&&(i=n.createElement("td",{style:{padding:0,verticalAlign:"middle",border:"none"},key:s},i)),i}.bind(this)))}.bind(this)))))}}),Tooltip:{getInitialState:function(){return{tooltip:{show:!1,x:0,y:0,data:null,timeoutFn:null}}},tooltipMouseOver:function(e,t){this.setState({tooltip:{show:!1,x:t.clientX,y:t.clientY,data:e,timeoutFn:setTimeout(function(){this.setState({tooltip:s.merge(this.state.tooltip,{show:!0})})}.bind(this),400)}})},tooltipMouseOut:function(e){clearTimeout(this.state.tooltip.timeoutFn),this.setState({tooltip:{show:!1,timeoutFn:null}})},getTooltip:function(){return n.createElement(o,{data:this.state.tooltip.data,x:this.state.tooltip.x,y:this.state.tooltip.y-20,show:this.state.tooltip.show})}},Modal:{getInitialState:function(){return{modal:{open:!1}}},modalOpen:function(e,t,a){this.setState({modal:{open:!0,title:e,body:t,additionalClass:a}})},modalClose:function(){this.setState({modal:{open:!1}})},getModal:function(){return n.createElement(l,{open:this.state.modal.open,closeModal:this.modalClose,title:this.state.modal.title,body:this.state.modal.body,additionalClass:s.tryGetProperty(this.state.modal,"additionalClass","")})}},SizeToWindow:c,Tabs:n.createClass({displayName:"Tabs",mixins:[c],getInitialState:function(){return{initialTab:this.props.initialTab,selectedTab:this.props.initialTab}},componentWillReceiveProps:function(e){e.initialTab!=this.state.initialTab&&this.setState({initialTab:e.initialTab,selectedTab:e.initialTab})},selectTab:function(e,t){var a={};a[this.state.selectedTab]=!0,this.setState({selectedTab:e})},render:function(){return n.createElement("div",null,n.createElement("ul",{className:"nav nav-tabs",role:"tablist"},this.props.tabs.map(function(e,t){return n.createElement("li",{key:t,className:e[0]===this.state.selectedTab?"active":""},n.createElement("a",{href:"javascript:",onClick:this.selectTab.bind(this,e[0])},e[0]))}.bind(this))),n.createElement("div",{className:"tab-content",style:{overflow:"auto"}},this.props.tabs.map(function(e,t){var a=e[0],s={visible:a===this.state.selectedTab},i=e[1],o=a===this.state.selectedTab;return n.createElement("div",{key:t,className:"tab-pane"+(o?" active":"")},n.createElement("div",{className:"canvas-view-main"},n.createElement(i,r({},this.props,{tab:s,activeTab:o}))))}.bind(this))))}}),AsyncState:{componentWillReceiveProps:function(e){s.deepEquals(this.props,e)||this.setState(this.getInitialState(e),function(){this.updateAsyncState(e)}.bind(this))},addTask:function(e){this.tasks.push(e),i.add(e)},cancelAllTasks:function(){this.tasks.forEach(function(e){e.cancel()}),this.tasks=[]},componentDidMount:function(){this.tasks=[],this.updateAsyncState(this.props)},componentWillUnmount:function(){this.cancelAllTasks()}},SVG:{ellipse:n.createClass({displayName:"ellipse",render:function(){var e="M "+(this.props.cx-this.props.rx)+" "+this.props.cy+" a "+this.props.rx+" "+this.props.ry+" 0 1 0 "+2*this.props.rx+" 0 a "+this.props.rx+" "+this.props.ry+" 0 1 0 "+-(2*this.props.rx)+" 0";return n.createElement("path",r({},this.props,{d:e}))}})}}},{"./common_util":3,"./page_layout":30,"./taskqueue":53,lodash:"lodash","react/addons":"react/addons"}],3:[function(e,t,a){"use strict";function r(e){if("assert"in console)console.assert(e);else if(!e){var t="assertion failed";"error"in console?console.error(t):"log"in console&&console.log(t),"trace"in console&&console.trace()}}function n(e,t){var a=Math.pow(10,e);return Math.round(t*a)/a}function s(e){if(null===e||void 0===e)return 0/0;if(.001>e&&e>0||e>-.001&&0>e)return e.toExponential(3);if(e>=1e7||-1e7>=e)return e.toExponential(3);var t=e.toLocaleString();return t.length>24&&(t=e.toExponential(5)),t}function i(e,t,a){var r={};for(var n in e)r[n]=e[n];for(var s in t)r[s]=a&&s in r?i(r[s],t[s]):t[s];return r}function o(e,t){var a=[];return"datetime"===e&&a.push(function(e){return[new Date(e[0]),e[1]]}),"datetime"===t&&a.push(function(e){return[e[0],new Date(e[1])]}),a.reduce(function(e,t){return function(a){return t(e(a))}},function(e){return e})}function l(e){return null!==e&&"object"==typeof e&&e.type&&"image"===e.type.toLowerCase()?!0:!1}var c=e("d3"),d=e("dagre"),u=e("react/addons"),p=[[Math.pow(2,20),1e3],[Math.pow(2,27),5e3]],h=c.scale.linear().domain(p.map(function(e){return e[0]})).range(p.map(function(e){return e[1]})),m=u.createClass({displayName:"CanvasImage",draw:function(e){for(var t=this.props.data,a=e.createImageData(this.props.width,this.props.height),n=t.length/this.props.channels,s=0;4*n>s;s+=4){var i=s/4*this.props.channels;a.data[s]=t[i],1===this.props.channels?(a.data[s+1]=t[i],a.data[s+2]=t[i],a.data[s+3]=255):(a.data[s+1]=t[i+1],a.data[s+2]=t[i+2],3===this.props.channels?a.data[s+3]=255:(r(4===this.props.channels),a.data[s+3]=t[i+3]))}e.putImageData(a,0,0)},componentDidMount:function(){var e=u.findDOMNode(this).getContext("2d");this.draw(e)},componentDidUpdate:function(){var e=u.findDOMNode(this).getContext("2d");e.clearRect(0,0,this.props.width,this.props.height),this.draw(e)},shouldComponentUpdate:function(e,t){return e.id!==this.props.id},render:function(){return u.createElement("canvas",{style:this.props.style,width:this.props.width,height:this.props.height})}});t.exports={assert:r,merge:i,dataTransform:o,partial:function(e,t,a){var r={};return a?Object.keys(e).forEach(function(a){-1===t.indexOf(a)&&(r[a]=e[a])}):t.forEach(function(t){r[t]=e[t]}),r},objectMap:function(e,t){var a={};for(var r in e)a=i(a,t(r,e[r]));return a},tryGetProperty:function f(e,t,a){for(var n=!0;n;){var s=e,i=t,o=a;if(n=!1,"undefined"==typeof o&&(o=null),null==i)return o;if(null==s)return o;if("string"==typeof i||"number"==typeof i)return i in s?s[i]:o;r(Array.isArray(i));var l=i.shift();0!==i.length?(e=f(s,l),t=i,a=o,n=!0,l=void 0):(e=s,t=l,a=o,n=!0,l=void 0)}},deepCopy:function(e){return JSON.parse(JSON.stringify(e))},deepEquals:function b(e,t,a){if("undefined"==typeof a&&(a=0),a>500)return r(!1),!1;if("function"==typeof e&&"function"==typeof t)return!0;if(typeof e!=typeof t)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var n=!0,s=0;s<e.length;s++)if(n=n&&b(e[s],t[s],a+1),!n)return n;return n}if("object"==typeof e){var i={};for(var o in e)i[o]=1;for(var o in t){if(!(o in i))return!1;i[o]++}var n=!0;for(var o in i){if(2!==i[o])return!1;if(n=n&&b(e[o],t[o],a+1),!n)return n}return n}return e===t},sortFrequentItems:function(e,t){var a=[];for(var r in e)a.push({key:r,value:e[r]});return a.sort(function(e,t){return t.value.frequency-e.value.frequency}),a.slice(0,t)},formatElapsed:function(e){var t=new Date(e),a={hours:t.getUTCHours(),minutes:t.getUTCMinutes(),seconds:t.getUTCSeconds()};for(var r in a){var n=String(a[r]);n.length<2&&(n="0"+n),a[r]=n}return a.hours+":"+a.minutes+":"+a.seconds},numberWithSuffix:function(e){if(e>100)return String(e);var t=e%10;return 1===t&&11!==e?e+"st":2===t&&12!==e?e+"nd":3===t&&13!==e?e+"rd":e+"th"},roundToXDecimalPlaces:n,formatNumber:s,formatSArrayValue:function(e,t){var a=e;if(""===e)a="''";else if("number"==typeof e)a=s(e);else if(l(e)){var r={};t&&(r.maxHeight=t);{e.value}a="raw"===e.format?u.createElement(m,{alt:"Image Content",width:e.width,height:e.height,data:e.value,channels:e.channels,style:r,id:e.id}):u.createElement("img",{alt:"Image Content",src:"data:"+e.value,style:r})}return a},isSArrayImageType:l,siPrefixToShortScale:function(e){var t={Y:"septillion",Z:"sextillion",E:"quintillion",P:"quadrillion",T:"trillion",G:"billion",M:"million",k:"thousand",h:"hundred",da:"ten","":null,d:"tenth",c:"hundredth",m:"thousandth","µ":"millionth",n:"billionth",p:"trillionth",f:"quadrillionth",a:"quintillionth",z:"sextillionth",y:"septillionth"};return e in t?t[e]:(Util.assert(!1),null)},getCookie:function(e){var t=document.cookie.match("\\b"+e+"=([^;]*)\\b");return t?t[1]:void 0},getSketchPollInterval:function(e){return e<p[0][0]?p[0][1]:e>p[1][0]?p[1][1]:h(e)},getColorFromNodeType:function(e){var t="";return"Task"==e?t="#b0007f":"input"==e||"output"==e?t="#0a8cc4":"param"==e&&(t="#85bd00"),t},getColorFromStatus:function(e,t){var a="";return t?"#ff5500":a="Completed"==e?"#0a8cc4":"Running"==e?"#85bd00":"Failed"==e?"#B80000":"Canceled"==e?"#B80000":"#B2B2B2"},getColorFromStatusHighlight:function(e){var t="";return t="Completed"==e?"#0a6ca4":"Running"==e?"#659d00":"Failed"==e?"#A80000":"#A2A2A2"},getEdgeStrokeColor:function(e,t){return e?t?"#727272":"#E2E2E2":"#B2B2B2"},getDepGraphSelectedStrokeColor:function(){return"#5e5555"},dagreLayout:function(e,t,a,r,n,s,i){var o=new d.graphlib.Graph({directed:!0});o.setGraph({}),o.setDefaultEdgeLabel(function(){return{}});for(var l=0;l<e.length;l++)o.setNode(e[l].name,{label:String(e[l].name),width:a,height:r});for(var l=0;l<t.length;l++)o.setEdge(t[l].source,t[l].target);o.setGraph(0>n&&0>s?{rankdir:i}:n>=0&&0>s?{rankdir:i,edgesep:n}:0>n&&s>=0?{rankdir:i,ranksep:s}:{rankdir:i,edgesep:n,ranksep:s});var c=(d.layout(o),null);o.nodes().forEach(function(t){for(var a=0;a<e.length;a++)e[a].name==t&&(c=o.node(t),e[a].x=c.x,e[a].y=c.y)});var u,p,h,m=0;return o.edges().forEach(function(e){u=o.node(e.v),p=o.node(e.w),h=o.edge(e);for(var a=[[u.x,u.y]],r=0;r<h.points.length;r++)a.push([h.points[r].x,h.points[r].y]);a.push([p.x,p.y]),t[m++].points=a}),{vertices:e,edges:t}}}},{d3:"d3",dagre:"dagre","react/addons":"react/addons"}],4:[function(e,t,a){"use strict";var r=e("react/addons"),n=e("./data_views").types,s=(e("../common_controls"),r.createClass({displayName:"Header",render:function(){return r.createElement("th",null,this.props.text)}}));t.exports={View:r.createClass({displayName:"View",render:function(){return r.createElement("div",{className:"canvas canvas-view-main data-objects",style:{backgroundColor:"#eee",paddingLeft:32,paddingRight:32,paddingTop:20}},r.createElement("table",{className:"table table-striped",style:{backgroundColor:"white"}},r.createElement("thead",null,r.createElement("tr",null,r.createElement(s,{text:"Name"}),r.createElement(s,{text:"Type"}))),r.createElement("tbody",null,this.props.variables.map(function(e,t){return e.name.length>1||-1===n.indexOf(e.type)?null:r.createElement("tr",{key:t},r.createElement("td",null,r.createElement("a",{href:"javascript:",onClick:this.props.selectVariable.bind(null,e.name),style:{display:"inline-block",width:"100%"}},e.name[0])),r.createElement("td",null,e.type))},this))))}})}},{"../common_controls":2,"./data_views":5,"react/addons":"react/addons"}],5:[function(e,t,a){"use strict";var r=["SArray","SFrame","SGraph"],n={sframe:e("./sframe"),sgraph:e("./sgraph"),sarray:e("./sarray")};t.exports={views:n,types:r}},{"./sarray":6,"./sframe":7,"./sgraph":8}],6:[function(e,t,a){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=e("react/addons"),s=e("d3"),i=e("zepto-browserify").$,o=e("../plots"),l=e("../common_util"),c=e("../taskqueue"),d=e("../common_controls"),u=e("../logging"),p=e("../plots/histogram").Histogram,h=n.createClass({displayName:"ImageView",mixins:[d.AsyncState,d.SizeToWindow],getInitialState:function(){return{images:this.props.ipython?this.props.rows:[]}},updateAsyncState:function(e){var t=l.tryGetProperty(this.props.selected_variable,["descriptives","rows"],0);0!==t&&this.addTask(new c.SingleTask("/rows/0/20","get_rows").done(function(e){this.setState({images:e.values})}.bind(this)))},render:function(){var e=this.props.selected_variable.name,t=Array.isArray(e)?e[e.length-1]:e,a=l.tryGetProperty(this.props.selected_variable,["descriptives","rows"],0),r="All "+String(a)+" images in ";return a>=20&&(r="The first 20 images in "),n.createElement("div",{
className:"tab-content",style:{maxWidth:this.state.windowWidth-240,maxHeight:this.props.ipython?"none":this.state.windowHeight-124,overflow:"auto"}},n.createElement("div",{className:"canvas canvas-view-main sarray"},n.createElement("h3",null,r," ",n.createElement("em",null,t)),this.state.images.map(function(e,t){return n.createElement("div",{key:t,style:{padding:10,margin:10,border:"1px solid #5e5555",display:"inline-block"}},l.formatSArrayValue(e,200))}.bind(this))))}}),m=n.createClass({displayName:"CategoricalView",statics:{tabName:"Categorical"},getInitialState:function(){return{frequentItemsShown:30}},getDefaultProps:function(){return{show_title:!0}},showMoreFrequentItems:function(){this.setState({frequentItemsShown:this.state.frequentItemsShown+30})},render:function(){var e=this.props.sketch,t=l.tryGetProperty(e,"frequent_items",[]),a=Object.keys(t).length>this.state.frequentItemsShown?n.createElement("div",null,n.createElement("a",{href:"javascript:",onClick:this.showMoreFrequentItems},"Show More")):null;t=l.sortFrequentItems(t,this.state.frequentItemsShown);var r=t.map(function(t){return[l.formatSArrayValue(t.value.value,26),l.formatNumber(t.value.frequency),l.formatNumber(t.value.frequency/e.size*100)+"%"]}.bind(this)),i=["table","table-bordered","table-condensed","canvas-singlecolumn-table"],o=s.scale.linear().domain([0,s.max(t.map(function(e){return e.value.frequency}))]).range([0,250]),c=this.props.show_title?n.createElement("h3",{style:{marginTop:0,marginBottom:20,height:28}},"Most frequent items from ",n.createElement("em",null,this.props.selected_column)):null,d=0===t.length?n.createElement("span",null,"No values appear with ≥ 0.01% occurrence."):n.createElement("table",{className:i.join(" "),style:{borderRight:"none",borderBottom:"none"}},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Value"),n.createElement("th",null,"Count"),n.createElement("th",null,"Percent"))),n.createElement("tbody",null,r.map(function(e,a){return n.createElement("tr",{key:a},e.map(function(e,t){return n.createElement("td",{key:t},e)}.bind(this)),n.createElement("td",{style:{width:"250px",border:"none",padding:"0px 0px 0px 5px"}},n.createElement("div",{style:{width:o(t[a].value.frequency),height:26,backgroundColor:"#85bd00",transition:"width 0.3s ease"}})))}.bind(this))));return n.createElement("div",{className:"canvas-sarray-table categorical"},c,d,a)}}),f=n.createClass({displayName:"Histogram",render:function(){if(!this.props||!this.props.histogram)return n.createElement("div",null);var e=[],t="",a=[];if(!this.props||!this.props.histogram)return n.createElement("div",null);var r=this.props.histogram;return t=this.props.selected_column,e=[{name:t,data:r.bins,type:"bar"}],a=s.range(r.min,r.max,(r.max-r.min)/r.bins.length).slice(0,r.bins.length),a.push(r.max),n.createElement("div",null,n.createElement("h3",{style:{marginTop:0,marginBottom:20,height:28}},"Distribution of values from ",n.createElement("em",null,this.props.selected_column)),n.createElement("div",{style:{marginTop:87}},n.createElement(p,{seriesArray:e,boundaries:a,xLabel:t,width:575,height:400})))}}),b=n.createClass({displayName:"NumericView",statics:{tabName:"Numeric"},render:function(){var e=this.props.sketch,t=l.tryGetProperty(this.props.selected_variable,["descriptives","rows"],0),a=l.tryGetProperty(e,"quantile",[]),r=l.tryGetProperty(e,"num_unique",20);r=Math.max(2,Math.min(r,20));var s=this.props.histogram?n.createElement(f,{histogram:this.props.histogram.histogram,min:this.props.histogram.min,max:this.props.histogram.max,selected_column:this.props.selected_column}):n.createElement(o.QuantileHistogram,{quantile:a,starting_bins:r,rows:t,selected_column:this.props.selected_column}),i={min:this.props.histogram||e,max:this.props.histogram||e,mean:e,std:e},c=["min","max","mean","std"].map(function(e){var t=[e],a=i[e];return t.push(e in a?l.formatNumber(a[e]):null),t},this).concat([1,25,50,75,99].map(function(t){var a=["quantile("+String(t/100)+") (est.)"];return a.push("quantile"in e&&e.quantile.length>0?l.formatNumber(e.quantile[t]):null),a},this)),d=["table","table-striped","table-bordered","table-condensed","canvas-singlecolumn-table"];return n.createElement("div",null,n.createElement("div",{className:"canvas-singlecolumn-plot",style:{marginRight:30}},s),n.createElement("div",{className:"canvas-sarray-table numeric"},n.createElement("table",{className:d.join(" ")},n.createElement("tbody",null,c.map(function(e,t){return n.createElement("tr",{key:t},e.map(function(e,t){return n.createElement("td",{key:t},e)},this))},this)))))}}),g={getInitialState:function(){return{subcolumn:null,subsketch:null}},updateAsyncState:function(e){this.setState({subcolumn:null,subsketch:null})},getSubsketch:function(e){this.setState({subcolumn:e});var t=new c.ProgressTask("/subsketch/"+e,"sketch_summary().element_sub_sketch()",function(e){this.setState({subsketch:e})}.bind(this),2e3);this.addTask(t.always(function(){var e=(this.canceled?"page_task":"page_task.canceled")+".duration.ms";u.reportMetric(e,this.elapsed(),{operation:this.operation(),type:"SArray<dict>"})}))},onItemClick:function(e){this.state.subcolumn===e?this.setState(this.getInitialState()):this.getSubsketch(e)}},y=n.createClass({displayName:"DictView",mixins:[d.AsyncState,g],statics:{tabName:"Dictionary"},render:function(){var e=n.createElement(o.Frequency,{data:l.tryGetProperty(this.props.sketch,"keys",{}),width:600,aspectRatio:5,maxValues:50,onItemClick:this.onItemClick,highlightElement:this.state.subcolumn,disabled:this.props.ipython}),t=l.tryGetProperty(this.props.sketch,["values","numeric"],!1),a=t?b:m,s=null===this.state.subsketch?l.tryGetProperty(this.props.sketch,"values",{}):this.state.subsketch,i=null!=this.state.subcolumn?n.createElement("em",null," ",this.state.subcolumn):n.createElement("span",null," all keys"),c=t?n.createElement("span",null,"Distribution of values from"):n.createElement("span",null,"Most frequent values from");return n.createElement("div",null,n.createElement("h3",{style:{marginTop:0,marginBottom:20,height:28}},"Most frequent keys from ",n.createElement("em",null,this.props.selected_column),", sorted by frequency"),e,n.createElement("hr",null),n.createElement("h3",{style:{marginTop:30,marginBottom:20,height:28}},c,i),n.createElement(a,r({},this.props,{sketch:s,histogram:null,show_title:!1})))}}),v=n.createClass({displayName:"ListView",statics:{tabName:"List"},render:function(){return n.createElement("div",null,n.createElement("h3",{style:{marginTop:0,marginBottom:20,height:28}},n.createElement("span",null,"Most frequent values in ",n.createElement("em",null,this.props.selected_column)," ",n.createElement("small",null,"(aggregated across all sub-columns)"))),n.createElement(m,r({},this.props,{show_title:!1})))}}),w=n.createClass({displayName:"ArrayView",mixins:[d.AsyncState,g],statics:{tabName:"Array"},onSelect:function(e){var t=e.target.value;"all (aggregate)"===t?this.setState(this.getInitialState()):this.getSubsketch(t)},render:function(){var e=null===this.state.subsketch?this.props.sketch:this.state.subsketch;return n.createElement("div",null,n.createElement("h3",{style:{marginTop:0,marginBottom:20,height:28}},n.createElement("span",null,"Distribution of values in ",n.createElement("em",null,this.props.selected_column),", all sub-columns (aggregate)")),n.createElement(b,r({},this.props,{sketch:e,histogram:null})))}}),E=n.createClass({displayName:"SArrayTab",render:function(){var e=l.tryGetProperty(this.props.selected_variable,["descriptives","rows"],0);if(0===e)return n.createElement("div",null,n.createElement("h5",null,"No data in this column."));var t=this.props.selected_variable.name,a=Array.isArray(t)?t[t.length-1]:t,s=this.props.view;return n.createElement("div",{className:"tab-content",style:{maxWidth:this.props.windowWidth-240,maxHeight:this.props.ipython?"none":this.props.windowHeight-124,overflow:"auto"}},n.createElement("div",{className:"canvas canvas-view-main sarray"},n.createElement(s,r({},this.props,{selected_column:a}))))}}),_=function(e){return n.createClass({render:function(){return n.createElement(E,r({},this.props,{view:e}))}})},x={Categorical:_(m),Numeric:_(b),Dictionary:_(y),Array:_(w),List:_(v),Images:h};x.View=n.createClass({mixins:[d.AsyncState,d.SizeToWindow],getInitialState:function(e){return e||(e=this.props),1==e.ipython?{sketch:e.sketch}:{sketch:{},histogram:{}}},updateAsyncState:function(e){var t=[],a=l.tryGetProperty(this.props.selected_variable,["descriptives","rows"],0);if(0!==a){var r=l.tryGetProperty(this.props.selected_variable,"dtype");("float"===r||"int"===r)&&t.push(new c.ProgressTask("/histogram/","histogram()",function(e){this.setState({histogram:e})}.bind(this),0)),t.push(new c.ProgressTask("/sketch/","sketch_summary()",function(e){this.setState({sketch:e})}.bind(this),l.getSketchPollInterval(a)).fail(function(){this.canceled&&i.ajax({type:"GET",url:"/cancel_sketch"})})),this.addTask(new c.MultiTask(t).always(function(){var e=(this.canceled?"page_task":"page_task.canceled")+".duration.ms";u.reportMetric(e,this.elapsed(),{operation:this.operation(),type:"SArray"})}))}},render:function(){var e=d.Tabs,t=this.props.selected_variable.view_components.map(function(e){return[e,x[e]]}.bind(this));return n.createElement(e,{selectVariable:this.props.selectVariable,selected_variable:this.props.selected_variable,tabs:t,initialTab:this.props.selected_variable.view_component,histogram:this.state.histogram,sketch:this.state.sketch,windowWidth:this.state.windowWidth,windowHeight:this.state.windowHeight})}}),t.exports=x},{"../common_controls":2,"../common_util":3,"../logging":15,"../plots":36,"../plots/histogram":44,"../taskqueue":53,d3:"d3","react/addons":"react/addons","zepto-browserify":"zepto-browserify"}],7:[function(e,t,a){"use strict";var r=function(){function e(e,t){var a=[],r=!0,n=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(l){n=!0,s=l}finally{try{!r&&o["return"]&&o["return"]()}finally{if(n)throw s}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=e("react/addons"),s=e("d3"),i=e("lodash"),o=(e("bowser"),e("zepto-browserify").$),l=e("../plots"),c=e("../page_layout"),d=e("../common_util"),u=e("../taskqueue"),p=e("../common_controls"),h=e("../logging"),m=e("../table"),f=e("../plot_components/scatter"),b=e("../plot_components/bar"),g=e("../plot_components/boxwhisker"),y=e("../plot_components/heatmap"),v=m.TabularView.getColumns,w=n.createClass({displayName:"SingleColumn",render:function(){var e=d.tryGetProperty(this.props.selected_variable,["descriptives","rows"],0);if(0===e)return n.createElement("div",null,n.createElement("h5",null,"No data in this column."));var t=i.memoize(d.formatSArrayValue,JSON.stringify),a=!d.tryGetProperty(this.props.sketch,"numeric",!1),r=d.tryGetProperty(this.props.column,"dtype"),s=[];if("dict"===r){var o=d.tryGetProperty(this.props.sketch,"keys",{}),l=d.tryGetProperty(this.props.sketch,"values",{}),c=d.tryGetProperty(l,"numeric",!1),u=c?"distribution of values (all keys):":"frequent items (all keys):";s.push(n.createElement("div",{key:"dict_summary"},n.createElement("div",{className:"canvas-sframe-summary-plot-title"},"frequent keys:"),n.createElement(_,{data:o,categorical:!d.tryGetProperty(o,"numeric",!1),maxItems:5}),n.createElement("div",{className:"canvas-sframe-summary-plot-title"},u),n.createElement(_,{data:l,categorical:!d.tryGetProperty(l,"numeric",!1),width:32,vertical:!0,maxItems:5})))}else if("Image"!==r){var p=a?"frequent items":"distribution of values";("list"===r||"array"===r)&&(p+=" (all sub-columns)"),s.push(n.createElement("div",{key:"nondict_summary"},n.createElement("div",{className:"canvas-sframe-summary-plot-title"},p,":"),n.createElement(_,{data:this.props.sketch,categorical:a,width:32,vertical:!0,maxItems:12})))}else{var h=d.tryGetProperty(this.props.sketch,"samples",[]);s.push(n.createElement("div",{key:"nondict_summary"},n.createElement("div",{className:"canvas-sframe-summary-plot-title"},"First 4 images:"),h.map(function(e,a){var r=t(e,66);return n.createElement("div",{key:a,style:{paddingBottom:"4px"}},r)})))}var m=!("complete"in this.props.sketch&&this.props.sketch.complete),f="dict"===r?n.createElement(x,{name:"unique keys (est.)",value:d.tryGetProperty(this.props.sketch,["keys","num_unique"]),loading:m}):"Image"!==r?n.createElement(x,{name:"num_unique (est.)",value:this.props.sketch.num_unique,loading:m}):null,b=a?null:["min","max","median","mean","std"].map(function(e,t){return n.createElement(x,{key:t,name:e,value:this.props.sketch[e],loading:!1})}.bind(this)),g="Image"!==r?n.createElement(x,{name:"num_undefined",value:this.props.sketch.num_undefined,loading:m}):null;return n.createElement("div",null,n.createElement("table",{className:"canvas-sframe-inner-table"},n.createElement("tbody",null,n.createElement(x,{name:"dtype",value:r}),f,g,b)),s)}}),E=n.createClass({displayName:"ColumnFrequencyPlot",render:function(){if(!("frequent_items"in this.props.data)||0===this.props.data.frequent_items.length)return n.createElement("div",null);var e=176,t=d.tryGetProperty(this.props,"maxItems",10),a=d.sortFrequentItems(this.props.data.frequent_items,t);if(0===a.length)return n.createElement("div",{className:"canvas-sframe-summary-statistic-name"},"No values appear with ≥ 0.01% occurrence.");var r=s.scale.linear().domain([0,a[0].value.frequency]).range([0,e]);return n.createElement("div",null,n.createElement("table",null,n.createElement("tbody",null,a.map(function(t,a){var s=d.formatSArrayValue(t.value.value,20);return n.createElement("tr",{key:a},n.createElement("td",{style:{position:"relative",width:e,height:22}},n.createElement("div",{style:{position:"absolute",left:0,top:0,width:r(t.value.frequency),height:20,backgroundColor:"rgba(133, 189, 0, 0.2)"}}),n.createElement("div",{style:{paddingLeft:8,paddingRight:8,width:e,height:20,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},s)))}.bind(this)))))}}),_=n.createClass({displayName:"SummaryPlot",render:function(){var e=this.props.categorical?E:l.BoxAndWhisker;return n.createElement("div",{className:"canvas-sframe-column-plot"},n.createElement(e,this.props))}}),x=n.createClass({displayName:"SummaryStatistic",render:function(){var e=this.props.value;return this.props.loading?e=n.createElement("span",{style:{position:"relative",marginLeft:30,marginRight:-10}},n.createElement("i",{className:"fa-li fa fa-spinner fa-spin"})):"number"==typeof e&&(e=d.formatNumber(e)),n.createElement("tr",null,n.createElement("td",{className:"canvas-sframe-summary-statistic-name"},this.props.name,": "),n.createElement("td",{className:"canvas-sframe-summary-statistic-value"},e))}}),S=n.createClass({displayName:"SummaryView",mixins:[p.AsyncState],getInitialState:function(e){return e||(e=this.props),e.ipython===!0?{sketch:e.sketch,getColumns:i.memoize(v)}:{sketch:{},getColumns:i.memoize(v)}},updateAsyncState:function(e){return d.tryGetProperty(e,["tab","visible"],void 0)===!1?void this.cancelAllTasks():void this.setState({getColumns:i.memoize(v)},function(){var t=d.tryGetProperty(e.selected_variable,["descriptives","rows"],0);0!==t&&this.addTask(new u.SingleTask("/cached_sketches","cached sketch summaries").done(function(e){var a={},r=[];this.state.getColumns(this.props).forEach(function(n,s){var i=n.name;if(null!==e[i]&&(a[i]=e[i]),null===e[i]||!e[i].complete){var l=encodeURIComponent(i);r.push(new u.ProgressTask("/sketch/"+l,'["'+i+'"].sketch_summary()',function(e){var t={};t[i]=e,this.setState({sketch:d.merge(this.state.sketch,t)})}.bind(this),d.getSketchPollInterval(t)).fail(function(){this.canceled&&this.running()&&o.ajax({type:"GET",url:"/cancel_sketch/"+l})}))}}.bind(this)),this.setState({sketch:a},function(){this.addTask(new u.MultiTask(r).always(function(){var e=(this.canceled?"page_task":"page_task.canceled")+".duration.ms";h.reportMetric(e,this.elapsed(),{operation:this.operation(),type:"SFrame"})}))}.bind(this))}.bind(this)))}.bind(this))},render:function(){var e=this.state.getColumns(this.props),t=this.props.ipython?{overflowX:"auto",maxHeight:600}:{height:"auto",width:c.contentWidth(),overflow:"auto"};return n.createElement("div",{style:t},n.createElement("table",{className:"canvas canvas-sframe-table"},n.createElement("thead",null,n.createElement("tr",null,e.map(function(e){return n.createElement("th",{key:e.name,className:"padding"},n.createElement(m.Column,{selectVariable:this.props.selectVariable,selected_variable:this.props.selected_variable,name:e.name,ipython:this.props.ipython}))}.bind(this)))),n.createElement("tbody",null,n.createElement("tr",null,e.map(function(e){return n.createElement("td",{key:e.name,className:"padding"},n.createElement(w,{sketch:d.tryGetProperty(this.state.sketch,e.name,{}),column:e,selected_variable:this.props.selected_variable}))}.bind(this))))))}}),k=n.createClass({displayName:"PlotAxisPicker",propTypes:{label:n.PropTypes.string.isRequired,options:n.PropTypes.array.isRequired,selected:n.PropTypes.string.isRequired,onSelect:n.PropTypes.func.isRequired,disabledOptions:n.PropTypes.array.isRequired},render:function(){return n.createElement("div",{style:{display:"inline-block",verticalAlign:"top",marginTop:15,marginLeft:30}},n.createElement("label",null,n.createElement("div",null,this.props.label),n.createElement("select",{style:{minWidth:100},onChange:this.props.onSelect,value:this.props.selected},this.props.options.map(function(e,t){var a=this.props.disabledOptions.indexOf(e)>=0;return n.createElement("option",{key:t,value:e,disabled:a},e)},this))))}}),T=n.createClass({displayName:"PlotCreator",propTypes:{selected_variable:n.PropTypes.object.isRequired,show:n.PropTypes.func.isRequired},plotTypes:[["Scatter Plot","scatter"],["Heat Map","heatmap"],["Bar Chart","bar"],["BoxWhisker Plot","boxwhisker"],["Line Chart","line"]],plotLabels:["Scatter Plot","Heat Map","Bar Chart","Box Whisker","Line Chart"],getInitialState:function(){return this.getAxesAndPlot(this.props)},getAxesAndPlot:function(e){var t=e.selected_variable.view_params,a=t.view,n=this.getColumnNames(e),s=this.getColumnNames(e),o={axis1:t.x,axis2:t.y};if(o.axis1||(o.axis1=d.tryGetProperty(n,0)),o.axis2||(o.axis2=d.tryGetProperty(s,0),o.axis2===o.axis1&&(o.axis2=d.tryGetProperty(s,1))),o.selectedPlotType=[null,null],null!==a){var l=i.find(this.plotTypes,function(e){{var t=r(e,2),n=t[0];t[1]}return n===a});l&&(o.selectedPlotType=l)}return null===o.selectedPlotType[0]&&(o.selectedPlotType=this.choosePlots(this.findColumnByName(o.axis1),this.findColumnByName(o.axis2))[0]),o},componentDidMount:function(){this.drawPlotType(this.state.selectedPlotType)},componentWillReceiveProps:function(e){var t=this.props.activeTab,a=e.activeTab;d.deepEquals(this.props,e)||t||!a||this.setState(this.getAxesAndPlot(e),this.callShow(this.state.selectedPlotType))},selectAxis:function(e,t){var a={};a[e]=t.target.value,this.setState(a,this.updatePlotTypeSelectionIfNecessary)},drawPlotType:function(e){this.setState({selectedPlotType:e},this.callShow(e))},getDisabledColumnNames:function(){return this.props.selected_variable.columns.filter(function(e){return-1===["int","float","str","datetime"].indexOf(e.dtype)}).map(function(e){return e.name})},choosePlots:function(e,t){var a=this,r=[{x:["int","float"],y:["int","float"]},{x:["int","float"],y:["int","float"]},{x:["int","str"],y:["int","float"]},{x:["int","str"],y:["int","float"]},{x:["datetime","int","float"],y:["int","float"]}];if(r.forEach(function(e,t){return e.type=a.plotTypes[t]}),!e||!t)return[[null,null]];var n=r.filter(function(a){return-1!==a.x.indexOf(e.dtype)&&-1!==a.y.indexOf(t.dtype)}).map(function(e){return e.type});return n.length?n:[[null,null]]},enabledPlots:function(){if(null===this.state.axis1||null===this.state.axis2)return[];var e=this.findColumnByName(this.state.axis1),t=this.findColumnByName(this.state.axis2);return e&&t?this.choosePlots(e,t):[]},updatePlotTypeSelectionIfNecessary:function(){var e=this,t=this.enabledPlots();0===t.length&&this.drawPlotType([null,null]),this.drawPlotType(i.find(t,function(t){return t[0]===e.state.selectedPlotType[0]})?this.state.selectedPlotType:t[0])},getColumnName:function(e){return e.name},getColumnNames:function(e){return e||(e=this.props),e.selected_variable.columns.map(this.getColumnName)},findColumnByName:function(e){var t=this;return i.find(this.props.selected_variable.columns,function(a){return t.getColumnName(a)===e})},callShow:function(e){var t=this;return function(){t.props.show.call(null,e,t.state.axis1,t.state.axis2,t.props.activeTab)}},render:function(){if(!this.state.axis1||!this.state.axis2)return n.createElement("div",{style:{height:86,borderBottom:"1px solid #c5c5c5"}},"SFrame does not contain two columns with supported data types for plotting. The other views of SFrame (Summary and Table) are available.");var e=this.enabledPlots(),t=function(t){return 0===e.length||void 0===i.find(e,function(e){return e[0]===t[0]})};return n.createElement("div",{style:{height:86,borderBottom:"1px solid #c5c5c5"}},n.createElement(k,{label:"X axis",options:this.getColumnNames(),disabledOptions:this.getDisabledColumnNames(),selected:this.state.axis1,onSelect:this.selectAxis.bind(this,"axis1"),style:{marginLeft:70,minWidth:120}}),n.createElement(k,{label:"Y axis",options:this.getColumnNames(),disabledOptions:this.getDisabledColumnNames(),selected:this.state.axis2,onSelect:this.selectAxis.bind(this,"axis2"),style:{marginLeft:70,minWidth:120}}),n.createElement("div",{style:{width:30,display:"inline-block"}}),this.plotTypes.map(function(e,a){var r=e[0]===this.state.selectedPlotType[0],s=t(e);return n.createElement("a",{key:a,style:{paddingLeft:3,paddingRight:12,paddingTop:3,paddingBottom:0,display:"inline-block",pointerEvents:s?"none":null,cursor:s?"default":null},onClick:this.drawPlotType.bind(this,e),href:"javascript:"},n.createElement("img",{src:"/images/sframe_plot_"+e[1]+".png",style:{marginBottom:4,border:r?"2px solid #ff5500":"2px solid transparent",width:66,height:50,filter:s?"grayscale(1)":null,WebkitFilter:s?"grayscale(1)":null}}),n.createElement("div",{style:{fontSize:12,textAlign:"center",color:s?"#aaa":r?"#ff5500":"#0a8cc4"}},this.plotLabels[a]))},this))}}),C=n.createClass({displayName:"PlotsView",propTypes:{selected_variable:n.PropTypes.object.isRequired,ipython:n.PropTypes.bool},getInitialState:function(){return this.calculateState(this.props)||{plotType:[null,null],col1:null,col2:null}},calculateState:function(e){var t={"Scatter Plot":"scatter","Heat Map":"heatmap","Bar Chart":"bar","BoxWhisker Plot":"boxwhisker","Line Chart":"line"},a=d.tryGetProperty(e.selected_variable.view_params,"view");return a?{plotType:[a,t[a]],col1:d.tryGetProperty(e.selected_variable.view_params,"x"),col2:d.tryGetProperty(e.selected_variable.view_params,"y")}:null},componentWillReceiveProps:function(e){if(!d.deepEquals(this.props.selected_variable.name,e.selected_variable.name)||!d.deepEquals(this.props.selected_variable.column_identifiers,e.selected_variable.column_identifiers)||!d.deepEquals(this.props.selected_variable.view_params,e.selected_variable.view_params)||this.props.activeTab!==e.activeTab){var t=this.calculateState(e);t&&this.show(t.plotType,t.col1,t.col2,e.activeTab)}},show:function(e,t,a,r){return r?null===e[0]||null===e[1]?void this.setState({plotType:e}):void((this.state.col1!==t||this.state.col2!==a||this.state.plotType[0]!==e[0])&&o.ajax({type:"POST",url:"/plot_params",data:{view:e[0],col1:t,col2:a,col3:null},success:function(){this.setState({plotType:e,col1:t,col2:a})}.bind(this)})):void 0},render:function(){var e=this.state.col1&&this.state.col2?n.createElement("div",{style:{paddingTop:20,paddingLeft:"20"}},"X Axis data type must be either numerical (int or float) or categorical (string).",n.createElement("br",null),"Y Axis data type must be numerical (int or float).",n.createElement("br",null),"Reselect the plot axes accordingly.",n.createElement("br",null)):null,t=this.state.plotType?this.state.plotType[0]:null;null!==t&&(e={"Bar Chart":b.View,"BoxWhisker Plot":g.View,"Line Chart":f["Line Chart"],"Scatter Plot":f["Scatter Plot"],"Heat Map":y.View}[t],e&&(e=n.createElement(e,this.props)));var a=this.props.ipython?void 0:n.createElement(T,{show:this.show,activeTab:this.props.activeTab,selected_variable:this.props.selected_variable});return n.createElement("div",null,a,e)}}),N={Summary:S,Table:m.TabularView,Plots:C},P=Object.keys(N).map(function(e){var t=N[e];return[e,n.createClass({render:function(){return n.createElement("div",null,n.createElement(t,this.props))}})]});N.View=n.createClass({mixins:[p.Modal],shouldComponentUpdate:function(e,t){var a=!d.deepEquals(this.props,e)||!d.deepEquals(this.state,t);return a},render:function(){var e=p.Tabs;return n.createElement("div",null,n.createElement(e,{selectVariable:this.props.selectVariable,selected_variable:d.merge(this.props.selected_variable,{columns:this.props.selected_variable.columns}),tabs:P,initialTab:this.props.selected_variable.view_component}),this.getModal())}}),t.exports=N},{"../common_controls":2,"../common_util":3,"../logging":15,"../page_layout":30,"../plot_components/bar":31,"../plot_components/boxwhisker":32,"../plot_components/heatmap":33,"../plot_components/scatter":35,"../plots":36,"../table":52,"../taskqueue":53,bowser:"bowser",d3:"d3",lodash:"lodash","react/addons":"react/addons","zepto-browserify":"zepto-browserify"}],8:[function(e,t,a){"use strict";var r=e("react/addons"),n=e("d3"),s=e("../plots"),i=e("../common_util"),o=e("../taskqueue"),l=e("../common_controls"),c=e("../logging");t.exports={View:r.createClass({displayName:"View",mixins:[l.AsyncState,l.SizeToWindow],getInitialState:function(e){return e||(e=this.props),e.ipython?{vertices:i.tryGetProperty(e,"vertices",[]),vertices_labels:i.tryGetProperty(e,"vertices_labels",[]),edges:i.tryGetProperty(e,"edges",[]),edges_labels:i.tryGetProperty(e,"edges_labels",[]),layoutAlgorithm:"forceDirected",positions:i.tryGetProperty(e,"positions",[]),error_type:i.tryGetProperty(e,"error_type",0),error_msg:i.tryGetProperty(e,"error_msg",[])}:{vertices:[],vertices_labels:[],edges:[],edges_labels:[],layoutAlgorithm:"forceDirected",positions:null,error_type:0,error_msg:""}},customLayout:function(e,t){return{vertices:e.map(function(e,t){return i.merge(e,{x:this.state.positions.x[t],y:this.state.positions.y[t]})}.bind(this)),edges:t.map(function(e){return i.merge(e,{points:[[this.state.positions.x[e.source],this.state.positions.y[e.source]],[this.state.positions.x[e.target],this.state.positions.y[e.target]]]})}.bind(this))}},setLayoutAlgorithm:function(e){var t=e.target.value;this.setState({layoutAlgorithm:t})},getLayoutAlgorithm:function(){return this.state.layoutAlgorithm in s.GraphLayout.layoutAlgorithms?s.GraphLayout.layoutAlgorithms[this.state.layoutAlgorithm]:this.customLayout},shouldComponentUpdate:function(e,t){return!i.deepEquals(this.props,e)||!i.deepEquals(this.state,t)},updateAsyncState:function(e){var t=[];["vertices","edges"].forEach(function(e){t.push(new o.SingleTask("/"+e,"get_"+e+"()").done(function(e,t){var a={};a[e]=t.values,null!==t.labels&&(a[e+"_labels"]=t.labels),"vertices"===e&&(a.positions=t.positions,null!==t.positions&&(a.layoutAlgorithm=JSON.stringify(t.positions.names))),this.setState(a)}.bind(this,e)).fail(function(e,t,a){"undefined"!=typeof e&&413===e.status&&this.setState({error_type:413,error_msg:a})}.bind(this)))}.bind(this)),this.addTask(new o.MultiTask(t).always(function(){var e=(this.canceled?"page_task":"page_task.canceled")+".duration.ms";c.reportMetric(e,this.elapsed(),{operation:this.operation(),type:"SGraph"})}))},getColor:function(e){return n.rgb(255*e[0],255*e[1],255*e[2]).toString()},scaleNodeSize:function(){return this.props.selected_variable.view_params.node_size/37.5},render:function(){if(0===this.state.vertices.length)return 0!==this.state.error_type?r.createElement("div",{className:"alert alert-info"},this.state.error_msg):r.createElement("div",null);var e=function(){var e={};for(var t in this.props.selected_variable.view_params.highlight)e[t]=this.getColor(this.props.selected_variable.view_params.highlight[t]);return e}.bind(this),t=function(e){var t=this.props.selected_variable.view_params[e];return this.getColor(t)}.bind(this),a=i.merge({vertices:this.state.vertices,edges:this.state.edges,vlabels:null!==this.state.vertices_labels?this.state.vertices_labels:[],vcolor:t("vcolor"),highlight:e(),node_size:this.scaleNodeSize(),elabels:null!==this.state.edges_labels?this.state.edges_labels:[],ecolor:t("ecolor"),layoutAlgorithm:this.getLayoutAlgorithm()},i.partial(this.props.selected_variable.view_params,["vlabel_hover","elabel_hover","ewidth","v_offset","h_offset","arrows"])),n=null===this.state.positions?"forceDirected":JSON.stringify(this.state.positions.names);return r.createElement("div",{className:"tab-content",style:{maxWidth:this.state.windowWidth-240,maxHeight:this.props.ipython?"none":this.state.windowHeight-124,overflow:"auto"}},r.createElement("div",{className:"canvas canvas-view-main sgraph"},r.createElement("div",{className:"canvas-singlecolumn-plot"},null===this.state.positions?null:r.createElement("div",null,r.createElement("label",{htmlFor:"canvas-sgraph-layout-selector"},"Layout algorithm: "),r.createElement("select",{defaultValue:n,onChange:this.setLayoutAlgorithm},r.createElement("option",{value:"forceDirected"},"Force-directed"),r.createElement("option",{value:JSON.stringify(this.state.positions.names)},JSON.stringify(this.state.positions.names)))),r.createElement(s.GraphLayout,a))))}})}},{"../common_controls":2,"../common_util":3,"../logging":15,"../plots":36,"../taskqueue":53,d3:"d3","react/addons":"react/addons"}],9:[function(e,t,a){"use strict";t.exports={YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],
9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}}},{}],10:[function(e,t,a){"use strict";function r(e){return e.series&&e.series.length&&e.series[0].data&&e.series[0].data.length?!0:!1}var n=e("react/addons"),s=e("dato-echarts"),i=e("./theme");t.exports={createChart:function(){if(this.chart=s.init(n.findDOMNode(this),i.theme),this.hideChart(),this.chart.setOption(i.defaultOptions),r(this.makeChartOptions(this.props))){var e=!0;this.updateChart(this.props,e)}},hideChart:function(){this.chart.showLoading()},showChart:function(){this.chart.hideLoading()},updateChart:function(e,t){if(!e)return null;var a=this.makeChartOptions(e);this.chart.setOption(a),this.showChart()},componentDidMount:function(){this.createChart()},componentWillUnmount:function(){this.chart.dispose()},shouldComponentUpdate:function(e,t){return!1},componentWillReceiveProps:function(e){var t=!1;this.updateChart(e,t)},render:function(){return n.createElement("div",{style:{height:this.props.height,width:this.props.width}})}}},{"./theme":12,"dato-echarts":"dato-echarts","react/addons":"react/addons"}],11:[function(e,t,a){"use strict";function r(e,t){return Math.min(Math.max(Math.ceil(e/t*100),1),100)}function n(e){return e===parseInt(e,10)}function s(e){return e.every(n)}function i(e){return s(e)&&e[1]>1e3&&e[1]<=9999}function o(e){return e.every(n)&&[0,1].indexOf(e[0])>=0&&[11,12].indexOf(e[1])>=0}function l(e){return e.every(n)&&[0,1].indexOf(e[0])>=0&&[28,30,31,364,365].indexOf(e[1])>=0}function c(e){try{return i(e)||o(e)||l(e)}catch(t){}return!1}function d(e){return e.constructor===Date}function u(e){var t=E(function(e){return g.extent(e.data,function(e){return e[0]})})(e),a=E(function(e){return g.extent(e.data,function(e){return e[1]})})(e);return[t,a]}function p(e,t,a,r){var n={};try{var s=e[0],i=e[1];return isNaN(s)||isNaN(i)?{}:(r=r||2,void 0===a?(a=Math.abs(s)>r*(i-s)?!0:!1,n[t]=[{scale:a,boundaryGap:[.01,.01]}],n):(n[t]=[{scale:a,boundaryGap:[.01,.01]}],n))}catch(o){console.log(o)}return n[t]=[{scale:!1,boundaryGap:[.01,.01]}],n}function h(e,t){var a=u(e),r=b(a,2),n=r[0],s=r[1],i={};return i=y.merge(i,p(n,"xAxis",t,3)),i=y.merge(i,p(s,"yAxis",t,3))}function m(e){try{var t=u(e),a=b(t,2),r=a[0],n=a[1];return{xAxis:[{min:r[0],max:r[1]}],yAxis:[{min:n[0],max:n[1]}]}}catch(s){console.log(s)}return{}}function f(e){var t={};try{var a=u(e),r=b(a,2),n=r[0],s=r[1];if(n.includes(0/0)||s.includes(0/0))return;var o=(m(e),e.map(function(e){return e.data[0][0]}).every(d)),l=e.map(function(e){return e.data[0][1]}).every(d);o?t=y.merge(t,{xAxis:[{type:"time"}],dataZoom:{show:!0},toolbox:{feature:{restore:{show:!0},dataZoom:{show:!1}}}}):i(n)&&(t=y.merge(t,{xAxis:[{scale:!0,splitNumber:10,axisLabel:{formatter:v}}],dataZoom:{show:!0},toolbox:{feature:{restore:{show:!0},dataZoom:{show:!1}}}})),l?t=y.merge(t,{yAxis:[{type:"time"}]}):i(s)&&(t=y.merge(t,{yAxis:[{scale:!0,splitNumber:10,axisLabel:{formatter:v}}]}))}catch(c){console.log(c)}return t}var b=function(){function e(e,t){var a=[],r=!0,n=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(l){n=!0,s=l}finally{try{!r&&o["return"]&&o["return"]()}finally{if(n)throw s}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=e("d3"),y=e("lodash"),v=function(e){return e.toString()},w=new Date,E=(w.getFullYear(),function(e){return function(t){return t.reduce(function(t,a){var r=e(a);return[Math.min(t[0],r[0]),Math.max(t[1],r[1])]},[1/0,-(1/0)])}});t.exports={isArrayIntegers:s,isExtentDateish:c,isDateObject:d,tightExtentsOptions:m,looseExtentsOptions:h,timeOptions:f,calculateZoomEnd:r}},{d3:"d3",lodash:"lodash"}],12:[function(e,t,a){"use strict";t.exports={defaultOptions:{toolbox:{show:!0,showTitle:!0,feature:{mark:{show:!1,title:{mark:"Mark Tool",markUndo:"Undo Last Mark",markClear:"Clear Marks"}},dataZoom:{show:!1,title:{dataZoom:"Range Zoom",dataZoomReset:"Undo Zoom"}},dataView:{show:!1,title:"Data View",lang:["Data View","Close","Refresh"]},magicType:{show:!1,title:{line:"Line Chart",bar:"Column Chart",stack:"Stacked",tiled:"Grouped",force:"Force Directed",chord:"Chord",pie:"Pie Chart",funnel:"Funnel"}},restore:{show:!1,title:"Restore"},saveAsImage:{show:!0,title:"Save as Image",lang:["Click to Save"]}}}},theme:{color:["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"],title:{textStyle:{fontWeight:"normal",color:"#008acd"}},dataRange:{itemWidth:15,color:["#5ab1ef","#e0ffff"]},toolbox:{color:["#1e90ff","#1e90ff","#1e90ff","#1e90ff"],effectiveColor:"#ff4500"},tooltip:{backgroundColor:"rgba(50,50,50,0.5)",axisPointer:{type:"line",lineStyle:{color:"#008acd"},crossStyle:{color:"#008acd"},shadowStyle:{color:"rgba(200,200,200,0.2)"}}},dataZoom:{dataBackgroundColor:"#efefff",fillerColor:"rgba(182,162,222,0.2)",handleColor:"#008acd"},grid:{borderColor:"#eee",x:80,y:60,x2:120,y2:60},categoryAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitLine:{lineStyle:{color:["#eee"]}}},valueAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(200,200,200,0.1)"]}},splitLine:{lineStyle:{color:["#eee"]}}},polar:{axisLine:{lineStyle:{color:"#ddd"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(200,200,200,0.2)"]}},splitLine:{lineStyle:{color:"#ddd"}}},timeline:{lineStyle:{color:"#008acd"},controlStyle:{normal:{color:"#008acd"},emphasis:{color:"#008acd"}},symbol:"emptyCircle",symbolSize:3},bar:{itemStyle:{normal:{barBorderRadius:5},emphasis:{barBorderRadius:5}}},line:{smooth:!0,symbol:"emptyCircle",symbolSize:3},boxwhisker:{itemStyle:{normal:{color:"#8d98b3",colorMedian:"#d87a80",lineStyle:{color:"#8d98b3",colorMedian:"#d87a80"}}}},k:{itemStyle:{normal:{color:"#d87a80",color0:"#2ec7c9",lineStyle:{color:"#d87a80",color0:"#2ec7c9"}}}},scatter:{symbol:"circle",symbolSize:4},radar:{symbol:"emptyCircle",symbolSize:3},map:{itemStyle:{normal:{areaStyle:{color:"#ddd"},label:{textStyle:{color:"#d87a80"}}},emphasis:{areaStyle:{color:"#fe994e"}}}},force:{itemStyle:{normal:{linkStyle:{color:"#1e90ff"}}}},chord:{itemStyle:{normal:{borderWidth:1,borderColor:"rgba(128, 128, 128, 0.5)",chordStyle:{lineStyle:{color:"rgba(128, 128, 128, 0.5)"}}},emphasis:{borderWidth:1,borderColor:"rgba(128, 128, 128, 0.5)",chordStyle:{lineStyle:{color:"rgba(128, 128, 128, 0.5)"}}}}},gauge:{axisLine:{lineStyle:{color:[[.2,"#2ec7c9"],[.8,"#5ab1ef"],[1,"#d87a80"]],width:10}},axisTick:{splitNumber:10,length:15,lineStyle:{color:"auto"}},splitLine:{length:22,lineStyle:{color:"auto"}},pointer:{width:5}},textStyle:{fontFamily:"Helvetica Neue‘, Arial, Verdana, sans-serif"},animation:!1,addDataAnimation:!1,animationThreshold:250,loadingEffect:"spin",loadingText:"Loading data...",noDataEffect:"spin",noDataText:"Waiting for data"}}},{}],13:[function(e,t,a){"use strict";var r=e("react/addons"),n=(e("d3"),e("highlight.js")),s=e("../page_layout"),i=(e("../plots"),e("../common_util")),o=e("../taskqueue"),l=e("../common_controls"),c=(e("../logging"),r.createClass({displayName:"LogView",mixins:[l.AsyncState,l.SizeToWindow],getInitialState:function(){return{log_file_list:[],updating:!1}},updateAsyncState:function(){this.get_log_file_list(),this.setState({updating:!0})},get_log_file_list:function(){this.addTask(new o.SingleTask("/log_file_path_list").done(function(e){var t=i.tryGetProperty(e,"log_file_list",[]);this.setState({log_file_list:t,updating:!1})}.bind(this)))},get_log_file_query:function(e){return"/get_log_file_content?log="+e},render:function(){var e=s.contentWidth()-10,t=800,a=e>t?e:t,n=this.state.log_file_list,i=this.state.updating?r.createElement("div",{key:"spin",style:{padding:"5px"}},r.createElement("i",{className:"fa fa-spinner fa-spin fa-lg"})):r.createElement("div",null);return r.createElement("div",{className:"canvas-job-info-container",style:{width:a}},r.createElement("div",{className:"canvas-job-log-container"},i,n.map(function(e,t){var a=this.get_log_file_query(e);return r.createElement("div",{key:"log_list_"+t},r.createElement("a",{href:a,target:"_blank",key:"a_"+t},e))},this)))}})),d=r.createClass({displayName:"JobInfoList",mixins:[l.SizeToWindow],render:function(){var e=s.contentWidth()-10,t=800,a=e>t?e:t;return r.createElement("div",{className:"canvas-job-info-container",style:{width:a}},r.createElement("table",{className:"canvas-job-info-table"},r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:"canvas-job-info-label"},"Name")),r.createElement("td",null,this.props.jobname)),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:"canvas-job-info-label"},"Type")),r.createElement("td",null,this.props.jobtype)),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:"canvas-job-info-label"},"Environment")),r.createElement("td",null,this.props.env.name)),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:"canvas-job-info-label"},"Environment Type")),r.createElement("td",null,this.props.env.type)),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:"canvas-job-info-label"},"Start Time")),r.createElement("td",null,this.props.starttime)),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:"canvas-job-info-label"},"Duration")),r.createElement("td",null,this.props.duration))))}}),u=r.createClass({displayName:"TaskStatusList",mixins:[l.AsyncState,l.SizeToWindow],getInitialState:function(){return{task_status:{},completed:!1,timeoutId:null}},getStatusFA:function(e){var t=[],a={color:i.getColorFromStatus(e,!1)};return t.push("Completed"==e?r.createElement("i",{key:"infoFA",style:a,className:"fa fa-check fa-lg"}):"Failed"==e?r.createElement("i",{key:"infoFA",style:a,className:"fa fa-times fa-lg"}):"Running"==e?r.createElement("i",{key:"infoFA",style:a,className:"fa fa-gear fa-spin fa-lg"}):"Canceled"==e?r.createElement("i",{key:"infoFA",style:a,className:"fa fa-ban fa-lg"}):r.createElement("i",{key:"infoFA",style:a,className:"fa fa-gear fa-lg"})),t},getDurationSeconds:function(e){if(1>e)return Math.floor(1e3*e).toString().concat(" ms");var t=e;if(60>=t){var a=Math.round(100*t)/100;return a.toString().concat(" sec")}if(t>60&&3600>=t){var r=Math.floor(t/60),n=t%60,a=Math.round(100*n)/100;return r.toString()+"m "+a.toString()+" sec"}if(t>3600){var s=Math.floor(t/3600),i=t%3600,r=Math.floor(i/60),n=i%60,a=Math.round(100*n)/100;return s.toString()+"h "+r.toString()+"m "+a.toString()+" sec"}},updateAsyncState:function(){this.addTask(new o.SingleTask("/get_task_status","get task status").done(function(e){var t=i.tryGetProperty(e,"task_status",[]);this.setState({task_status:t}),"Pending"==this.props.status||"Running"==this.props.status?this.setState({timeoutId:setTimeout(this.updateAsyncState,3e4)}):clearTimeout(this.state.timeoutId)}.bind(this)))},componentWillUnmount:function(){this.state.timeoutId&&clearTimeout(this.state.timeoutId)},render:function(){var e=this.state.task_status,t=s.contentWidth()-10,a=800,n=t>a?t:a,i=this.props.tasks;return r.createElement("div",{className:"canvas-job-info-container",style:{width:n}},r.createElement("table",{className:"canvas-task-status-table"},r.createElement("tr",null,r.createElement("th",null,"Status"),r.createElement("th",null,"Parameters"),r.createElement("th",null,"Duration")),i.map(function(t,a){var n="Pending",s="-------",i=t.name;if(e.hasOwnProperty(i)){n=e[i].status;var o=e[i].run_time;o&&(s=this.getDurationSeconds(parseFloat(o)))}else"Running"!=this.props.status&&"Pending"!=this.props.status&&(n=this.props.status);var l=this.getStatusFA(n);return r.createElement("tr",{key:a+"_task_row"},r.createElement("td",{key:a+"_task_status"},r.createElement("div",{style:{"float":"left",width:"25px"}},l),r.createElement("div",{style:{"float":"left"}},n),r.createElement("div",{style:{clear:"both"}})),r.createElement("td",{key:a+"_task_inputs"},r.createElement("div",{style:{whiteSpace:"pre-wrap",paddingTop:"12px",paddingBottom:"12px"}},t.inputs)),r.createElement("td",{key:a+"_task_time"},s))},this)))}}),p=r.createClass({displayName:"CodeView",mixins:[l.SizeToWindow],componentDidMount:function(){var e=r.findDOMNode(this);n.highlightBlock(e)},shouldComponentUpdate:function(){return!1},render:function(){var e=s.contentWidth()-10,t=800,a=e>t?e:t,n=this.props.codestr;return r.createElement("div",{className:"canvas-job-info-container",style:{width:a,paddingTop:"0px"}},r.createElement("div",{className:"canvas-job-log-container"},r.createElement("pre",null,r.createElement("code",{className:"python"},n))))}}),h=r.createClass({displayName:"HeaderBar",mixins:[l.SizeToWindow],render:function(){var e=this.props.stat,t=({color:i.getColorFromStatus(e,!1)},s.contentWidth()-10),a=800,n=t>a?t:a,o="fa "+(this.props.view?"fa-angle-double-down":"fa-angle-double-up")+" fa-lg";return r.createElement("div",{className:"canvas-job-task-header",style:{width:n}},r.createElement("div",{className:"canvas-job-timeline-header"},r.createElement("div",{className:"canvas-job-timeline-title pointer no-select",onClick:this.props.callback.bind(null,this.props.label)},r.createElement("i",{className:o}),"  ",this.props.name),r.createElement("div",{style:{clear:"both"}})))}}),m=r.createClass({displayName:"JobHeaderBar",mixins:[l.SizeToWindow],getStatusFA:function(e){var t=[],a={color:i.getColorFromStatus(e,!1)};return t.push("Completed"==e?r.createElement("i",{key:"infoFA",style:a,className:"fa fa-check fa-lg"}):"Failed"==e?r.createElement("i",{key:"infoFA",style:a,className:"fa fa-times fa-lg"}):"Running"==e?r.createElement("i",{key:"infoFA",style:a,className:"fa fa-gear fa-spin fa-lg"}):"Canceled"==e?r.createElement("i",{key:"infoFA",style:a,className:"fa fa-ban fa-lg"}):r.createElement("i",{key:"infoFA",style:a,className:"fa fa-gear fa-lg"})),t},render:function(){var e=this.props.stat,t={color:i.getColorFromStatus(e,!1)},a=s.contentWidth()-10,n=800,o=a>n?a:n;return r.createElement("div",{className:"canvas-job-task-header",style:{width:o}},r.createElement("div",{className:"canvas-job-timeline-header"},r.createElement("div",{className:"canvas-job-timeline-title"},r.createElement("i",{className:"fa fa-file-text-o fa-lg"}),"  Job Info"),r.createElement("div",{className:"canvas-job-timeline-status"},"STATUS: ",r.createElement("span",{style:t},e)," ",this.getStatusFA(e)),r.createElement("div",{style:{clear:"both"}})))}});t.exports={View:r.createClass({displayName:"View",mixins:[l.AsyncState,l.SizeToWindow],getInitialState:function(){return{jobInfo:null,status:!0,log:!0,code:!0,statusTimeoutId:null}},handleChangeView:function(e){if(this.state.hasOwnProperty(e)){var t={};t[e]=!this.state[e],this.setState(t)}},getDurationMS:function(e,t){if("Completed"!=t)return"N/A";if(1e3>e)return e.toString().concat(" ms");var a=e/1e3;if(60>=a){var r=Math.round(100*a)/100;return r.toString().concat(" sec")}if(a>60&&3600>=a){var n=Math.floor(a/60),s=a%60,r=Math.round(100*s)/100;return n.toString()+"m "+r.toString()+" sec"}if(a>3600){var i=Math.floor(a/3600),o=a%3600,n=Math.floor(o/60),s=o%60,r=Math.round(100*s)/100;return i.toString()+"h "+n.toString()+"m "+r.toString()+" sec"}},updateAsyncState:function(e){this.addTask(new o.SingleTask("/load_job_info","get job info").done(function(e){var t={};t.jobname=i.tryGetProperty(e,"jobname",[""]),t.packages=i.tryGetProperty(e,"packages",[]),t.code=i.tryGetProperty(e,"code",""),t.tasks=i.tryGetProperty(e,"tasks",[]),t.env=i.tryGetProperty(e,"env",{}),t.status=i.tryGetProperty(e,"status",""),t.jobtype=i.tryGetProperty(e,"jobtype","job"),t.starttime=i.tryGetProperty(e,"starttime",""),t.endtime=i.tryGetProperty(e,"endtime",""),t.has_results=i.tryGetProperty(e,"has_results",!1),t.dns=i.tryGetProperty(e,"dns",""),this.setState({
jobInfo:t,statusTimeoutId:setTimeout(this.updateJobStatus,2e4)})}.bind(this)))},updateJobStatus:function(){this.addTask(new o.SingleTask("/load_job_info","get job info").done(function(e){var t=i.tryGetProperty(e,"status","");if("Running"===t||"Pending"===t){var a=i.tryGetProperty(e,"jobtype",""),r=15e3;"HadoopJob"===a&&(r=3e5),this.setState({statusTimeoutId:setTimeout(this.updateJobStatus,r)})}else this.state.statusTimeoutId&&clearTimeout(this.state.statusTimeoutId);var n=this.state.jobInfo;n&&(n.status=t,n.endtime=i.tryGetProperty(e,"endtime",""),this.setState({jobInfo:n}))}.bind(this)))},componentWillUnmount:function(){this.state.statusTimeoutId&&clearTimeout(this.state.statusTimeoutId)},render:function(){var e=this.state.jobInfo;if(null===e)return r.createElement("div",null);var t=e.jobname[0],a=e.tasks,n=e.env,s=e.status,i=e.code,o=e.starttime,l=e.endtime,f=e.jobtype,b=(e.has_results,e.dns),g="";if("Completed"==s&&l&&o){var y=Date.parse(l)-Date.parse(o);g=this.getDurationMS(y,s),o=o.replace("T"," ")}else"Failed"==this.props.jobstatus&&(g="N/A");return r.createElement("div",{className:"tab-content",style:{overflow:"auto",color:"#000",backgroundColor:"#eee"}},r.createElement("div",{className:"canvas canvas-view-main",style:{backgroundColor:"#eee"}},r.createElement(m,{stat:s}),r.createElement(d,{jobname:t,jobtype:f,env:n,starttime:o,duration:g}),r.createElement(h,{name:"Status",view:this.state.status,label:"status",callback:this.handleChangeView}),this.state.status?r.createElement(u,{status:s,tasks:a}):r.createElement("div",null),r.createElement(h,{name:"Logs",view:this.state.log,label:"log",callback:this.handleChangeView}),this.state.log?r.createElement(c,{dns:b,jobtype:f,jobname:t,status:s}):r.createElement("div",null),r.createElement(h,{name:"Code",view:this.state.code,label:"code",callback:this.handleChangeView}),this.state.code?r.createElement(p,{codestr:i}):r.createElement("div",null)))}})}},{"../common_controls":2,"../common_util":3,"../logging":15,"../page_layout":30,"../plots":36,"../taskqueue":53,d3:"d3","highlight.js":"highlight.js","react/addons":"react/addons"}],14:[function(e,t,a){"use strict";function r(e,t){if(null==e.starttime&&null==t.starttime)return 0;if(null==t.starttime)return-1;if(null==e.starttime)return 1;var a=Date.parse(e.starttime),r=Date.parse(t.starttime);return r>a?1:a>r?-1:0}function n(e,t){var a=e.name.toLowerCase(),r=t.name.toLowerCase();return a.localeCompare(r)}function s(e,t){var a=e.type,r=t.type;return a.localeCompare(r)}function i(e,t){var a=e.status,r=t.status;return a.localeCompare(r)}function o(e,t){if(null==e.starttime&&null==t.starttime)return 0;if(null==t.starttime)return-1;if(null==e.starttime)return 1;if(null==t.endtime&&null==t.endtime)return 0;if(null==t.endtime)return-1;if(null==e.endtime)return 1;var a=e.starttime.split(".")[0],r=e.endtime.split(".")[0],n=Date.parse(r)-Date.parse(a),s=t.starttime.split(".")[0],i=t.endtime.split(".")[0],o=Date.parse(i)-Date.parse(s);return o>n?1:n>o?-1:0}var l=e("react/addons"),c=(e("d3"),e("../plots"),e("../common_util")),d=e("../taskqueue"),u=e("../common_controls"),p=e("../logging"),h=l.createClass({displayName:"TableColumn",handleClick:function(e){var t=this.props.selected_variable.name.concat([this.props.job.filename]);this.props.selectVariable(t)},getDuration:function(e){var t=e/1e3;if(60>=t){var a=Math.round(100*t)/100;return a.toString().concat(" sec")}if(t>60&&3600>=t){var r=Math.floor(t/60),n=t%60,a=Math.round(n);return r.toString()+"m "+a.toString()+" sec"}if(t>3600){var s=Math.floor(t/3600),i=t%3600,r=Math.floor(i/60),n=i%60,a=Math.round(n);return s.toString()+"h "+r.toString()+"m "+a.toString()+" sec"}},getStatusFA:function(e){var t={color:c.getColorFromStatus(e,!1)},a=[],r=this.props.key;return"Completed"==e?(t={color:"#0a8cc4"},a.push(l.createElement("i",{key:r+"_fa",style:t,className:"fa fa-check fa-lg"}))):"Failed"==e?(t={color:"#B80000"},a.push(l.createElement("i",{key:r+"_fa",style:t,className:"fa fa-times fa-lg"}))):a.push("Running"==e?l.createElement("i",{key:r+"_fa",style:t,className:"fa fa-gear fa-spin fa-lg"}):"Canceled"==e?l.createElement("i",{key:r+"_fa",style:t,className:"fa fa-ban fa-lg"}):l.createElement("i",{key:r+"_fa",style:t,className:"fa fa-gear fa-lg"})),a},render:function(){var e=this.props.key,t=this.props.job,a="------------------",r="------------------",n="------------------";t.starttime&&(n=t.starttime.split(".")[0]),"Completed"==t.status&&t.endtime&&t.starttime&&(a=this.getDuration(Date.parse(t.endtime)-Date.parse(t.starttime)),r=t.endtime.split(".")[0]);var s=function(){return l.createElement("a",{href:"javascript:",key:e+"_name",onClick:this.handleClick,className:"canvas-link"},this.props.job.name)}.bind(this);return l.createElement("tr",{key:e+"_row"},l.createElement("td",{key:e+"_status"},l.createElement("div",{style:{"float":"left",width:"25px"}},this.getStatusFA(t.status)),l.createElement("div",{style:{"float":"left"}},t.status)),l.createElement("td",null,s()),l.createElement("td",null,t.type),l.createElement("td",null,n),l.createElement("td",null,a))}}),m=l.createClass({displayName:"AllJobsTable",mixins:[u.AsyncState],getInitialState:function(){return{sortJobs:"time",orderJobs:!0,jobs:[]}},doSort:function(e,t){return"status"===t?e=e.sort(i):"name"===t?e=e.sort(n):"type"===t?e=e.sort(s):"time"===t?e=e.sort(r):"duration"===t&&(e=e.sort(o)),e},handleSort:function(e){if(e==this.state.sortJobs)this.setState({orderJobs:!this.state.orderJobs,jobs:this.state.jobs.reverse()});else{var t=this.state.jobs;t=this.doSort(t,e),this.setState({sortJobs:e,orderJobs:!0,jobs:t})}},updateAsyncState:function(e){var t=e.list,a=[];t.forEach(function(e,t){a.push(new d.SingleTask("/load_job/"+encodeURIComponent(e),"load job").done(function(e){var t=e.job;if(null!=t){var a=this.state.jobs.concat(t);this.setState({jobs:a})}}.bind(this)))}.bind(this)),this.addTask(new d.MultiTask(a).always(function(){var e=(this.canceled?"page_task":"page_task.canceled")+".duration.ms";p.reportMetric(e,this.elapsed(),{operation:this.operation(),type:"JobSession"})}))},render:function(){var e="fa fa-sort pointer",t="fa fa-sort-alpha-asc pointer",a="fa fa-sort-alpha-asc pointer",r="fa fa-sort-numeric-desc pointer",n="fa fa-sort-amount-desc pointer",s=this.state.jobs;if(!this.state.orderJobs)if("status"===this.state.sortJobs)var e="fa fa-sort pointer";else if("name"===this.state.sortJobs)var t="fa fa-sort-alpha-desc pointer";else if("type"===this.state.sortJobs)var a="fa fa-sort-alpha-desc pointer";else if("time"===this.state.sortJobs)var r="fa fa-sort-numeric-asc pointer";else if("duration"===this.state.sortJobs)var n="fa fa-sort-amount-asc pointer";return l.createElement("div",{className:"canvas-job-container"},l.createElement("table",{className:"canvas-job-list"},l.createElement("tbody",null,l.createElement("tr",{className:"no-select"},l.createElement("th",null,"Status ",l.createElement("i",{className:e,onClick:this.handleSort.bind(this,"status")})," "),l.createElement("th",null,"Job Name ",l.createElement("i",{className:t,onClick:this.handleSort.bind(this,"name")})," "),l.createElement("th",null,"Job Type ",l.createElement("i",{className:a,onClick:this.handleSort.bind(this,"type")})," "),l.createElement("th",null,"Creation Date ",l.createElement("i",{className:r,onClick:this.handleSort.bind(this,"time")})," "),l.createElement("th",null,"Duration ",l.createElement("i",{className:n,onClick:this.handleSort.bind(this,"duration")})," ")),s.map(function(e,t){return l.createElement(h,{job:e,selectVariable:this.props.selectVariable,selected_variable:this.props.selected_variable,key:t})}.bind(this)))))}});t.exports={View:l.createClass({displayName:"View",mixins:[u.AsyncState],getInitialState:function(){return{ses:"",jobs:[]}},updateAsyncState:function(e){var t=[];t.push(new d.SingleTask("/list_jobs","get jobs").done(function(e){var t=c.tryGetProperty(e,"jobs",[]);this.setState({jobs:t.reverse()})}.bind(this))),d.add(new d.MultiTask(t).always(function(){var e=(this.canceled?"page_task":"page_task.canceled")+".duration.ms";p.reportMetric(e,this.elapsed(),{operation:this.operation(),type:"JobSession"})}))},render:function(){var e=(c.tryGetProperty(this.props.selected_variable,"sessionname","test"),this.state.jobs);return l.createElement("div",{className:"tab-content",style:{overflow:"auto",color:"#000",backgroundColor:"#eee"}},l.createElement("div",{className:"canvas canvas-view-main",style:{backgroundColor:"#eee"}},l.createElement(m,{list:e,selectVariable:this.props.selectVariable,selected_variable:this.props.selected_variable})))}})}},{"../common_controls":2,"../common_util":3,"../logging":15,"../plots":36,"../taskqueue":53,d3:"d3","react/addons":"react/addons"}],15:[function(e,t,a){"use strict";function r(e){o.push(Date.now()),o.push(e)}function n(e,t,a){i.assert("string"==typeof e);var r={metric:e};null!=t&&(i.assert("number"==typeof t),r.value=String(t)),null!=a&&(r.properties=JSON.stringify(a)),s.ajax({type:"POST",url:"/metrics",data:r})}var s=e("zepto-browserify").$,i=e("./common_util"),o=[];t.exports={log:r,get:function(){return o.slice()},reportMetric:n}},{"./common_util":3,"zepto-browserify":"zepto-browserify"}],16:[function(e,t,a){"use strict";{var r=function(){function e(e,t){var a=[],r=!0,n=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(l){n=!0,s=l}finally{try{!r&&o["return"]&&o["return"]()}finally{if(n)throw s}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=e("react/addons"),s=e("lodash"),i=(e("../../common_util"),e("./multiclass_comparison")),o=e("../model_metrics"),l=e("../model_utilities"),c=l.confusionMatrixKey,d=l.rocMetricsKey,u=l.viewTitleElement;l.sectionTitleElement}t.exports=n.createClass({displayName:"exports",renderComparisonView:function(e){var t=s.pairs(e).map(function(e){var t=r(e,2),a=t[0],n=t[1][d];return{name:a,data:n}}).filter(function(e){var t=(e.name,e.data);return void 0!==t});return t.length>0?this.renderROCCurve(t):(t=s.pairs(e).map(function(e){var t=r(e,2),a=t[0],n=t[1][c];return{name:a,data:n}}).filter(function(e){var t=(e.name,e.data);return void 0!==t}),this.renderConfusionMatrix(t))},renderROCCurve:function(e){return n.createElement(o,{modelsArray:e})},renderConfusionMatrix:function(e){return n.createElement(i,{modelsArray:e})},render:function(){var e=this.props.selected_variable.comparison;if(null===e)return n.createElement("span",null,"There are no comparisons available for this model.");var t=e.dataset_label,a=void 0===t?"":t,r=e.evaluations,s=this.renderComparisonView(r);return n.createElement("div",{style:{marginTop:".5em"}},u(n.createElement("span",null,"Comparison of model performance with dataset ",n.createElement("em",null,a))),n.createElement("div",{style:{marginLeft:"1em"}},s))}})},{"../../common_util":3,"../model_metrics":22,"../model_utilities":25,"./multiclass_comparison":17,lodash:"lodash","react/addons":"react/addons"}],17:[function(e,t,a){"use strict";function r(e){var t=e.labels,a=e.data,r=t.map(function(e){return a[e][e]}),n=t.map(function(e){return t.reduce(function(t,r){return r!==e?a[r][r]+t:t},0)}),s=t.map(function(e){return t.reduce(function(t,r){return a[e][r]+t},0)}),i=t.map(function(e){return t.reduce(function(t,r){return r!==e?a[e][r]+t:t},0)}),o=s.map(function(e,t){return e-r[t]}),l=i.map(function(e,t){return e+n[t]});return{tp:r,tn:n,p:s,n:l,fp:o,fn:i}}function n(e){var t=e.tp,a=e.tn,r=e.p,n=e.n,s=t.map(function(e,t){return x.acc(e,a[t],r[t],n[t])});return i(s)}function s(e){var t=e.fp,a=e.fn,r=e.p,n=e.n,s=t.map(function(e,t){return x.error(e,a[t],r[t],n[t])});return i(s)}function i(e){return e.reduce(function(e,t){return e+t},0)/e.length}function o(e){var t=e.tp,a=e.p,r=t.reduce(function(e,t){return e+t},0);return r/a.reduce(function(e,t){return e+t},0)}function l(e){var t=e.tp,a=e.fn,r=t.reduce(function(e,t){return e+t},0);return r/a.reduce(function(e,t){return e+t},r)}function c(e){var t=o(e),a=l(e);return 2*t*a/(t+a)}function d(e){var t=e.tp,a=e.fp,r=t.map(function(e,t){return e/(e+a[t])});return i(r)}function u(e){var t=e.tp,a=e.fn,r=t.map(function(e,t){return e/(e+a[t])});return i(r)}function p(e){var t=d(e),a=u(e);return 2*t*a/(t+a)}function h(e){var t=e.map(function(e){var t=e.name,a=e.data;return{name:t,rollup:x.rollupConfusionMatrix(a)}}),a=t.map(function(e){var t=(e.name,e.rollup);return r(t)}),i=a.map(function(e){return T(n(e))}),h=a.map(function(e){return T(s(e))}),m=a.map(function(e){return T(o(e))}),f=a.map(function(e){return T(l(e))}),b=a.map(function(e){return T(c(e))}),y=a.map(function(e){return T(d(e))}),v=a.map(function(e){return T(u(e))}),w=a.map(function(e){return T(p(e))}),E=t.map(function(e,t){var a=e.name;return{Model:a,"Avg Accuracy":i[t],"Error Rate":h[t],"Micro F1Score":b[t],"Micro Precision":m[t],"Micro Recall":f[t],"Macro F1Score":w[t],"Macro Precision":y[t],"Macro Recall":v[t]}}),_={"Avg Accuracy":g.max(i),"Error Rate":g.min(h),"Micro F1Score":g.max(b),"Micro Precision":g.max(m),"Micro Recall":g.max(f),"Macro F1Score":g.max(w),"Macro Precision":g.max(y),"Macro Recall":g.max(v)};return{bestValues:_,data:E}}function m(e,t,a,r,n,s){return b.createElement(A,{modelName:e,color:n.colorMap[e],onClick:function(){return n.modelSelectHandler(e)}})}function f(e,t,a,r,n,s){return b.createElement(P,{isBold:e===n.bestValue,value:e})}var b=e("react/addons"),g=e("lodash"),y=e("fixed-data-table"),v=y.Table,w=y.Column,E=e("../confusion_matrix"),_=e("../../common_util"),x=e("../model_utilities"),S=e("../../page_layout"),k=e("../../echart_components/color_brewer").Set2,T=g.partial(_.roundToXDecimalPlaces,3),C={ASC:"ASC",DESC:"DESC"},N=[{label:"Model",dataKey:"Model",fixed:!0,cellRenderer:m},{label:"Avg Accuracy",dataKey:"Avg Accuracy",fixed:!1,cellRenderer:f},{label:"Error Rate",dataKey:"Error Rate",fixed:!1,cellRenderer:f},{label:"Micro Precision",dataKey:"Micro Precision",fixed:!1,cellRenderer:f},{label:"Macro Precision",dataKey:"Macro Precision",fixed:!1,cellRenderer:f},{label:"Micro Recall",dataKey:"Micro Recall",fixed:!1,cellRenderer:f},{label:"Macro Recall",dataKey:"Macro Recall",fixed:!1,cellRenderer:f},{label:"Micro F1Score",dataKey:"Micro F1Score",fixed:!1,cellRenderer:f},{label:"Macro F1Score",dataKey:"Macro F1Score",fixed:!1,cellRenderer:f}],P=b.createClass({displayName:"BoldValueCell",propTypes:{isBold:b.PropTypes.bool.isRequired,value:b.PropTypes.any.isRequired},render:function(){return b.createElement("span",{style:{fontWeight:this.props.isBold?"bold":null}},this.props.value)}}),A=b.createClass({displayName:"ModelNameCell",propTypes:{modelName:b.PropTypes.string.isRequired,color:b.PropTypes.string.isRequired,onClick:b.PropTypes.func},getInitialState:function(){return{hover:!1}},_onMouseEnter:function(e){this.setState({hover:!0})},_onMouseLeave:function(e){this.setState({hover:!1})},_onClick:function(e){this.props.onClick&&this.props.onClick(this.props.modelName)},render:function(){return b.createElement("div",{style:{cursor:this.props.onClick?"pointer":"auto",color:this.state.hover?"#4183c4":null},onClick:this._onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},b.createElement("div",{style:{height:20,width:20,backgroundColor:this.props.color,verticalAlign:"middle",marginRight:3,marginLeft:3,display:"inline-block"}}),b.createElement("span",null,this.props.modelName))}}),M=b.createClass({displayName:"ModelPerformanceTable",propTypes:{modelsArray:b.PropTypes.array.isRequired,onSelect:b.PropTypes.func},getInitialState:function(){var e=h(this.props.modelsArray),t=e.bestValues,a=e.data;return{bestValues:t,rows:a,sortBy:"Model",sortDir:null}},componentWillReceiveProps:function(e){if(0===this.props.modelsArray.length){var t=h(e.modelsArray),a=t.bestValues,r=t.data;this.setState({bestValues:a,rows:r})}},_rowGetter:function(e){return this.state.rows[e]},_sortRowsBy:function(e){var t=this.state.sortDir,a=e;t=a===this.state.sortBy?this.state.sortDir===C.ASC?C.DESC:C.ASC:C.DESC;var r=this.state.rows.slice();r.sort(function(e,r){var n=0;return e[a]<r[a]&&(n=1),e[a]>r[a]&&(n=-1),t===C.DESC&&(n=-1*n),n}),this.setState({rows:r,sortBy:a,sortDir:t})},_renderHeader:function(e,t){return b.createElement("a",{style:{color:"#4183c4",textDecoration:"none",cursor:"pointer"},onClick:this._sortRowsBy.bind(null,t)},e)},_makeColormap:function(){var e={},t=k[Math.min(Math.max(3,this.state.rows.length),8)];return this.state.rows.forEach(function(a,r){e[a.Model]=t[r]}),e},_modelSelectHandler:function(e){this.props.onSelect&&this.props.onSelect(e)},_renderColumn:function(e){var t="";return null!==this.state.sortDir&&this.state.sortBy===e.label&&(t=this.state.sortDir===C.DESC?" ↓":" ↑"),e.columnData="Model"===e.label?{colorMap:this._makeColormap(),modelSelectHandler:this._modelSelectHandler}:{bestValue:this.state.bestValues[e.label]},b.createElement(w,{headerRenderer:this._renderHeader,label:e.label+t,width:140,dataKey:e.dataKey,key:e.label,align:"center",fixed:e.fixed,flexGrow:1,cellRenderer:e.cellRenderer,columnData:e.columnData})},render:function(){return b.createElement(v,{width:S.tableWidth(),maxHeight:S.tableHeight(),rowHeight:50,rowsCount:this.state.rows.length,headerHeight:50,rowGetter:this._rowGetter},N.map(this._renderColumn))}});t.exports=b.createClass({displayName:"exports",propTypes:{modelsArray:b.PropTypes.array.isRequired},getInitialState:function(){var e=this.props.modelsArray&&this.props.modelsArray[0]&&this.props.modelsArray[0].name||void 0;return{selectedModel:e}},_modelSelect:function(e){this.setState({selectedModel:e})},render:function(){var e=this,t=g.result(g.find(this.props.modelsArray,function(t){{var a=t.name;t.data}return a===e.state.selectedModel}),"data");return b.createElement("div",{style:{}},b.createElement(M,{modelsArray:this.props.modelsArray,onSelect:this._modelSelect}),"Click on a model name in the above table to display its confusion matrix.",void 0!==t?b.createElement("div",{style:{marginTop:20}},b.createElement("div",{style:{marginTop:0,marginBottom:3,height:28,fontWeight:500,fontSize:17}},"Confusion Matrix for model ",b.createElement("em",null,this.state.selectedModel)),b.createElement(E,{confusionMatrix:t})):null)}})},{"../../common_util":3,"../../echart_components/color_brewer":9,"../../page_layout":30,"../confusion_matrix":18,"../model_utilities":25,"fixed-data-table":"fixed-data-table",lodash:"lodash","react/addons":"react/addons"}],18:[function(e,t,a){"use strict";var r=e("react/addons"),n=(e("lodash"),e("./model_utilities")),s=10;t.exports=r.createClass({displayName:"exports",mixins:[r.PureRenderMixin],propTypes:{confusionMatrix:r.PropTypes.array.isRequired},render:function(){var e=n.rollupConfusionMatrix(this.props.confusionMatrix),t=e.data,a=e.labels;if(a.length>s)return null;var i=r.createElement("th",{rowSpan:a.length},r.createElement("div",{style:{display:"inline-block"}},"Target Label"));return r.createElement("div",{style:{marginBottom:20}},r.createElement("table",{className:"confusion-matrix"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("th",{style:{border:"none",background:"white"},colSpan:"2",rowSpan:"2"}),r.createElement("th",{colSpan:a.length,style:{background:"none"}},"Predicted Label")),r.createElement("tr",null,a.map(function(e,t){return r.createElement("th",{key:t},e)})),a.map(function(e,a){return r.createElement("tr",{key:a},0===a?i:null,r.createElement("th",null,e),t[a].map(function(e,t){return r.createElement("td",{key:t,className:t===a?"diagonal":""},e)}))}))))}})},{"./model_utilities":25,lodash:"lodash","react/addons":"react/addons"}],19:[function(e,t,a){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=e("react/addons"),s=e("../common_controls"),i=e("../common_util"),o=e("./model_summary"),l=e("./model_evaluation"),c=e("./model_comparison"),d={Summary:o,Evaluation:l,Comparison:c},u=Object.keys(d).map(function(e){var t=d[e];return[e,n.createClass({render:function(){return n.createElement("div",null,n.createElement(t,r({},this.props,{style:{outline:"none"}})))}})]});d.View=n.createClass({mixins:[s.Modal],shouldComponentUpdate:function(e,t){var a=!i.deepEquals(this.props,e)||!i.deepEquals(this.state,t);return a},render:function(){var e=s.Tabs;return n.createElement("div",null,n.createElement(e,{selectVariable:this.props.selectVariable,selected_variable:this.props.selected_variable,tabs:u,initialTab:this.props.selected_variable.view_component}))}}),t.exports=d},{"../common_controls":2,"../common_util":3,"./model_comparison":20,"./model_evaluation":21,"./model_summary":24,"react/addons":"react/addons"}],20:[function(e,t,a){"use strict";var r=e("react/addons"),n=e("./classifier/comparison"),s=e("./recommender/precision_recall_comp");t.exports=r.createClass({displayName:"exports",render:function(){var e=this.props.selected_variable.model_type,t=r.createElement("div",null,"Model Comparison is not yet available on ",r.createElement("em",null,e)," model type.");return("classifier"===e||"regression"===e)&&(t=r.createElement(n,this.props)),"recommender"===e&&(t=r.createElement(s,this.props)),r.createElement("div",{style:{marginTop:".5em",minHeight:"300"}},t)}})},{"./classifier/comparison":16,"./recommender/precision_recall_comp":28,"react/addons":"react/addons"}],21:[function(e,t,a){"use strict";function r(e){function t(e){return C.indexOf(e)>=0?C.indexOf(e):N.indexOf(e)?N.indexOf(e)+A:P}var a,r;return e.sort(function(e,n){return a=e[0],r=n[0],t(a)-t(r)}),e}function n(e,t){return u.createElement("tr",{key:e},u.createElement("td",null,e),u.createElement("td",null,t))}function s(e,t){return u.createElement("tbody",{key:e},u.createElement("tr",null,u.createElement("th",{colSpan:"2"},S(e))),p.map(t,function(e,t){return u.createElement("tr",{key:t},u.createElement("td",null,t),u.createElement("td",null,e))}),u.createElement("tr",null,u.createElement("td",{rowSpan:"2"}," ")))}function i(e){var t=T,a=[y,v],r=[],n={};return e.forEach(function(e,s){var i=d(e,2),o=i[0],l=i[1];n={},n[t]={},p.pairs(l).forEach(function(e){var r=d(e,2),s=r[0],i=r[1];p.isPlainObject(i)||a.indexOf(s)>=0?n[s]=i:("number"==typeof i&&(i=h.formatNumber(i)),n[t][s]=i)}),0===p.keys(n[t]).length&&delete n[t],r.push([o,n])}),r}function o(e){return u.createElement("div",{style:{marginTop:".5em",minHeight:"300"}},"Model Evaluation is not yet available on ",u.createElement("em",null,e)," model type.")}function l(e){var t=e.evaluations,a=e.name,o=a[0];if(!p.isArray(t)||0===t.length)return u.createElement("div",{style:{marginTop:".5em",minHeight:"300"}},"There are no evaluations available for this model.");if(t=i(t),0===t.length)return null;var l=d(t[t.length-1],2),c=l[0],h=l[1],b=r(_(p.pairs(h))),g=w(p.pairs(h)),y=d(g,1),v=y[0],k=null;if(p.isArray(v)){var T=d(v,2),C=T[1];k=u.createElement(f,{modelsArray:[{name:o,data:C}]})}return u.createElement("div",{style:{marginTop:".5em"}},x(u.createElement("span",null,"Most recent model evaluation with dataset ",u.createElement("em",null,c))),u.createElement("div",{style:{marginLeft:"1em"}},k,u.createElement("table",null,u.createElement("tbody",null,b.map(function(e){var t=d(e,2),a=t[0],r=t[1];return p.isPlainObject(r)?s(a,r):n(a,r)}))),p.map(E(p.pairs(h)),function(e){var t=d(e,2),a=t[0],r=t[1],n=void 0;return r&&(n=u.createElement(m,{confusionMatrix:r})),k||!n?null:u.createElement("table",{key:a},u.createElement("tbody",null,u.createElement("tr",null,u.createElement("th",{colSpan:"2"},S("Confusion Matrix"))),u.createElement("tr",null,u.createElement("td",{colSpan:"2"},n))))})))}function c(e){var t=e.evaluations;if(0===t.length)return null;{var a=d(t[t.length-1],2),r=(a[0],a[1]),n=r.precision_recall_overall,s=n.map(function(e){return p.mapValues(e,k)});s.map(function(e){return[e.recall,e.precision]})}return u.createElement("div",null,u.createElement(g,{data:s}))}var d=function(){function e(e,t){var a=[],r=!0,n=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(l){n=!0,s=l}finally{try{!r&&o["return"]&&o["return"]()}finally{if(n)throw s}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=e("react/addons"),p=e("lodash"),h=e("../common_util"),m=e("./confusion_matrix"),f=e("./model_metrics"),b=(e("../plots/line").Line,e("./model_utilities")),g=e("./recommender/precision_recall"),y=(e("./recommender/precision_recall_comp"),b.confusionMatrixKey),v=b.rocMetricsKey,w=b.extractROCMetricsStep,E=b.extractConfusionMatrixStep,_=b.removeSpecialEvaluationProperties,x=b.viewTitleElement,S=b.sectionTitleElement,k=p.partial(h.roundToXDecimalPlaces,3),T="General Metrics",C=["General Metrics"],N=[v,y],P=1e3,A=5e3;t.exports=u.createClass({displayName:"exports",render:function(){var e=this.props.selected_variable,t=e.model_type;return"recommender"===t?c(e):["classifier","regression"].indexOf(t)>=0?l(e):o(t)}})},{"../common_util":3,"../plots/line":45,"./confusion_matrix":18,"./model_metrics":22,"./model_utilities":25,"./recommender/precision_recall":27,"./recommender/precision_recall_comp":28,lodash:"lodash","react/addons":"react/addons"}],22:[function(e,t,a){"use strict";var r=e("react/addons"),n=e("lodash"),s=e("../common_util"),i=e("./threshold_slider"),o=e("../plot_components/multiline"),l=[[0,0],[1,1]],c=n.partial(s.roundToXDecimalPlaces,3),d=400,u=480;t.exports=r.createClass({displayName:"exports",propTypes:{modelsArray:r.PropTypes.array.isRequired},getInitialState:function(){var e=0,t=this.props.modelsArray[e].data.length/2;return{selectedDataIndex:Math.round(t),selectedDataIndexInverted:this.sliderDataIndexToLineDataIndex(t,e),shouldShowSelected:!1,selectedSeriesIndex:e}},setSeriesSelection:function(e){var t=e.name,a=n.findIndex(this.props.modelsArray,function(e){{var a=e.name;e.data}return a===t});a>=0&&this.setState({selectedSeriesIndex:a})},updateSelectedData:function(e){this.setState({selectedDataIndex:e,selectedDataIndexInverted:this.sliderDataIndexToLineDataIndex(e,this.state.selectedSeriesIndex),shouldShowSelected:!0})},hideSelectedBin:function(){this.setState({shouldShowSelected:!1})},sliderDataIndexToLineDataIndex:function(e,t){return this.props.modelsArray[t].data.length-1-e},render:function(){var e=this.props.modelsArray;if(null===e)return r.createElement("div",null,"Loading");var t=e.map(function(e){var t=e.name,a=e.data,r=a.length,s=n.map(a,function(e){return n.mapValues(e,c)});return s[0].fpr=1,s[0].tpr=1,s[r-1].fpr=0,s[r-1].tpr=0,{name:t,data:s}}),a=t.map(function(e){var t=e.name,a=e.data;return{name:t,data:a.map(function(e){return[e.fpr,e.tpr,e.threshold]}).reverse()}}),s=t[this.state.selectedSeriesIndex].data;return r.createElement("div",null,r.createElement(o,{height:d,width:u,seriesArray:a,markLineArray:[{name:"Random Baseline",data:l}],xLabel:"False Positive Rate",yLabel:"True Positive Rate",zLabel:"Threshold",onSeriesSelect:this.setSeriesSelection,selectedSeriesIndex:this.state.selectedSeriesIndex,selectedDataIndex:this.state.selectedDataIndexInverted,shouldShowSelected:this.state.shouldShowSelected,useTightExtents:!0,showZoom:!1}),r.createElement(i,{data:s,indexToSelect:this.state.selectedDataIndex,updateSelectionFunc:this.updateSelectedData,hideBinFunc:this.hideSelectedBin}))}})},{"../common_util":3,"../plot_components/multiline":34,"./threshold_slider":29,lodash:"lodash","react/addons":"react/addons"}],23:[function(e,t,a){"use strict";var r=e("react/addons"),n=(e("../common_controls"),e("./model_views").types),s=r.createClass({displayName:"Header",render:function(){return r.createElement("th",null,this.props.text)}});t.exports={View:r.createClass({displayName:"View",render:function(){return r.createElement("div",{className:"canvas canvas-view-main model-objects",style:{backgroundColor:"#eee",paddingLeft:32,paddingRight:32,paddingTop:20}},r.createElement("table",{className:"table table-striped",style:{backgroundColor:"white"}},r.createElement("thead",null,r.createElement("tr",null,r.createElement(s,{text:"Name"}),r.createElement(s,{text:"Type"}))),r.createElement("tbody",null,this.props.variables.map(function(e,t){return e.name.length>1||-1===n.indexOf(e.type)?null:r.createElement("tr",{key:t},r.createElement("td",null,r.createElement("a",{href:"javascript:",onClick:this.props.selectVariable.bind(null,e.name),style:{display:"inline-block",width:"100%"}},e.name[0])),r.createElement("td",null,e.type))},this))))}})}},{"../common_controls":2,"./model_views":26,"react/addons":"react/addons"}],24:[function(e,t,a){"use strict";var r=function(){function e(e,t){var a=[],r=!0,n=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(l){n=!0,s=l}finally{try{!r&&o["return"]&&o["return"]()}finally{if(n)throw s}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=e("react/addons"),s=(e("lodash"),e("../common_util")),i=n.createClass({displayName:"CoefficientsChart",mixins:[n.PureRenderMixin],render:function(){var e=this.props.coefficients,t=e.length;if(0>=t)return n.createElement("div",null);var a={labels:e.map(function(e,t){return e[0]}),series:[e.map(function(e,t){return e[1]})]};return n.createElement("table",{className:"table table-bordered",style:{width:"auto"}},n.createElement("tbody",null,a.labels.map(function(e,t){return n.createElement("tr",{key:t},n.createElement("th",null,e),n.createElement("td",null,s.formatNumber(a.series[0][t])))})))}});t.exports=n.createClass({displayName:"exports",getHighestPositiveCoefficientsIndex:function(){var e=this.props.selected_variable.attributes.section_titles;return e.indexOf("Highest Positive Coefficients")},getLowestNegativeCoefficientsIndex:function(){var e=this.props.selected_variable.attributes.section_titles;return e.indexOf("Lowest Negative Coefficients")},getCoefficients:function(){var e,t,a=this.props.selected_variable.attributes.sections,r=(this.props.selected_variable.attributes.section_titles,[]),n=[];return e=this.getHighestPositiveCoefficientsIndex(),e>=0&&(r=r.concat(a[e])),t=this.getLowestNegativeCoefficientsIndex(),t>=0&&(n=n.concat(a[t])),r.sort(function(e,t){return t[1]-e[1]}),n.sort(function(e,t){return e[1]-t[1]}),[n,r]},summaryWithoutCoefficients:function(){var e,t,a=this.props.selected_variable.attributes.sections,r=this.props.selected_variable.attributes.section_titles;return e=this.getHighestPositiveCoefficientsIndex(),e>=0&&(r.splice(e,1),a.splice(e,1)),t=this.getLowestNegativeCoefficientsIndex(),t>=0&&(r.splice(t,1),a.splice(t,1)),[a,r]},renderSection:function(e){return e.map(function(e){var t=r(e,2),a=t[0],s=t[1];return n.createElement("tr",{key:a},n.createElement("td",null,a),n.createElement("td",null,s))})},render:function(){var e=this;if("attributes"in this.props.selected_variable&&"sections"in this.props.selected_variable.attributes&&"section_titles"in this.props.selected_variable.attributes){var t=this.props.selected_variable.attributes.sections,a=this.props.selected_variable.attributes.section_titles;if(t.length===a.length){var s=null,o=[],l=[],c=this.getCoefficients(),d=r(c,2);o=d[0],l=d[1];var u=this.summaryWithoutCoefficients(),p=r(u,2);if(t=p[0],a=p[1],l.length>0||o.length>0){s=n.createElement("div",null,n.createElement("div",{style:{fontSize:16,fontWeight:500,marginBottom:3}},"Highest Positive Coefficients"),n.createElement(i,{coefficients:l}),n.createElement("div",{style:{fontSize:16,fontWeight:500,marginBottom:3}},"Lowest Negative Coefficients"),n.createElement(i,{coefficients:o}));var h=this.summaryWithoutCoefficients(),m=r(h,2);t=m[0],a=m[1]}return n.createElement("div",null,n.createElement("div",{style:{marginBottom:".25em",marginTop:".5em"
}},n.createElement("table",{className:"canvas-model-summary-table"},a.map(function(a,r){return void 0===t[r][0]?null:n.createElement("tbody",{key:a},n.createElement("tr",null,n.createElement("th",{colSpan:"2"},n.createElement("span",null,a))),e.renderSection(t[r]),n.createElement("tr",null,n.createElement("td",{colSpan:"2",rowSpan:"2"}," ")))},this))),s)}}}})},{"../common_util":3,lodash:"lodash","react/addons":"react/addons"}],25:[function(e,t,a){"use strict";function r(e,t){for(var a=new Array(e),r=0;e>r;){a[r]=new Array(e);for(var n=0;e>n;)a[r][n++]=t;r++}return a}function n(e){var t=s(e);return d.every(t,function(e){return d.isFinite(parseFloat(e))})?t.sort(function(e,t){return parseFloat(e)-parseFloat(t)}):t.sort(),t}function s(e){var t=e.reduce(function(e,t){{var a=t.target_label,r=t.predicted_label;t.count}return e.add(String(a)),e.add(String(r)),e},new Set),a=[],r=!0,n=!1,s=void 0;try{for(var i,o=t[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var l=i.value;a.push(l)}}catch(c){n=!0,s=c}finally{try{!r&&o["return"]&&o["return"]()}finally{if(n)throw s}}return a}function i(e){var t=n(e),a=t.length,s={};t.forEach(function(e,t){s[e]=t});var i=r(a,0);return e.forEach(function(e){var t=e.target_label,a=e.predicted_label,r=e.count,n=s[String(t)],o=s[String(a)];i[n][o]=r}),{labels:t,data:i}}function o(e,t){return d.reject(e,function(e){{var a=c(e,2),r=a[0];a[1]}return t.indexOf(r)>=0})}function l(e,t){return d.filter(e,function(e){{var a=c(e,2),r=a[0];a[1]}return r==t})}var c=function(){function e(e,t){var a=[],r=!0,n=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(l){n=!0,s=l}finally{try{!r&&o["return"]&&o["return"]()}finally{if(n)throw s}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=e("lodash"),u=e("react/addons"),p="confusion_matrix",h="roc_curve";t.exports={acc:function(e,t,a,r){return(e+t)/(a+r)},f1Score:function(e,t,a){return 2*e/(2*e+t+a)},precision:function(e,t){return e/(e+t)},recall:function(e,t){return e/t},inverse_precision:function(e,t){return e/(e+t)},inverse_recall:function(e,t){return e/t},error:function(e,t,a,r){return(e+t)/(a+r)},confusionMatrixKey:p,rocMetricsKey:h,removeSpecialEvaluationProperties:function(e){return o(e,[p,h])},extractROCMetricsStep:function(e){return l(e,h)},extractConfusionMatrixStep:function(e){return l(e,p)},viewTitleElement:function(e){return u.createElement("h3",{style:{marginTop:0,marginBottom:20,height:28}},e)},sectionTitleElement:function(e){return u.createElement("div",{style:{marginTop:0,marginBottom:3,height:28,fontWeight:500,fontSize:17}},e)},rollupConfusionMatrix:i}},{lodash:"lodash","react/addons":"react/addons"}],26:[function(e,t,a){"use strict";var r=["Model"],n={model:e("./model")};t.exports={views:n,types:r}},{"./model":19}],27:[function(e,t,a){"use strict";var r=e("react/addons"),n=e("lodash"),s=e("../../common_util"),i=e("../../plots/line").Line,o=n.partial(s.roundToXDecimalPlaces,3);t.exports=r.createClass({displayName:"exports",makePrecicionRecallOptions:function(e){return{tooltip:{trigger:"item",showDelay:0,hideDelay:0,transitionDuration:0,axisPointer:{type:"shadow"},backgroundColor:"rgba(50,50,50,0.8)",formatter:function(e){var t=e.data;return"recall: "+t[0]+"<br/>precision: "+t[1]+"<br/>cutoff at "+t[2]}},xAxis:[{axisLabel:{show:!0,interval:"auto",rotate:0,margin:8,formatter:function(e){return o(e)}}}],yAxis:[{axisLabel:{show:!0,interval:"auto",margin:8,formatter:function(e){return o(e)}}}],series:[{showAllSymbol:!0,symbolSize:3}]}},render:function(){if(null===this.props.data)return r.createElement("div",null,"Loading");var e=this.props.data.map(function(e){return n.mapValues(e,o)}),t=e.map(function(e){return[e.recall,e.precision,e.cutoff]}).reverse(),a=600,s=680;return r.createElement("div",null,r.createElement(i,{height:a,width:s,plotOption:this.makePrecicionRecallOptions(this.props),seriesArray:[{name:"",data:t}],xLabel:"recall",yLabel:"precision",useTightExtents:!1,showZoom:!1}))}})},{"../../common_util":3,"../../plots/line":45,lodash:"lodash","react/addons":"react/addons"}],28:[function(e,t,a){"use strict";function r(e){return e.precision_recall.map(function(e){return[e.recall,e.precision,e.cutoff]})}{var n=e("react/addons"),s=(e("lodash"),e("../../plot_components/multiline"));e("../model_utilities").ColorBrewer}t.exports=n.createClass({displayName:"exports",makePrecisionRecallArrays:function(){var e=this;try{var t=function(){var t=e.props.selected_variable.comparison.evaluations,a=void 0===t?{}:t;return{v:Object.keys(a).map(function(e){return{name:e,data:r(a[e])}})}}();if("object"==typeof t)return t.v}catch(a){return[]}return[]},render:function(){var e=this.makePrecisionRecallArrays();if(0===e.length)return n.createElement("div",null,"Loading");var t=600,a=680;return n.createElement(s,{height:t,width:a,seriesArray:e,xLabel:"recall",yLabel:"precision",zLabel:"cutoff",useTightExtents:!1,showZoom:!1})}})},{"../../plot_components/multiline":34,"../model_utilities":25,lodash:"lodash","react/addons":"react/addons"}],29:[function(e,t,a){"use strict";var r=e("react/addons"),n=e("lodash"),s=e("../common_util"),i=e("./model_utilities"),o=n.partial(s.roundToXDecimalPlaces,3),l="fpr",c="tpr",d="n",u="p",p=function(e){for(var t=n.sortBy(e,l),a=0,r=1;r<t.length;r++)a+=.5*(t[r].tpr+t[r-1].tpr)*(t[r].fpr-t[r-1].fpr);return a};t.exports=r.createClass({displayName:"exports",propTypes:{data:r.PropTypes.array.isRequired,updateSelectionFunc:r.PropTypes.func.isRequired,indexToSelect:r.PropTypes.number},getInitialState:function(){return{auc:0}},getDefaultProps:function(){return{indexToSelect:0}},sliderChanged:function(e){var t=parseInt(e.target.value,10);this.props.updateSelectionFunc(t)},componentWillMount:function(e){this.setState({auc:p(this.props.data)})},componentWillReceiveProps:function(e){this.setState({auc:p(e.data)})},shouldComponentUpdate:function(e){return this.props.indexToSelect!==e.indexToSelect?!0:n.isEqual(this.props.data,e.data)?!1:!0},render:function(){if(null!==this.props.data){var e=this.props.indexToSelect,t=this.props.data[e],a=t[l],n=t[d],s=t[u],p=t[c],h=t.threshold,m=Math.round(p*s),f=Math.round(a*n),b=Math.round(n-f),g=Math.round(s-m),y=i.acc(b,m,s,n),v=i.f1Score(m,f,g),w=i.precision(m,f);return r.createElement("div",{className:"canvas-model-metrics-table-slider-container"},r.createElement("table",{className:"canvas-model-metrics-table"},r.createElement("tr",null,r.createElement("th",null,"True Positive"),r.createElement("th",null,"False Negative"),r.createElement("th",null,"Accuracy"),r.createElement("th",null,"Precision")),r.createElement("tr",null,r.createElement("td",null,m),r.createElement("td",null,g),r.createElement("td",null,o(y)),r.createElement("td",null,o(w))),r.createElement("tr",null," "),r.createElement("tr",null,r.createElement("th",null,"False Positive"),r.createElement("th",null,"True Negative"),r.createElement("th",null,"Recall"),r.createElement("th",null,"F1 Score")),r.createElement("tr",null,r.createElement("td",null,f),r.createElement("td",null,b),r.createElement("td",null,o(p)),r.createElement("td",null,o(v)))),r.createElement("div",{className:"canvas-model-metrics-slider-container"},r.createElement("span",null,r.createElement("table",{className:"canvas-model-metrics-table"},r.createElement("tr",null,r.createElement("th",null,"Threshold")),r.createElement("tr",null,r.createElement("td",null,o(h)))),r.createElement("input",{type:"range",min:"0",max:this.props.data.length-1,step:"1",defaultValue:e,onChange:this.sliderChanged,onMouseUp:this.props.hideBinFunc,style:{width:300,marginLeft:10,marginRight:40}}),r.createElement("table",{className:"canvas-model-metrics-table"},r.createElement("tr",null,r.createElement("th",null,"AUC")),r.createElement("tr",null,r.createElement("td",null,o(this.state.auc)))))))}}})},{"../common_util":3,"./model_utilities":25,lodash:"lodash","react/addons":"react/addons"}],30:[function(e,t,a){"use strict";function r(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}}var n=(e("./state"),e("./common_util"),r()),s={colorbar_height:4,breadcrumb_height:55,column_selection_height:56,tab_height:42,left_nav_width:180,view_main_margin_left:20,view_main_margin_right:20,view_main_margin_bottom:20,view_main_padding_top:12,view_main_padding_bottom:12,view_main_content_padding_top:0,view_main_content_padding_bottom:0,table_column_header_height:44,table_nav_width:96,table_vertical_scroll_width:15,table_horizontal_scroll_height:15,view_main_padding_left:15,view_main_border_left:1,view_main_border_right:1,view_main_content_padding_left:0,view_main_content_padding_right:0,windowHeight:n.height,windowWidth:n.width},i={contentWidth:function(){return r().width-(s.left_nav_width+s.view_main_margin_left+s.view_main_padding_left+s.view_main_border_left+s.view_main_border_right+s.view_main_content_padding_left+s.view_main_content_padding_right+s.view_main_margin_right)},contentHeight:function(){return r().height-(s.breadcrumb_height+s.column_selection_height+s.tab_height+s.view_main_padding_top+s.view_main_padding_bottom+s.view_main_margin_bottom)},tableWidth:function(){return i.contentWidth()-(s.table_nav_width+s.table_vertical_scroll_width)},tableHeight:function(){return i.contentHeight()-(s.view_main_content_padding_top+s.view_main_content_padding_bottom+s.table_column_header_height+s.table_horizontal_scroll_height)},get:function(e){return e in s?s[e]:void 0}};t.exports=i},{"./common_util":3,"./state":51}],31:[function(e,t,a){"use strict";function r(e){if(!e||!e.grouped)return[];var t=e.grouped,a=t.map(function(e){return e[0]});if(0===a.length)return[];var r=Object.keys(t[0][1]),n=r.map(function(e){return{name:e,data:[]}});return t.forEach(function(e){n.forEach(function(t){var a=t.name;t.data.push(d(e[1][a])||0/0)})}),{seriesArray:n,categories:a}}var n=e("react/addons"),s=e("lodash"),i=e("../plots/bar").Bar,o=e("../common_util"),l=e("../taskqueue"),c=e("../common_controls"),d=s.partial(o.roundToXDecimalPlaces,3);t.exports={View:n.createClass({mixins:[c.AsyncState],propTypes:{data:n.PropTypes.shape({grouped:n.PropTypes.object,omitted:n.PropTypes.oneOfType([n.PropTypes.object,n.PropTypes.number])}),ipython:n.PropTypes.bool,selected_variable:n.PropTypes.object.isRequired},getInitialState:function(e){e||(e=this.props);var t={seriesArray:[],categories:[],numLabel:e.selected_variable.view_params.y,catLabel:e.selected_variable.view_params.x,width:800,height:500,progress:0};if(e.ipython){var a=r(e.data),n=a.seriesArray,s=a.categories;t.seriesArray=n,t.categories=s}return t},updateAsyncState:function(e){var t=[];t.push(new l.ProgressTask("/bar_values",".values()",function(e){var t=r(e.data),a=t.seriesArray,n=t.categories;this.setState({seriesArray:a,categories:n})}.bind(this))),this.addTask(new l.MultiTask(t))},render:function(){return 0===this.state.seriesArray.length?n.createElement("div",{style:{height:this.state.height,width:this.state.width}}):n.createElement(i,{seriesArray:this.state.seriesArray,categories:this.state.categories,xLabel:this.state.catLabel,yLabel:this.state.numLabel,width:this.state.width,height:this.state.height,showZoom:this.state.categories.length>5})}})}},{"../common_controls":2,"../common_util":3,"../plots/bar":37,"../taskqueue":53,lodash:"lodash","react/addons":"react/addons"}],32:[function(e,t,a){"use strict";function r(e){var t=e.map(function(e){return e[0]}),a=e.map(function(e){return e[1]});return{categories:t,data:a.map(function(e){var t=e.map(function(e){return d(e)});return[t[4],t[6],t[1],t[9],t[5]]})}}var n=e("react/addons"),s=e("lodash"),i=e("../plots/boxwhisker").BoxWhisker,o=e("../common_util"),l=e("../taskqueue"),c=e("../common_controls"),d=s.partial(o.roundToXDecimalPlaces,3);t.exports={View:n.createClass({mixins:[c.AsyncState],propTypes:{selected_variable:n.PropTypes.object.isRequired,data:n.PropTypes.shape({grouped:n.PropTypes.object.isRequired,omitted:n.PropTypes.oneOfType([n.PropTypes.object,n.PropTypes.number])}),ipython:n.PropTypes.bool},getInitialState:function(e){e||(e=this.props);var t={data:[],categories:[],numLabel:e.selected_variable.view_params.y,catLabel:e.selected_variable.view_params.x,width:800,height:500};if(e.ipython){var a=r(e.data.grouped),n=a.data,s=a.categories;t.data=n,t.categories=s}return t},updateAsyncState:function(e){var t=[];t.push(new l.ProgressTask("/boxwhisker_values",".values()",function(e){var t=r(e.data.grouped),a=t.data,n=t.categories;this.setState({data:a,categories:n})}.bind(this))),this.addTask(new l.MultiTask(t))},render:function(){return 0===this.state.data.length?n.createElement("div",{style:{height:this.state.height,width:this.state.width}}):n.createElement("div",{style:{display:"table"}},n.createElement("div",{style:{display:"table-cell"}},n.createElement("div",{style:{"float":"left"}},n.createElement(i,{seriesArray:[{name:this.state.numLabel,data:this.state.data}],categories:this.state.categories,xLabel:this.state.catLabel,yLabel:this.state.numLabel,width:this.state.width,height:this.state.height,showZoom:this.state.categories.length>5})),n.createElement("div",{style:{"float":"right",marginTop:150}},n.createElement("img",{src:"images/boxwhisker_legend.png",height:250,width:143}))))}})}},{"../common_controls":2,"../common_util":3,"../plots/boxwhisker":40,"../taskqueue":53,lodash:"lodash","react/addons":"react/addons"}],33:[function(e,t,a){"use strict";var r=e("react/addons"),n=e("../plots"),s=e("../common_util"),i=e("../taskqueue"),o=e("../common_controls");t.exports={View:r.createClass({mixins:[o.AsyncState],getInitialState:function(e){return e||(e=this.props),{extrema:e.ipython?e.extrema:{},domainToShow:e.ipython?e.domainToShow:{},xLabel:e.selected_variable.view_params.x,yLabel:e.selected_variable.view_params.y,width:500,height:500,shouldShowStopDownload:!1,pointsLoaded:e.ipython?e.pointsLoaded:0,binData:e.ipython?e:{}}},updateAsyncState:function(e){this.setState({numValues:e.selected_variable.descriptives.rows});var t=s.tryGetProperty(e,["selected_variable","view_params"]),a=s.tryGetProperty(t,"x"),r=s.tryGetProperty(t,"y");a&&r&&this.addTask(new i.ProgressTask("/bins",".bins()",function(e){this.setState({shouldShowStopDownload:!e.complete,binData:e,extrema:e.extrema,pointsLoaded:e.pointsLoaded,domainToShow:e.domainToShow})}.bind(this)))},cancelTasks:function(){this.cancelAllTasks(),this.setState({shouldShowStopDownload:!1})},render:function(){var e=null,t=null,a=null;return null==this.state.extrema.minX||null==this.state.domainToShow.minX||null==this.state.binData.bins?r.createElement("div",null," "):(this.state.shouldShowStopDownload&&(t=r.createElement("p",null,"Rows Loaded: ",this.state.pointsLoaded),e=r.createElement("button",{className:"canvas-scatter-stopDownloadButton",type:"button",onClick:this.cancelTasks,style:{color:"red"}},"Stop Retrieving Data"),a=r.createElement("br",null)),r.createElement("div",null,t,e,a,r.createElement("div",{className:"canvas-scatter-title",style:{width:this.state.width,paddingLeft:(this.state.width-325)/2,marginLeft:75}}),r.createElement(n.Heatmap,{bins:this.state.binData.bins,binWidth:this.state.binData.binWidth,binHeight:this.state.binData.binHeight,extrema:this.state.extrema,domainToShow:this.state.domainToShow,xLabel:this.state.xLabel,yLabel:this.state.yLabel,width:this.state.width,height:this.state.height,numValues:this.state.numValues,selectVariable:this.props.selectVariable,plotName:this.props.selected_variable.name[0],ipython:this.props.ipython})))}})}},{"../common_controls":2,"../common_util":3,"../plots":36,"../taskqueue":53,"react/addons":"react/addons"}],34:[function(e,t,a){"use strict";function r(e){e.seriesArray[0].data.length<p;return{tooltip:{trigger:"item",showDelay:0,hideDelay:0,showContent:!0,transitionDuration:0,axisPointer:{type:"shadow"},backgroundColor:"rgba(50,50,50,0.8)",formatter:function(t){var a=t.seriesName,r=t.data,n=i.mapValues(r,h);return"Model: "+a+"<br/>"+e.xLabel+": "+n[0]+"<br/>"+e.yLabel+": "+n[1]+"<br/>"+(e.zLabel?e.zLabel+" at "+n[2]:"")}},xAxis:[{axisLabel:{show:!0,interval:"auto",rotate:0,margin:8,formatter:function(e){return h(e)}}}],yAxis:[{axisLabel:{show:!0,interval:"auto",margin:8,formatter:function(e){return h(e)}}}]}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},s=e("react/addons"),i=e("lodash"),o=e("../common_util"),l=e("../plots/line").Line,c=e("dato-echarts").config,d=e("../echart_components/color_brewer"),u=e("color"),p=100,h=i.partial(o.roundToXDecimalPlaces,3);t.exports=s.createClass({displayName:"exports",propTypes:{seriesArray:s.PropTypes.array.isRequired,xLabel:s.PropTypes.string.isRequired,yLabel:s.PropTypes.string.isRequired,zLabel:s.PropTypes.string,onSeriesSelect:s.PropTypes.func},getInitialState:function(){return{highlighted:null}},componentWillReceiveProps:function(e){this.setState({options:this.calculateOptions(e)})},calculateOptions:function(e){var t=this.makeOptions(e.seriesArray),a=this.makeHighlightOptions(this.state.highlighted);return i.merge(r(e),t,a)},makeColorSeries:function(e){var t=this.props.seriesArray;if(void 0===e&&(e="Set2"),void 0!==t){var a=t.length;a=3>a?3:a,a=a>8?8:a;var r=d[e][a],n={};return t.map(function(e,t){{var s=e.name;e.data}n[s]=r[t%a]}),n}},makeHighlightOptions:function(e){var t=this;if(e){var a=function(){var a={series:[],legend:{data:[]}},r=t.makeColorSeries();return t.props.seriesArray.forEach(function(t){var n=t.name,s=(t.data,{fontFamily:"Arial",fontSize:12,fontStyle:"normal",fontWeight:"normal"}),i={normal:{}};n===e?(s.fontStyle="bold",i.normal.color=u(r[n]).alpha(1).rgbaString()):(s.fontStyle="normal",i.normal.color=u(r[n]).alpha(.2).rgbaString());var o={name:n,textStyle:s},l={name:n,type:"line",itemStyle:i};a.legend.data.push(o),a.series.push(l)}),{v:a}}();if("object"==typeof a)return a.v}return{}},makeOptions:function(e){var t={series:[],legend:{data:[],selectedMode:"highlight"}},a=this.makeColorSeries();return e.forEach(function(e){var r=e.name,n=e.data,s={showAllSymbol:n.length<p,symbol:"circle",type:"line"};s.name=r,s.itemStyle={normal:{},emphasis:{}},s.itemStyle.normal.color=a[r],t.legend.data.push(r),t.series.push(s)}),t},hilightEventHandler:function(e){var t=e.highlighted;this.setState({highlighted:t},function(){this.props.onSeriesSelect&&this.props.onSeriesSelect({name:t})})},render:function(){var e=this.calculateOptions(this.props);return s.createElement(l,n({plotOption:e,events:[{name:c.EVENT.LEGEND_HIGHLIGHTED,func:this.hilightEventHandler}]},this.props))}})},{"../common_util":3,"../echart_components/color_brewer":9,"../plots/line":45,color:"color","dato-echarts":"dato-echarts",lodash:"lodash","react/addons":"react/addons"}],35:[function(e,t,a){"use strict";var r,n=e("react/addons"),s=e("lodash"),i=e("../taskqueue"),o=e("../common_controls"),l=e("../plots/scatter").Scatter,c=e("../plots/line").Line,d=e("../common_util"),u=n.createClass({displayName:"View",mixins:[o.AsyncState],propTypes:{data:n.PropTypes.array,ipython:n.PropTypes.bool,selected_variable:n.PropTypes.object.isRequired},getInitialState:function(e){var t=this,a=[];if(e||(e=this.props),e.ipython)try{!function(){var r=t.props.selected_variable.view_params.x,n=t.props.selected_variable.view_params.y,s=t.props.selected_variable.columns.find(function(e){return e.name===r}).dtype,i=t.props.selected_variable.columns.find(function(e){return e.name===n}).dtype,o=d.dataTransform(s,i);a=e.data.map(o)}()}catch(r){console.log(r)}return{data:a,xLabel:e.selected_variable.view_params.x,yLabel:e.selected_variable.view_params.y,width:809,height:500}},updateAsyncState:function(e){this.updateData()},updateData:function(){var e=this,t=[];try{!function(){var a=e.props.selected_variable.columns.find(function(t){return t.name===e.state.xLabel}).dtype,n=e.props.selected_variable.columns.find(function(t){return t.name===e.state.yLabel}).dtype,s=d.dataTransform(a,n);t.push(new i.ProgressTask("/scatter_values",".values()",function(e){var t=e.data.map(s);this.setState({data:t})}.bind(e))),r=new i.MultiTask(t),e.addTask(r)}()}catch(a){console.log(a)}},getDefaultProps:function(){return{lineGraph:!1}},render:function(){if(null===this.state.data||0===this.state.data.length)return n.createElement("div",null,"Not enough data to show a scatter plot. Scatter plot requires at least two numerical columns and at least one value.");var e=this.state.xLabel+" vs. "+this.state.yLabel;if(this.props.lineGraph){var t=s(this.state.data).sortBy(function(e){return e[0]}).value();return n.createElement(c,{seriesArray:[{name:e,data:t}],xLabel:this.state.xLabel,yLabel:this.state.yLabel,height:this.state.height,width:this.state.width})}return n.createElement(l,{seriesArray:[{name:e,data:this.state.data}],xLabel:this.state.xLabel,yLabel:this.state.yLabel,height:this.state.height,width:this.state.width,showZoom:!1})}});t.exports={"Line Chart":n.createClass({getDefaultProps:function(){return{lineGraph:!0}},render:function(){return n.createElement(u,this.props)}}),"Scatter Plot":n.createClass({render:function(){return n.createElement(u,this.props)}}),View:u}},{"../common_controls":2,"../common_util":3,"../plots/line":45,"../plots/scatter":47,"../taskqueue":53,lodash:"lodash","react/addons":"react/addons"}],36:[function(e,t,a){"use strict";for(var r=e("./common_util"),n=[e("./plots/frequency"),e("./plots/box"),e("./plots/boxes"),e("./plots/quantilehist"),e("./plots/graph"),e("./plots/scatter"),e("./plots/heatmap"),e("./plots/bar")],s={},i=n.length,o=0;i>o;o++)for(var l in n[o])n[o].hasOwnProperty(l)&&(r.assert(!(l in s)),s[l]=n[o][l]);t.exports=s},{"./common_util":3,"./plots/bar":37,"./plots/box":38,"./plots/boxes":39,"./plots/frequency":41,"./plots/graph":42,"./plots/heatmap":43,"./plots/quantilehist":46,"./plots/scatter":47}],37:[function(e,t,a){"use strict";var r=e("react/addons"),n=e("../echart_components/echart_mixin"),s=e("../echart_components/echart_utils"),i=8;t.exports={Bar:r.createClass({displayName:"Bar",mixins:[n],propTypes:{seriesArray:r.PropTypes.array.isRequired,categories:r.PropTypes.array.isRequired,height:r.PropTypes.number.isRequired,width:r.PropTypes.number.isRequired,xLabel:r.PropTypes.string,yLabel:r.PropTypes.string},componentWillReceiveProps:function(e){this.props.seriesArray.length!==e.seriesArray.length&&this.makeChartOptions(e)},makeDataSeries:function(e){return e.map(function(e,t){return{name:e.name,type:"bar",data:e.data,yAxisIndex:0}})},makeChartOptions:function(e){var t=e.seriesArray,a="Metrics",r=this.makeDataSeries(t),n=e.xLabel||"",o=e.yLabel||"",l=s.calculateZoomEnd(i,e.categories.length),c={title:{show:!0,text:"Statistics of "+n+" vs. "+o},animation:!1,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},toolbox:{show:!0,orient:"vertical",x:"right",y:"center",feature:{dataZoom:{show:!1},magicType:{show:!1},restore:{show:!1},saveAsImage:{show:!0,name:"bar_"+n+"_"+o,type:"png"}}},legend:{x:"right",orient:"horizontal",data:t.map(function(e){return e.name}),selected:{sum:!1,count:!0,max:!1,mean:!1,min:!1,std:!1,"var":!1}},xAxis:[{name:n,type:"category",data:e.categories,boundaryGap:!0,splitLine:{show:!1},axisTick:{onGap:!1}}],yAxis:[{name:a,type:"value"}],series:r,dataZoom:{show:Boolean(e.showZoom)&&Boolean(r[0].data.length),realtime:!0,start:0,end:l}};return c}})}},{"../echart_components/echart_mixin":10,"../echart_components/echart_utils":11,"react/addons":"react/addons"}],38:[function(e,t,a){"use strict";{var r=e("react/addons"),n=e("d3"),s=e("../common_util");e("../common_controls")}t.exports={BoxAndWhisker:r.createClass({displayName:"BoxAndWhisker",transformData:function(e,t,a){for(var r=e.quantile,n=r[0],s=r[25],i=r[50],o=r[75],l=r[100],c=o-s,d=Math.max(n,s-1.5*c),u=Math.min(l,o+1.5*c),p=[],h=[],m=0;m<r.length;m++)r[m]<d&&p.push(r[m]),r[m]>u&&h.push(r[m]);return{minValue:n,maxValue:l,lowOutliers:p,highOutliers:h,lowWhisker:{low:d,high:s},highWhisker:{low:o,high:u},lowBox:{low:s,high:i},highBox:{low:i,high:o},median:{value:i}}},calculateScales:function(e,t,a){var r=n.scale.linear().domain([0,1]).range([0,t.height]),s=n.scale.linear().domain([t.minValue,t.maxValue]).range([10,t.width-10]),i=r,o=n.scale.linear().domain([0,t.maxValue-t.minValue]).range([0,t.width-20]).clamp(!0);return{x:s,y:r,width:o,height:i}},render:function(){var e=null!==s.tryGetProperty(this.props.data,"quantile",null),t=s.tryGetProperty(this.props,"is_inside_svg",!1);if(!e)return t?r.createElement("div",null):r.createElement("g",null);var a=s.tryGetProperty(this.props,"width",152);this.props.vertical&&(a*=6);var n=a/6,i={width:a,height:this.props.vertical?a:n},o=this.props.vertical?"rotate(270deg) translateX(-"+a+"px) translateY("+a/4+"px)":"",l=this.props.vertical?{transform:o,WebkitTransform:o}:{},c={width:a,height:n,maxValue:s.tryGetProperty(this.props,"max_value",this.props.data.max),minValue:s.tryGetProperty(this.props,"min_value",this.props.data.min)},d=this.transformData(this.props.data,c,this.states),u=this.calculateScales(this.props.data,c,this.states),p=r.createElement("g",{className:"BoxAndWhisker",style:l},r.createElement("g",{className:"lowOutliers"},d.lowOutliers.map(function(e,t){return r.createElement("circle",{key:t,cx:u.x(e),cy:u.y(.5),r:2.5,fill:"#85bd00"})})),r.createElement("g",{className:"lowWhisker"},function(e){return r.createElement("g",null,r.createElement("line",{x1:u.x(e.low),x2:u.x(e.low),y1:u.y(0),y2:u.y(1),className:"canvas-boxplot-end"}),r.createElement("line",{x1:u.x(e.low),x2:u.x(e.high),y1:u.y(.5),y2:u.y(.5),className:"canvas-boxplot-line"}))}(d.lowWhisker)),r.createElement("g",{className:"lowBox"},function(e){return r.createElement("rect",{x:u.x(e.low),width:u.width(e.high-e.low),y:u.y(.05),height:u.height(.9),fill:"#85bd00"})}(d.lowBox)),r.createElement("g",{className:"median"},function(e){return r.createElement("rect",{x:u.x(e.value)-.5,width:2,y:u.y(.05),height:u.height(.9),fill:"#fff"})}(d.median)),r.createElement("g",{className:"highBox"},function(e){return r.createElement("rect",{x:u.x(e.low),width:u.width(e.high-e.low),y:u.y(.05),height:u.height(.9),fill:"#85bd00"})}(d.highBox)),r.createElement("g",{className:"highWhisker"},function(e){return r.createElement("g",null,r.createElement("line",{x1:u.x(e.high),x2:u.x(e.high),y1:u.y(0),y2:u.y(1),className:"canvas-boxplot-end"}),r.createElement("line",{x1:u.x(e.low),x2:u.x(e.high),y1:u.y(.5),y2:u.y(.5),className:"canvas-boxplot-line"}))}(d.highWhisker)),r.createElement("g",{className:"highOutliers"},d.highOutliers.map(function(e,t){return r.createElement("circle",{key:t,cx:u.x(e),cy:u.y(.5),r:2.5,fill:"#85bd00"})})));return t?p:r.createElement("div",{className:"canvas-plot-boxandwhisker"},r.createElement("svg",{style:i},p))}})}},{"../common_controls":2,"../common_util":3,d3:"d3","react/addons":"react/addons"}],39:[function(e,t,a){"use strict";var r=e("react/addons"),n=e("./box"),s=(e("d3"),e("../common_util")),i=e("../common_controls");t.exports={BoxAndWhiskerArray:r.createClass({displayName:"BoxAndWhiskerArray",mixins:[i.Tooltip],render:function(){var e=null!==s.tryGetProperty(this.props.data,"quantile",null),t=s.tryGetProperty(this.props,"is_inside_svg",!1);if(!e)return t?r.createElement("div",null):r.createElement("g",null);var a=s.tryGetProperty(this.props,"width",152),i=s.tryGetProperty(this.props,"height",100),o=this.props.data.subsketch_keys.length,l=a,c=i/o,d=c-2,u={width:a,height:i},p=n.BoxAndWhisker,h=r.createElement("g",{className:"BoxAndWhiskerArray"},this.props.data.subsketches.map(function(e,t){return r.createElement("g",{transform:"translate(0,"+(t*c+1)+")"},r.createElement(p,{data:e,width:l,height:d,is_inside_svg:!0,min_value:this.props.data.min,max_value:this.props.data.max}))},this)),m=this.tooltipMouseOver.bind(this,r.createElement("table",{className:"canvas-sframe-boxplot-tooltip"},[0,1,2,25,50,75,98,99,100].map(function(e){var t=this.props.data.quantile;return r.createElement("tr",{key:e},r.createElement("td",null,"quantile(",e/100,"):"),r.createElement("td",null,s.formatNumber(t[e])))}.bind(this)))),f=this.tooltipMouseOut;return t?h:r.createElement("div",{className:"canvas-plot-boxandwhiskerarray"},r.createElement("svg",{style:u,onMouseOver:m,onMouseOut:f},h),this.getTooltip())}})}},{"../common_controls":2,"../common_util":3,"./box":38,d3:"d3","react/addons":"react/addons"}],40:[function(e,t,a){"use strict";var r=e("react/addons"),n=e("../echart_components/echart_mixin"),s=e("../echart_components/echart_utils"),i=e("../common_util"),o=8;t.exports={BoxWhisker:r.createClass({displayName:"BoxWhisker",mixins:[n],propTypes:{seriesArray:r.PropTypes.array.isRequired,categories:r.PropTypes.array.isRequired,height:r.PropTypes.number.isRequired,width:r.PropTypes.number.isRequired,xLabel:r.PropTypes.string,yLabel:r.PropTypes.string,showZoom:r.PropTypes.bool},makeDataSeries:function(e){return e.map(function(e,t){return{name:e.name,type:"boxwhisker",data:e.data}})},makeChartOptions:function(e){function t(e){var t=i.formatNumber;return"1st percentile: "+t(e[0].data[2])+"<br>25th percentile: "+t(e[0].data[0])+"<br>50th percentile: "+t(e[0].data[4])+"<br>75th percentile: "+t(e[0].data[1])+"<br>99th percentile: "+t(e[0].data[3])}var a=this.makeDataSeries(e.seriesArray),r=e.xLabel||"",n=e.yLabel||"",l=s.calculateZoomEnd(o,e.categories.length),c={animation:!1,tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:t},toolbox:{feature:{dataZoom:{show:!1},restore:{show:!1},saveAsImage:{show:!0,name:"boxwhisker_"+r+"_"+n,type:"png"}}},xAxis:[{name:r,type:"category",data:e.categories,boundaryGap:!0,splitLine:{show:!1},axisTick:{onGap:!1}}],yAxis:[{name:n,type:"value",scale:!0,boundaryGap:[.01,.01]}],series:a,dataZoom:{show:Boolean(e.showZoom)&&Boolean(a[0].data.length),realtime:!0,start:0,end:l}};return c}})}},{"../common_util":3,"../echart_components/echart_mixin":10,"../echart_components/echart_utils":11,"react/addons":"react/addons"}],41:[function(e,t,a){"use strict";var r=e("react/addons"),n=e("d3"),s=e("../common_util"),i=e("../common_controls");t.exports={Frequency:r.createClass({displayName:"Frequency",mixins:[i.Tooltip],getInitialState:function(){return{hover:null}},getDefaultProps:function(){return{aspectRatio:3,maxValues:30,width:152,onItemClick:null,highlightElement:null}},onMouseOver:function(e,t,a){this.tooltipMouseOver(r.createElement("span",null,s.formatSArrayValue(t.value.value),": ",s.formatNumber(t.value.frequency)," (",s.formatNumber(t.value.frequency/this.props.data.size*100),"%)"),a),this.setState({hover:e}),"onItemHover"in this.props&&this.props.onItemHover(e)},onMouseOut:function(e){this.tooltipMouseOut(e),this.setState({hover:null}),"onItemHover"in this.props&&this.props.onItemHover(null)},render:function(){var e=this.props.aspectRatio,t=[];t="frequent_items"in this.props.data&&Object.keys(this.props.data.frequent_items).length>0?s.sortFrequentItems(this.props.data.frequent_items,this.props.maxValues):[{key:"",value:0}];var a=n.scale.linear().domain([0,t.length]).range([0,e]),i=n.scale.linear().domain([0,t[0].value.frequency]).range([0,1]),o=e/t.length-.01*e,l=[0,0,e,1].join(" "),c="hover"in this.props?this.props.hover:this.state.hover;return r.createElement("div",null,r.createElement("svg",{viewBox:l,width:this.props.width,height:this.props.width/this.props.aspectRatio},t.map(function(e,n){var s=null===this.props.highlightElement||this.props.highlightElement===e.key?1:.3,l=this.props.disabled||null===this.props.onItemClick?null:this.props.onItemClick.bind(null,e.key);return r.createElement("g",{key:n},r.createElement("rect",{width:o,height:i(t[0].value.frequency),x:a(n),y:1-i(t[0].value.frequency),onMouseOver:this.onMouseOver.bind(this,n,e),onMouseOut:this.onMouseOut,fill:"#fff"}),r.createElement("rect",{fill:c===n?"#ff5500":"#0a8cc4",width:o,height:i(e.value.frequency),x:a(n),y:1-i(e.value.frequency),onMouseOver:this.onMouseOver.bind(this,n,e),
onMouseOut:this.onMouseOut,onClick:l,style:{opacity:s,cursor:null===l?"default":"pointer",transition:"opacity 0.3s ease"}}))}.bind(this))),this.getTooltip())}})}},{"../common_controls":2,"../common_util":3,d3:"d3","react/addons":"react/addons"}],42:[function(e,t,a){"use strict";var r=e("react/addons"),n=(e("dagre"),e("d3")),s=e("../common_util"),i=(e("../common_controls"),600),o=50,l=r.createClass({displayName:"Edge",render:function(){for(var e=this.props.edge,t=[],a=0;a<e.points.length-1;a++){var n=e.points[a],s=e.points[a+1],i=this.props.scaleX(n[0]),o=this.props.scaleY(n[1]),l=this.props.scaleX(s[0]),c=this.props.scaleY(s[1]),d={key:a,x1:i,y1:o,x2:l,y2:c,style:{stroke:this.props.ecolor,strokeWidth:this.props.ewidth}},u=r.DOM.line(d);if(t.push(u),this.props.arrows&&a==e.points.length-2){var p=l-i,h=c-o,m=h/p,f=5*this.props.ewidth,b=Math.sqrt(p*p+h*h),g=2*f/b,y=(this.props.vertexRadius-2)/b,v=[l-p*y,c-h*y],w=[v[0]-p*g,v[1]-h*g],E=Math.sqrt(f*f*m*m/(m*m+1)),_=-1/m*E,x=[w[0]+E,w[1]+_],S=[w[0]-E,w[1]-_],k=[v,x,S];k=k.map(function(e){return e.join(",")}).join(" "),t.push(r.createElement("polygon",{key:"arrow",points:k,fill:this.props.ecolor,strokeWidth:0}))}}return r.createElement("g",{onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut},t)}}),c=r.createClass({displayName:"Vertex",render:function(){var e=this.props.scaleX(this.props.vertex.x),t=this.props.scaleY(this.props.vertex.y);s.assert(e>=0),s.assert(t>=0);var a=this.props.vcolor;this.props.vertex.value in this.props.highlight&&(a=this.props.highlight[this.props.vertex.value]);var n={onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut,r:this.props.vertexRadius,cx:e,cy:t,style:{fill:a}};return r.DOM.circle(n)}}),d=r.createClass({displayName:"Label",render:function(){return r.createElement("g",null,r.createElement("text",{x:this.props.x,y:this.props.y,style:{textAnchor:"middle",fill:"white",stroke:"white",strokeWidth:5,opacity:.9}},this.props.text),r.createElement("text",{x:this.props.x,y:this.props.y,style:{textAnchor:"middle",fill:"black"}},this.props.text))}}),u={forceDirected:function(e,t){for(var a=n.layout.force().nodes(e).links(t).charge(-60).linkDistance(20).start(),r=0;a.alpha()>0&&1e3>r;r++)a.tick();return a.stop(),a.links().map(function(e){e.points=[[e.source.x,e.source.y],[e.target.x,e.target.y]]}),{vertices:a.nodes(),edges:a.links()}}};t.exports={GraphLayout:r.createClass({displayName:"GraphLayout",statics:{layoutAlgorithms:u,layout:function(e){var t=function(t){var a=e.vertices.indexOf(t);return s.assert(-1!=a),a};return e.layoutAlgorithm(e.vertices.map(function(t,a){return{value:t,label:null!==e.vlabels?e.vlabels[a]:null}}),e.edges.map(function(a,r){return{source:t(a[0]),target:t(a[1]),label:null!==e.elabels?e.elabels[r]:null}}))}},getDefaultProps:function(){return{layoutAlgorithm:this.layoutAlgorithms.forceDirected}},getInitialState:function(){return{graph:this.constructor.layout(this.props),vertexHover:null,edgeHover:null}},componentWillReceiveProps:function(e){this.setState({graph:this.constructor.layout(e)})},onVertexMouseOver:function(e){this.setState({vertexHover:e})},onVertexMouseOut:function(){this.setState({vertexHover:null})},onEdgeMouseOver:function(e){this.setState({edgeHover:e})},onEdgeMouseOut:function(){this.setState({edgeHover:null})},render:function(){var e,t,a=this.props.node_size,u=this.state.graph,p=u.vertices.map(function(e){return e.x}),h=u.vertices.map(function(e){return e.y}),m=n.max(p)-n.min(p),f=n.max(h)-n.min(h),b=m/f;b>1?(e=n.scale.linear().domain([n.min(p),n.max(p)]).range([o,i-o]),t=n.scale.linear().domain([n.min(h),n.max(h)]).range([o,(i-o)/b])):(e=n.scale.linear().domain([n.min(p),n.max(p)]).range([o,(i-o)*b]),t=n.scale.linear().domain([n.min(h),n.max(h)]).range([o,i-o]));var g=n.max(h.map(t)),y=function(e){return i-o-(i-2*o-g+t(e))};return r.createElement("div",null,r.createElement("svg",{width:i,height:i},u.edges.map(function(t,n){return r.createElement(l,{key:n,edge:t,ewidth:this.props.ewidth,ecolor:this.props.ecolor,scaleX:e,scaleY:y,arrows:this.props.arrows,vertexRadius:a,onMouseOver:this.onEdgeMouseOver.bind(null,n),onMouseOut:this.onEdgeMouseOut})},this),u.vertices.map(function(t,n){return r.createElement(c,{key:n,vertex:t,vertexRadius:a,vcolor:this.props.vcolor,highlight:this.props.highlight,scaleX:e,scaleY:y,onMouseOver:this.onVertexMouseOver.bind(null,n),onMouseOut:this.onVertexMouseOut})},this),this.props.elabels.map(function(t,a){return this.props.elabel_hover&&this.state.edgeHover!==a?null:r.createElement(d,{key:a,x:e(n.mean(u.edges[a].points.map(function(e){return e[0]}))),y:y(n.mean(u.edges[a].points.map(function(e){return e[1]}))),text:"number"==typeof t?s.formatNumber(t):t})},this),this.props.vlabels.map(function(t,a){return this.props.vlabel_hover&&this.state.vertexHover!==a?null:r.createElement(d,{key:a,x:e(u.vertices[a].x)+this.props.h_offset*i,y:y(u.vertices[a].y)-this.props.v_offset*i,v_offset:this.props.v_offset,h_offset:this.props.h_offset,text:"number"==typeof t?s.formatNumber(t):t})},this)))}})}},{"../common_controls":2,"../common_util":3,d3:"d3",dagre:"dagre","react/addons":"react/addons"}],43:[function(e,t,a){"use strict";function r(e,t,a,r){for(var n=a-1;a+1>=n;n++)if(!(0>n||n>=e.length))for(var s=r-1;r+1>=s;s++)0>s||s>=e[a].length||(e[n][s]+=t)}var n=e("react/addons"),s=e("d3"),i=e("../common_util"),o=e("../common_controls"),l=e("../echart_components/echart_utils"),c=["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],d=s.scale.quantize().domain([0,1]).range(c),u=75,p=10,h=10,m=1,f=function(e){return s.format(".3g")(e).length>7?s.format(".1g")(e):s.format(".3g")(e)},b=Math.pow(10,6),g=function(e){return l.isArrayIntegers(e)?e.some(function(e){return e>=b})?f:l.isExtentDateish(s.extent(e))?function(e){return parseInt(e,10)}:function(e){return e.toLocaleString()}:f},y=n.createClass({displayName:"AxisLabel",handleClick:function(e){var t=[this.props.plotName,this.props.name];this.props.selectVariable(t)},render:function(){var e=this.props.ipython?this.props.name:n.createElement("a",{href:"javascript:",onClick:this.handleClick},this.props.name);return n.createElement("span",{className:"canvas-heatmap-axesLabel",style:{position:"absolute",top:""+this.props.y+"px",left:""+this.props.x+"px",width:""+this.props.width+"px"}},e)}}),v=n.createClass({displayName:"CanvasFrame",drawFrame:function(e){e.fillStyle="#000000",e.fillRect(u,u,this.props.width,this.props.height),e.fillStyle=d(0),e.fillRect(m+u,m+u,this.props.width-2*m,this.props.height-2*m)},drawTicksAndGrid:function(e){var t=void 0;e.lineWidth=1,e.fillStyle="#333333",t=g(this.props.xScale.ticks());for(var a=0;a<this.props.xScale.ticks().length;a++){var r=this.props.xScale.ticks()[a];this.props.gridlinesVisible&&(e.strokeStyle="#404053",e.beginPath(),e.moveTo(u+this.props.xScale(r),u),e.lineTo(u+this.props.xScale(r),u+this.props.height),e.stroke()),e.strokeStyle="#404053",e.beginPath(),e.moveTo(u+this.props.xScale(r),u+this.props.height-h),e.lineTo(u+this.props.xScale(r),u+this.props.height+h),e.stroke(),e.font="12px Helvetica",e.fillText(t(r),u+this.props.xScale(r)-p/2,u+this.props.height+2*h)}t=g(this.props.yScale.ticks());for(var a=0;a<this.props.yScale.ticks().length;a++){var n=this.props.yScale.ticks()[a];this.props.gridlinesVisible&&(e.strokeStyle="#404053",e.beginPath(),e.moveTo(u,u+this.props.yScale(n)),e.lineTo(u+this.props.width,u+this.props.yScale(n)),e.stroke()),e.strokeStyle="#404053",e.beginPath(),e.moveTo(u-p,u+this.props.yScale(n)),e.lineTo(u+p,u+this.props.yScale(n)),e.stroke(),e.font="12px Helvetica",e.fillText(t(n),u/3,u+this.props.yScale(n))}},drawAxis:function(e){e.lineWidth=1;var t=this.props.xScale(0);0>t?t=0:t>this.props.width&&(t=this.props.width),t+=u,e.strokeStyle="#000000",e.beginPath(),e.moveTo(t-1,u),e.lineTo(t-1,u+this.props.height),e.stroke();var a=this.props.yScale(0);0>a?a=0:a>this.props.height&&(a=this.props.height),a+=u,e.strokeStyle="#000000",e.beginPath(),e.moveTo(u,a+1),e.lineTo(u+this.props.width,a+1),e.stroke()},drawBins:function(e){for(var t=this.props.xScale(this.props.binWidth)-this.props.xScale(0),a=this.props.yScale(0)-this.props.yScale(this.props.binHeight),r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,s=0;s<this.props.bins.length;s++)for(var i=0;i<this.props.bins[s].length;i++)this.props.bins[s][i]>r?r=this.props.bins[s][i]:this.props.bins[s][i]<n&&(n=this.props.bins[s][i]);this.props.heatScale.domain([n,r]).range([0,1]),this.props.heatScale.clamp()&&0===n&&this.props.heatScale.domain([1e-5,r]);for(var s=0;s<this.props.bins.length;s++)for(var i=0;i<this.props.bins[s].length;i++){var o=this.props.bins[s][i],l=this.props.xScale(this.props.binningDomain.minX+s*this.props.binWidth)+u,c=this.props.yScale(this.props.binningDomain.maxY-i*this.props.binHeight)+u;if(!(u-t>l||l>u+this.props.width||u-a>c||c>u+this.props.height)){var p=t,h=a;u>l&&(l=u),c>u+this.props.height-a&&(h=u+this.props.height-c),l>u+this.props.width-t&&(p=u+this.props.width-l),u>c&&(c=u);var m=this.props.heatScale(o);e.fillStyle=d(m),e.fillRect(l,c,p,h)}}},drawGradientScale:function(e){var t=25,a=200,r=75,n=6,s=e.createLinearGradient(this.props.width+u+5,r,this.props.width+u+30,275),i=c.length-1;c.forEach(function(e,t){s.addColorStop(1-t/i,e)}),e.fillStyle=s,e.fillRect(this.props.width+u+5,r,t,a),e.font="12px Helvetica",e.strokeStyle="#444444",e.fillStyle="#444444";var o=[0,.5,1].map(this.props.heatScale.invert).map(function(e){return parseInt(e,10)}),l=g(o),d=!0,p=!1,h=void 0;try{for(var m,f=o[Symbol.iterator]();!(d=(m=f.next()).done);d=!0){var b=m.value;(isNaN(b)||1e-4>b)&&(b=0);var y=this.props.width+u+t+n,v=(1-this.props.heatScale(b))*a+r;e.fillText(l(b),y,v)}}catch(w){p=!0,h=w}finally{try{!d&&f["return"]&&f["return"]()}finally{if(p)throw h}}e.fillText("point density",this.props.width+u,50)},draw:function(e){this.drawFrame(e),this.drawBins(e),this.drawTicksAndGrid(e),this.drawAxis(e),this.drawGradientScale(e)},componentDidMount:function(){var e=n.findDOMNode(this).getContext("2d");this.draw(e)},componentDidUpdate:function(){var e=n.findDOMNode(this).getContext("2d");e.clearRect(0,0,this.props.width+2*u,this.props.height+2*u),this.draw(e)},render:function(){return n.createElement("canvas",{className:"canvas-heatmap-canvas",width:this.props.width+2*u,height:this.props.height+2*u})}});t.exports={Heatmap:n.createClass({displayName:"Heatmap",getDefaultProps:function(){return{bins:[],binWidth:10,binHeight:10,width:500,height:500,extrema:{minX:0,maxX:10,minY:0,maxY:10},xLabel:"",yLabel:"",numValues:0}},getInitialState:function(){return{heatScale:s.scale.linear(),gridlinesVisible:!0,blurAmount:1,shouldShowBlur:!0}},toggleGridlines:function(){this.setState({gridlinesVisible:!this.state.gridlinesVisible})},changeBlur:function(e){var t=e.target.value;this.setState(0===t?{shouldShowBlur:!1}:{shouldShowBlur:!0}),this.setState({blurAmount:t})},changeHeatFunction:function(e){var t=e.target.value;"linear"===t?this.setState({heatScale:s.scale.linear()}):"log"===t?this.setState({heatScale:s.scale.log().clamp(!0)}):"quadratic"===t?this.setState({heatScale:s.scale.pow().exponent(2)}):"sqrt"===t&&this.setState({heatScale:s.scale.sqrt()})},render:function(){var e=4,t=i.deepCopy(this.props.bins);if(this.state.shouldShowBlur){for(var a=0;e>a;a++)for(var l=i.deepCopy(t),c=0;c<t.length;c++)for(var d=0;d<t[c].length;d++)r(t,this.state.blurAmount*l[c][d]/250,c,d);for(var m=0,c=0;c<t.length;c++)for(var d=0;d<t[c].length;d++)m+=t[c][d];for(var f=0,c=0;c<this.props.bins.length;c++)for(var d=0;d<this.props.bins[c].length;d++)f+=this.props.bins[c][d];for(var c=0;c<t.length;c++)for(var d=0;d<t[c].length;d++)Math.round(t[c][d]*=f/m)}h=this.props.height/50,p=this.props.width/50;var b=this.props.domainToShow.minX,g=this.props.domainToShow.minY,w=this.props.domainToShow.maxX,E=this.props.domainToShow.maxY,_=s.scale.linear().domain([b,w]).range([0,this.props.width]),x=s.scale.linear().domain([g,E]).range([this.props.height,0]),S=o.Slider;return n.createElement("div",{className:"canvas-heatmap-frame"},n.createElement(v,{className:"canvas-heatmap-canvasFrame",width:this.props.width,height:this.props.height,xScale:_,yScale:x,heatScale:this.state.heatScale,bins:t,originalBins:this.props.bins,binWidth:this.props.binWidth,binHeight:this.props.binHeight,binningDomain:this.props.extrema,numValues:this.props.numValues,gridlinesVisible:this.state.gridlinesVisible,shouldShowBlur:this.state.shouldShowBlur}),n.createElement("input",{className:"canvas-heatmap-toggleButton",type:"checkbox",name:"gridlineToggle",onChange:this.toggleGridlines,style:{position:"absolute",top:""+(this.props.height+2*u+25)/2+"px",left:""+(this.props.width+2*u)+"px"}}),n.createElement("p",{className:"canvas-heatmap-toggleLabel",style:{position:"absolute",top:""+(this.props.height+2*u+25)/2+"px",left:""+(this.props.width+2.25*u)+"px",width:"200px"}},"Hide Gridlines"),n.createElement(S,{label:"blur",min:0,max:100,value:this.state.blurAmount,onChange:this.changeBlur}),n.createElement("select",{className:"canvas-heatmap-changeFunction",type:"checkbox",name:"functionSelect",onChange:this.changeHeatFunction,style:{position:"absolute",top:""+(this.props.height+2*u-25)/2+"px",left:""+(this.props.width+2*u)+"px"}},n.createElement("option",{value:"linear"},"Linear"),n.createElement("option",{value:"quadratic"},"Quadratic"),n.createElement("option",{value:"sqrt"},"Square Root"),n.createElement("option",{value:"log"},"Logarithmic")),n.createElement("p",{className:"canvas-heatmap-toggleLabel",style:{position:"absolute",top:""+(this.props.height+2*u-75)/2+"px",left:""+(this.props.width+2*u)+"px",width:"200px"}},"Heat Scaling Function"),[{name:this.props.xLabel,x:u,y:this.props.height+1.5*u,width:this.props.width},{name:this.props.yLabel,x:0,y:u/2.5,width:"auto"}].map(function(e,t){return n.createElement(y,{key:t,name:e.name,selectVariable:this.props.selectVariable,plotName:this.props.plotName,x:e.x,y:e.y,width:e.width,ipython:this.props.ipython})}.bind(this)))}})}},{"../common_controls":2,"../common_util":3,"../echart_components/echart_utils":11,d3:"d3","react/addons":"react/addons"}],44:[function(e,t,a){"use strict";var r=e("react/addons"),n=e("../echart_components/echart_mixin"),s=(e("../echart_components/echart_utils"),e("../common_util"));t.exports={Histogram:r.createClass({displayName:"Histogram",mixins:[n],propTypes:{seriesArray:r.PropTypes.array.isRequired,boundaries:r.PropTypes.array.isRequired,height:r.PropTypes.number.isRequired,width:r.PropTypes.number.isRequired,xLabel:r.PropTypes.string},componentWillReceiveProps:function(e){e!==this.props&&e&&e.seriesArray&&this.props.seriesArray.length!==e.seriesArray.length&&this.makeChartOptions(e)},makeDataSeries:function(e){return e.map(function(e,t){return{name:e.name,type:"bar",data:e.data}})},makeChartOptions:function(e){function t(t){var a=t[0].dataIndex,r=e.boundaries[a],n=e.boundaries[a+1],i=t[0].value,o="";return o=2>i?s.formatNumber(i)+" number":s.formatNumber(i)+" numbers",o+" between <br>"+s.formatNumber(r)+" <br>and "+s.formatNumber(n)}function a(e){return e>=1e7||-1e7>=e||e>0&&.001>e||0>e&&e>-.001}function r(e){return e.toExponential(3)}var n=this.makeDataSeries(e.seriesArray),i="Value of "+e.xLabel,o="Count of "+e.xLabel,l=e.boundaries.map(function(e,t,a){return t<a.length-1?(e+a[t+1])/2:void 0}).map(s.formatNumber);l.pop();var c={animation:!1,tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:t},toolbox:{show:!0,orient:"vertical",x:"right",y:"top",feature:{saveAsImage:{show:!0,name:"histogram_"+i,type:"png"}}},xAxis:[{name:i,type:"category",data:l,boundaryGap:!0,axisLabel:{rotate:45},splitLine:{show:!1},axisTick:{onGap:!1}}],series:n},d=n.map(function(e){return e.data.some(a)?{name:o,type:"log",axisLabel:{formatter:r}}:{name:o,type:"value"}});return c.yAxis=d,c}})}},{"../common_util":3,"../echart_components/echart_mixin":10,"../echart_components/echart_utils":11,"react/addons":"react/addons"}],45:[function(e,t,a){"use strict";var r=e("react/addons"),n=e("lodash"),s=e("../echart_components/echart_mixin"),i=e("../echart_components/echart_utils"),o=e("../common_util"),l=n.partial(o.roundToXDecimalPlaces,3),c={animation:!1,tooltip:{trigger:"axis",showDelay:0,axisPointer:{type:"cross"},formatter:function(e){return e.value.length>1?e.seriesName+"<br/>"+l(e.value[0])+"  "+l(e.value[1]):e.seriesName+"<br/>"+e.name+" : "+l(e.value)}},toolbox:{feature:{dataZoom:{show:!1},restore:{show:!1}}},xAxis:[{type:"value"}],yAxis:[{type:"value"}],dataZoom:{show:!1,realtime:!1}};t.exports={Line:r.createClass({displayName:"Line",mixins:[s],propTypes:{seriesArray:r.PropTypes.array.isRequired,markLineArray:r.PropTypes.array,height:r.PropTypes.number.isRequired,width:r.PropTypes.number.isRequired,plotOption:r.PropTypes.object,xLabel:r.PropTypes.string,yLabel:r.PropTypes.string,selectedDataIndex:r.PropTypes.number,selectedSeriesIndex:r.PropTypes.number,shouldShowSelected:r.PropTypes.bool,showZoom:r.PropTypes.bool,useTightExtents:r.PropTypes.bool,events:r.PropTypes.array},componentDidMount:function(){var e=this;this.props&&this.props.events&&this.props.events.forEach(function(t){var a=t.name,r=t.func;e.chart.on(a,r)})},componentWillUpdate:function(e){var t=this;e&&e.events&&(o.deepEquals(this.props.events,e.events)||e.events.forEach(function(e){var a=e.name,r=e.func;t.chart.on(a,r)}))},componentWillReceiveProps:function(e){(e.shouldShowSelected===!0||e.shouldShowSelected!==this.props.shouldShowSelected)&&this.updateChartTooltip(e),this.props.seriesArray.length!==e.seriesArray.length&&this.makeChartOptions(e)},updateChartTooltip:function(e){if(this.chart.delMarkPoint(this.props.selectedSeriesIndex,"hoverPoint"),e.shouldShowSelected){var t=this.props.seriesArray[e.selectedSeriesIndex].data[e.selectedDataIndex];return void this.chart.addMarkPoint(e.selectedSeriesIndex,{clickable:!1,symbol:"circle",symbolSize:6,data:[{xAxis:t[0],yAxis:t[1],name:"hoverPoint"}]})}},makeDataSeries:function(e){return e.map(function(e){return{name:e.name,type:"line",data:e.data,effect:{show:!1},showAllSymbol:!0}})},makeChartOptions:function(e){var t=n.cloneDeep(c),a=e.seriesArray,r=e.xLabel||"",s=e.yLabel||"";t.xAxis[0].name=r,t.yAxis[0].name=s;var o;o=void 0===e.useTightExtents?i.looseExtentsOptions(a):e.useTightExtents?i.tightExtentsOptions(a):i.looseExtentsOptions(a,e.useTightExtents),n.isEmpty(o)||(t=n.merge(t,o));var l=i.timeOptions(a),d=e.showZoom;n.isEmpty(l)||(t=n.merge(t,l),d=!0);var u=this.makeDataSeries(a);return t.series=u,e.markLineArray&&e.markLineArray.length&&e.markLineArray.forEach(function(e){t.series.push({name:e.name,type:"line",effect:{show:!1},data:e.data,itemStyle:{normal:{lineStyle:{color:"#bbb",type:"dashed"}}}})}),t.dataZoom.show=Boolean(d),t.toolbox.feature.restore.show=Boolean(d),t.toolbox.feature.saveAsImage={show:!0,name:"line_"+r+"_"+s,type:"png"},t=n.merge(t,e.plotOption)}})}},{"../common_util":3,"../echart_components/echart_mixin":10,"../echart_components/echart_utils":11,lodash:"lodash","react/addons":"react/addons"}],46:[function(e,t,a){"use strict";var r=e("react/addons"),n=e("d3"),s=e("../common_util"),i=e("../common_controls");t.exports={QuantileHistogram:r.createClass({displayName:"QuantileHistogram",mixins:[i.Tooltip],setScale:function(e,t){var a=t.target.value,r={};r[e]=a,this.setState({scale:s.merge(this.state.scale,r)})},setBinCount:function(e){this.setState({binCount:Number(e.target.value)})},getInitialState:function(){return{binCount:null,scale:{x:"linear",y:"linear"}}},render:function(){var e=this.props.quantile.slice();if(0===e.length)return r.createElement("div",null);for(var t=500,a=500,o=.75*t,l=.65*a,c=.175*t,d=.175*a,u=n.min(e),p=n.max(e),h=null!=this.state.binCount?this.state.binCount:this.props.starting_bins,m=n.scale[this.state.scale.x]().domain([1,h+1]).range([u,p]),f=[],b=0,g=0,y=0;h>y;y++){var v=(m(y+1),m(y+2));for(g=0;b<e.length-1&&n.mean([e[b],e[b+1]])<=v;)g++,b++;f.push(g)}s.assert(n.sum(f)===e.length-1);for(var w=n.max(f),E=n.scale.linear().domain([0,h]).range([c,c+o]),_=n.scale.linear().domain([0,w]).range([d,d+l]),x=n.scale.linear().domain([0,.01*w*this.props.rows]).range([d+l,d]),S=n.range(f.length+1),k=x.ticks(7),T=n.formatPrefix(p>2?p/2:p),C=s.siPrefixToShortScale(T.symbol),N=S.map(function(e,t){return{text:n.round(T.scale(m(e+1)),2),idx:t}});N.length>8;)N=N.filter(function(e,t){return t%2===0});var P=.01*w*this.props.rows,A=n.formatPrefix(P>2?P/2:P),M=s.siPrefixToShortScale(A.symbol),L=k.map(A.scale),O=[];O=O.concat.apply(O,f.map(function(e,t){return n.range(e).map(function(e){return[String(E(t))+"px",String(_(w-(e+1)))+"px"]}.bind(this))}.bind(this)));var D=i.Slider,R=function(e,t){var a=s.formatNumber(e),r=s.formatNumber(t);return a===r?" "+a:" between "+a+" and "+r}.bind(this);return r.createElement("div",{className:"canvas-quantile-histogram"},r.createElement("svg",{style:{width:t,height:a},preserveAspectRatio:"xMinYMin"},O.map(function(t,a){return r.createElement("rect",{className:"bar",key:a,width:o/h,height:l/w,x:0,y:0,style:{transform:"translate("+t.join(", ")+")",WebkitTransform:"translate("+t.join(", ")+")"},onMouseOver:this.tooltipMouseOver.bind(this,r.createElement("span",null,"Rows between the ",s.numberWithSuffix(a)," and ",s.numberWithSuffix(a+1)," quantiles have values approximately ",R(e[a],e[a+1]),".")),onMouseOut:this.tooltipMouseOut})}.bind(this)),r.createElement("rect",{x:c,y:d,width:o,height:l,fill:"none",className:"canvas-sarray-plot-axes"}),S.map(function(e,t){var a=E(e),n=l+d;return r.createElement("line",{key:t,x1:a,x2:a,y1:n,y2:n+8,className:"canvas-sarray-plot-axes"})}.bind(this)),N.map(function(e,t){return r.createElement("text",{key:t,x:E(e.idx),y:l+d+20,textAnchor:"middle",className:"canvas-histogram-label"},s.formatNumber(e.text))}.bind(this)),k.map(function(e,t){var a=x(e);return r.createElement("g",{key:t},r.createElement("line",{x1:c-8,x2:c,y1:a,y2:a,className:"canvas-sarray-plot-axes"}),r.createElement("text",{x:c-12,y:a+4,textAnchor:"end",className:"canvas-histogram-label"},s.formatNumber(L[t])))}.bind(this)),r.createElement("text",{x:c+o/2,y:40,textAnchor:"middle",className:"canvas-histogram-title"},"Histogram of quantiles"),r.createElement("text",{x:c,y:d-28,textAnchor:"end",className:"canvas-histogram-axis-title"},"Frequency"),r.createElement("text",{x:c,y:d-12,textAnchor:"end",className:"canvas-histogram-axis-subtitle"},M?"(in "+M+"s)":null)),r.createElement("div",{className:"canvas-histogram-x-axis"},r.createElement("div",null,r.createElement("span",null,this.props.selected_column," ")),r.createElement("div",null,C?"(in "+C+"s)":null)),r.createElement(D,{label:"bins",min:2,max:100,value:h,onChange:this.setBinCount}),this.getTooltip())}})}},{"../common_controls":2,"../common_util":3,d3:"d3","react/addons":"react/addons"}],47:[function(e,t,a){"use strict";var r=e("react/addons"),n=e("lodash"),s=e("../echart_components/echart_mixin"),i=e("../echart_components/echart_utils"),o=e("../common_util"),l=n.partial(o.roundToXDecimalPlaces,3),c=1999,d={tooltip:{trigger:"item",showDelay:0,backgroundColor:"rgba(0,0,0,0.7)",axisPointer:{show:!0,type:"line",lineStyle:{color:"#bbb",type:"dashed",width:1},crossStyle:{color:"#bbb",width:1,type:"dashed"}},textStyle:{color:"#fff"},formatter:function(e){return e.value.length>1?e.seriesName+"<br/>"+l(e.value[0])+"  "+l(e.value[1]):e.seriesName+"<br/>"+e.name+" : "+l(e.value)}},toolbox:{feature:{restore:{show:!1}}},xAxis:[{type:"value",scale:!0}],yAxis:[{type:"value",scale:!0}],dataZoom:{show:!1,realtime:!1}};t.exports={Scatter:r.createClass({displayName:"Scatter",mixins:[s],propTypes:{seriesArray:r.PropTypes.array.isRequired,height:r.PropTypes.number.isRequired,width:r.PropTypes.number.isRequired,xLabel:r.PropTypes.string,yLabel:r.PropTypes.string,showZoom:r.PropTypes.bool,plotOption:r.PropTypes.object,useTightExtents:r.PropTypes.bool},makeDataSeries:function(e){return e.map(function(e,t){return{name:e.name,type:"scatter",large:!0,largeThreshold:c,data:e.data}})},makeChartOptions:function(e){var t=n.cloneDeep(d),a=e.seriesArray,r=e.xLabel||"",s=e.yLabel||"";t.xAxis[0].name=r,t.yAxis[0].name=s;var o=void 0;o=e.useTightExtents?i.tightExtentsOptions(a):i.looseExtentsOptions(a,e.useTightExtents),n.isEmpty(o)||(t=n.merge(t,o));var l=i.timeOptions(a);n.isEmpty(l)||(t=n.merge(t,l));var c=this.makeDataSeries(a);return t.series=c,t.dataZoom.show=Boolean(e.showZoom),t.toolbox.feature.restore.show=Boolean(e.showZoom),t.toolbox.feature.saveAsImage={show:!0,name:"scatter_"+r+"_"+s,type:"png"},t=n.merge(t,e.plotOption)}})}},{"../common_util":3,"../echart_components/echart_mixin":10,"../echart_components/echart_utils":11,lodash:"lodash","react/addons":"react/addons"}],48:[function(e,t,a){"use strict";var r=e("react/addons"),n=e("lodash"),s=e("../echart_components/echart_mixin"),i=e("../echart_components/echart_utils"),o={animation:!1,tooltip:{formatter:function(e){var t=new Date(e.value[0]),a=t.getMonth()+1+"-"+t.getDate()+" - "+t.getFullYear()+" "+t.getHours()+":"+t.getMinutes();return a+"<br/>"+e.value[1]}},toolbox:{orient:"horizontal",x:"right",y:"top",feature:{dataZoom:{show:!1},restore:{show:!1}}},grid:{y2:80},xAxis:[{type:"time"}],yAxis:[{type:"value",scale:!0}],dataZoom:{show:!0,realtime:!0,start:0,end:100}};t.exports={Timeline:r.createClass({displayName:"Timeline",mixins:[s],propTypes:{seriesArray:r.PropTypes.array.isRequired,markLineArray:r.PropTypes.array,height:r.PropTypes.number.isRequired,width:r.PropTypes.number.isRequired,title:r.PropTypes.string,xLabel:r.PropTypes.string,yLabel:r.PropTypes.string,showZoom:r.PropTypes.bool},componentWillReceiveProps:function(e){this.props.seriesArray.length!==e.seriesArray.length&&this.makeChartOptions(e)},makeDataSeries:function(e){return e.map(function(e){return{name:e.name,type:"line",data:e.data,itemStyle:{normal:{areaStyle:{type:"default"}}},smooth:!0}})},makeChartOptions:function(e){var t=n.cloneDeep(o),a=e.seriesArray,r=(a.map(function(e){return e.name}),e.xLabel||""),s=e.yLabel||"";t.xAxis[0].name=r,t.yAxis[0].name=s;var l=i.timeOptions(a);t=n.merge(t,l);var c=this.makeDataSeries(a);return t.series=c,e.markLineArray&&e.markLineArray.length&&e.markLineArray.forEach(function(e){t.series.push({name:e.name,type:"line",effect:{show:!1},data:e.data,itemStyle:{normal:{lineStyle:{color:"#bbb",type:"dashed"}}}})}),t.toolbox.feature.saveAsImage={show:!0,name:"timeline_"+r+"_"+s,type:"png"},e.title&&(t.title={text:e.title,x:"center",y:"top"}),t}})}},{"../echart_components/echart_mixin":10,"../echart_components/echart_utils":11,lodash:"lodash","react/addons":"react/addons"}],49:[function(e,t,a){"use strict";function r(e){var t=n(e,2),a=t[0],r=t[1];return[new Date(1e3*a),r]}var n=function(){function e(e,t){var a=[],r=!0,n=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(l){n=!0,s=l}finally{try{!r&&o["return"]&&o["return"]()}finally{if(n)throw s}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=e("react/addons"),i=e("../common_util"),o=e("../taskqueue"),l=e("../common_controls"),c=e("../plots/timeline").Timeline,d=s.createClass({displayName:"DeployedPredictiveObjects",render:function(){var e=this.props.deployed;return s.createElement("div",{className:"canvas-ps-deployed-objects"},s.createElement("div",{className:"canvas-ps-deployed-title"},"Deployed Predictive Objects"),s.createElement("table",{className:"canvas-ps-deployed-table"},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("th",null,"Name"),s.createElement("th",null,"Version")),Object.keys(e).map(function(t,a){var r=e[t].version;return s.createElement("tr",{key:t+"_"+a},s.createElement("td",null,t),s.createElement("td",null,r))},this))))}}),u=s.createClass({displayName:"PredictiveServiceInfo",getFAState:function(e,t){var a={color:"#85bd00"};return"InService"==e||"UP"==e?s.createElement("i",{style:a,className:"fa fa-gear"}):"OutOfService"==e||"DOWN"==e?""==t?(a={color:"#B80000"},s.createElement("i",{style:a,className:"fa fa-times"})):s.createElement("i",{style:a,className:"fa fa-gear fa-spin"}):void 0},getMetricsUrl:function(e){return 0==e.length?s.createElement("div",null):s.createElement("div",{className:"canvas-ps-metrics-container"},s.createElement("a",{className:"canvas-log-button",href:e,target:"_blank"},s.createElement("span",{style:{textDecoration:"underline"}},"View All Metrics"),s.createElement("span",null," ",s.createElement("i",{className:"fa fa-external-link"}))))},render:function(){var e=this.props.ps_s3_endpoint,t=this.props.ps_name,a=this.props.ps_description,r=this.props.ps_api_key,n=this.props.ps_lb_dns;0==a.length&&(a="--------"),0==r.length&&(r="--------");var i=this.props.ps_status,o=this.props.ps_metrics_url;return s.createElement("div",null,s.createElement("div",{className:"canvas-ps-list-title"},s.createElement("span",{style:{"float":"left"}},e),this.getMetricsUrl(o),s.createElement("div",{style:{clear:"both"}})),s.createElement("table",{className:"canvas-ps-info-table"},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",null,"Name:"),s.createElement("td",null),s.createElement("td",null,t)),s.createElement("tr",null,s.createElement("td",null,"Description:"),s.createElement("td",null),s.createElement("td",null,a)),s.createElement("tr",null,s.createElement("td",null,"API key:"),s.createElement("td",null),s.createElement("td",null,r)),s.createElement("tr",null,s.createElement("td",null,"Load Balancer DNS:"),s.createElement("td",null),s.createElement("td",null,n)),s.createElement("tr",null,s.createElement("td",null,"Instance(s) Status:"),s.createElement("td",null),s.createElement("td",null,Object.keys(i).map(function(e,t){var a=i[e],r=a.description;"N/A"===r&&(r="");var n=a.state;return s.createElement("div",{key:e+"_"+t},s.createElement("span",null,e),s.createElement("span",{style:{paddingLeft:"10px",paddingRight:"25px"}},this.getFAState(n,r),"  ",n))},this))))))}}),p=s.createClass({displayName:"PSMetrics",render:function(){var e=this.props.metrics;if(!(e.requests_data.length>1))return s.createElement("div",null);var t=e.requests_data[0].map(r);if(!(e.latency_data.length>1))return s.createElement("div",null);var a=e.latency_data[0].map(r);if(!(e.hosts_data.length>1))return s.createElement("div",null);var n=e.hosts_data[0].map(r),i=s.createElement(c,{seriesArray:[{name:"Requests",data:t}],xLabel:"Time",yLabel:"Requests (Count)",width:400*2.2,height:400,title:"Predictive Service Requests",showZoom:!0}),o=s.createElement(c,{seriesArray:[{name:"Latency",data:a}],xLabel:"Time",yLabel:"Latency (Seconds)",width:400*2.2,height:400,title:"Predictive Service Latency",showZoom:!0}),l=s.createElement(c,{seriesArray:[{name:"Number of Healthy Hosts",data:n}],xLabel:"Time",yLabel:"Healthy Hosts (Count)",width:400*2.2,height:400,title:"Number of Healthy Hosts",showZoom:!0});return s.createElement("div",null,s.createElement("div",{style:{paddingBottom:"20px",marginBottom:"40px",borderBottom:"1px solid #e3e3e3"}},i),s.createElement("div",{style:{paddingBottom:"20px",marginBottom:"40px",borderBottom:"1px solid #e3e3e3"}},o),s.createElement("div",null,l))}}),h=s.createClass({displayName:"PredictiveServiceTabs",getContent:function(e){return"Objects"===e?s.createElement("div",null,s.createElement(d,{deployed:this.props.deployed})):"Metrics"===e?s.createElement("div",null,s.createElement(p,{metrics:this.props.metrics})):void 0},render:function(){return s.createElement("div",{className:"canvas-ps-wrapper"},this.getContent(this.props.view))}}),m=s.createClass({displayName:"PredictiveServiceView",mixins:[l.AsyncState,l.SizeToWindow],getInitialState:function(){return{ps_status:{},ps_metrics_url:"blank",deployed:{},view:"Objects",ObjectsColor:{backgroundColor:"#fff",color:"#000"},MetricsColor:{backgroundColor:"#dedede",color:"#0a8cc4"},ps_metrics:{requests_data:[],latency_data:[],hosts_data:[],cache_data:[]}}},changeView:function(e){
this.setState({view:e}),this.setState("Objects"===e?{ObjectsColor:{backgroundColor:"#fff",color:"#000"},MetricsColor:{backgroundColor:"#dedede",color:"#0a8cc4"}}:{ObjectsColor:{backgroundColor:"#dedede",color:"#0a8cc4"},MetricsColor:{backgroundColor:"#fff",color:"#000"}})},updateAsyncState:function(){this.addTask(new o.SingleTask("/get_ps_status","get ps status").done(function(e){var t=i.tryGetProperty(e,"ps_status",{}),a=i.tryGetProperty(e,"ps_metrics_url","");this.setState({ps_status:t,ps_metrics_url:a})}.bind(this)).fail(function(){this.setState(this.getInitialState())}.bind(this))),this.addTask(new o.SingleTask("/get_ps_metrics","get ps metrics").done(function(e){var t=i.tryGetProperty(e,"num_requests_data",[]),a=i.tryGetProperty(e,"latency_data",[]),r=i.tryGetProperty(e,"hosts_data",[]),n=i.tryGetProperty(e,"cache_data",[]);this.setState({ps_metrics:{requests_data:t,latency_data:a,hosts_data:r,cache_data:n}})}.bind(this))),this.addTask(new o.SingleTask("/get_po_info","get po info").done(function(e){var t=i.tryGetProperty(e,"deployed",{});this.setState({deployed:t})}.bind(this)).fail(function(){this.setState({deployed:{}})}.bind(this)))},render:function(){var e=i.tryGetProperty(this.props.selected_variable,"ps_info",{}),t=i.tryGetProperty(e,"name",""),a=i.tryGetProperty(e,"s3_endpoint",""),r=i.tryGetProperty(e,"description",""),n=i.tryGetProperty(e,"api_key",""),o=i.tryGetProperty(e,"lb_dns_name","N/A"),l=this.state.ps_metrics_url,c=this.state.ps_status,d=this.state.ps_metrics,p=this.state.deployed;return s.createElement("div",{className:"tab-content",style:{maxWidth:this.state.windowWidth-240,maxHeight:this.state.windowHeight-124,overflow:"auto",color:"#000",minHeight:this.state.windowHeight-100}},s.createElement("div",{className:"canvas canvas-view-main"},s.createElement("div",{className:"canvas-ps-info-container"},s.createElement(u,{ps_name:t,ps_s3_endpoint:a,ps_description:r,ps_api_key:n,ps_status:c,ps_lb_dns:o,ps_metrics_url:l})),s.createElement("div",{className:"canvas-ps-tab"},s.createElement("div",{className:"canvas-ps-tab-element no-select",style:this.state.ObjectsColor,onClick:this.changeView.bind(null,"Objects")},"Predictive Objects"),s.createElement("div",{className:"canvas-ps-tab-element no-select",style:this.state.MetricsColor,onClick:this.changeView.bind(null,"Metrics")},"Metrics")),s.createElement("div",null,s.createElement(h,{view:this.state.view,deployed:p,metrics:d}))))}});t.exports={View:m}},{"../common_controls":2,"../common_util":3,"../plots/timeline":48,"../taskqueue":53,"react/addons":"react/addons"}],50:[function(e,t,a){"use strict";var r=e("react/addons"),n=e("../common_util"),s=e("../common_controls"),i=e("../taskqueue"),o=r.createClass({displayName:"AllPredictiveServices",handleClick:function(e){var t=this.props.selected_variable.name.concat([e]);this.props.selectVariable(t)},render:function(){var e=this.props.list,t=function(e){return r.createElement("a",{href:"javascript:",onClick:this.handleClick.bind(this,e),className:"canvas-link"},e)}.bind(this);return r.createElement("div",{className:"canvas-job-container"},r.createElement("table",{className:"canvas-ps-list-table"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("th",null,"Name"),r.createElement("th",null,"S3 Endpoint")),e.map(function(e,a){{var n=e.State_path,s=e.Name;e.Index}return r.createElement("tr",{key:a},r.createElement("td",null,t(s)),r.createElement("td",null,n))},this))))}});t.exports={View:r.createClass({displayName:"View",mixins:[s.SizeToWindow,s.AsyncState],getInitialState:function(){return{list:[]}},updateAsyncState:function(){this.addTask(new i.SingleTask("/get_ps_list").done(function(e){var t=n.tryGetProperty(e,"list",[]);this.setState({list:t})}.bind(this)))},render:function(){var e=this.state.list;return r.createElement("div",{className:"tab-content",style:{overflow:"auto",color:"#000",backgroundColor:"#eee"}},r.createElement("div",{className:"canvas canvas-view-main",style:{backgroundColor:"#eee"}},r.createElement(o,{selectVariable:this.props.selectVariable,selected_variable:this.props.selected_variable,list:e})))}})}},{"../common_controls":2,"../common_util":3,"../taskqueue":53,"react/addons":"react/addons"}],51:[function(e,t,a){"use strict";var r=(e("./common_util"),[]);t.exports={addListener:function(e){r.push(e)},set:function(e){for(var t=0;t<r.length;t++)r[t].setState(e)}}},{"./common_util":3}],52:[function(e,t,a){"use strict";var r=e("react/addons"),n=e("d3"),s=e("lodash"),i=e("bowser"),o=e("zepto-browserify").$,l=e("./page_layout"),c=e("./common_util"),d=e("./taskqueue"),u=e("./common_controls"),p=e("./logging"),h={grab:i.webkit?"-webkit-grab":"grab",grabbing:i.webkit?"-webkit-grabbing":"grabbing"},m=function(e){var t=c.tryGetProperty(e.selected_variable,"columns",[]),a=c.tryGetProperty(e.selected_variable,["view_params","columns"],[]);return s(t).filter(function(e){return-1!==a.indexOf(e.name)}).sortBy(function(e){return a.indexOf(e.name)}).value()},f=function(e){return{"int":150,"float":150,str:260,dict:260,list:260,array:260,Image:140,datetime:220}[e]},b=function(e,t){return e.reduce(function(e,t){return e+f(t.dtype)},t+1)},g=r.createClass({displayName:"Column",handleClick:function(e){var t=this.props.selected_variable.name.concat([this.props.name]);this.props.selectVariable(t)},render:function(){var e=function(){return this.props.ipython?this.props.name:r.createElement("a",{href:"javascript:",onClick:this.handleClick,className:"canvas-sframe-column-title"},this.props.name)}.bind(this);return r.createElement("div",{className:"canvas-sframe-column-header","data-tooltip":this.props.name,style:this.props.style},e())}}),y=r.createClass({displayName:"DocScroller",getInitialState:function(){return{dragOffsetPosition:0,dragStartPosition:null,dragPosition:0}},getDefaultProps:function(){return{onDragEnd:function(){},dragPosition:0,totalRows:0,pageHeight:0,totalHeight:0,height:0,width:0,visualPadding:0,marginTop:0}},componentWillMount:function(){this.setState({dragPosition:this.props.dragPosition||0})},render:function(){var e=function(e){e.preventDefault(),e.stopPropagation(),this.setState({dragStartPosition:e.clientY})}.bind(this),t=function(e){if(null===this.state.dragStartPosition)return null;var t=e.clientY-this.state.dragStartPosition,a=Math.min(this.props.height-this.props.pageHeight,Math.max(0,this.state.dragPosition+t));return a}.bind(this),a=function(e){null!==this.state.dragStartPosition&&(e.preventDefault(),e.stopPropagation(),this.setState({dragOffsetPosition:t(e)}))}.bind(this),s=function(e){if(e.preventDefault(),e.stopPropagation(),null!==this.state.dragStartPosition){var a=t(e);this.props.onDragEnd(a),this.setState({dragStartPosition:null,dragOffsetPosition:a,dragPosition:a})}}.bind(this),i=function(e){if(null===this.state.dragStartPosition){e.preventDefault(),e.stopPropagation();var t=Math.max(0,e.clientY-o(e.currentTarget).offset().top-this.props.pageHeight/2),a=Math.min(this.props.height-this.props.pageHeight,t);this.props.onDragEnd(t),this.setState({dragOffsetPosition:a})}else s(e)}.bind(this),l=[[0,this.state.dragOffsetPosition],[0,this.state.dragOffsetPosition+this.props.pageHeight+this.props.visualPadding],[50,this.props.totalHeight+this.props.marginTop+this.props.visualPadding],[50,this.props.marginTop]],d=this.props.totalRows<=this.props.threshold,u=d?"#dfe0e1":"#85bd00";return 0===this.props.width?null:r.createElement("div",{style:{width:this.props.width}},r.createElement("div",{style:{paddingTop:5},className:"canvas-docscroller-label"},"0"),r.createElement("svg",{style:{width:10,height:this.props.height}},n.range(10).map(function(e){var t=e/9*this.props.height;return r.createElement("line",{key:e,x1:4,x2:10,y1:t,y2:t,stroke:"#dfe0e1",strokeWidth:2})}.bind(this))),r.createElement("div",{style:{width:36,height:this.props.height+this.props.visualPadding,display:"inline-block",cursor:d?"auto":"pointer",position:"relative"},onMouseMove:a,onMouseLeave:s,onClick:i},r.createElement("svg",{style:{position:"absolute",top:0,left:0,width:36,height:this.props.height}},r.createElement("rect",{x:0,y:this.state.dragOffsetPosition,width:36,height:this.props.pageHeight+this.props.visualPadding,fill:"#d9e3cd",style:{opacity:d?0:1}}),n.range(this.props.height/5).map(function(e){return n.range(5).map(function(t){var a="#dfe0e1";return 5*e>=this.state.dragOffsetPosition&&5*e+4<=this.state.dragOffsetPosition+this.props.pageHeight&&(a=u),r.createElement("rect",{key:String(t)+"_"+String(e),x:6+5*t,y:5*e,width:4,height:4,fill:a})}.bind(this))}.bind(this))),r.createElement("div",{style:{position:"absolute",top:this.state.dragOffsetPosition,left:0,width:36,height:this.props.pageHeight+this.props.visualPadding,cursor:d?"auto":null!==this.state.dragStartPosition?h.grabbing:h.grab},onMouseDown:e})),r.createElement("svg",{style:{width:50,height:this.props.height+this.props.visualPadding+10,display:"inline-block",verticalAlign:"top",opacity:d?0:1}},r.createElement("linearGradient",{id:"docScrollerGradient"},r.createElement("stop",{offset:"0%",style:{stopColor:"#d9e3cd"}}),r.createElement("stop",{offset:"100%",style:{stopColor:"#f0f4ec"}})),r.createElement("polygon",{points:l.map(function(e){return e.join(",")}).join(" "),style:{fill:"url(#docScrollerGradient)"}})),r.createElement("div",{style:{marginTop:-10},className:"canvas-docscroller-label"},c.formatNumber(this.props.totalRows-1)))}}),v=r.createClass({displayName:"RowView",getDefaultProps:function(){return{columns:[],data:[],dimensions:{},rowHeight:38,imageRowHeight:66,headerHeight:l.get("table_column_header_height"),highlight:!1,onClick:function(){},formatter:function(e){return e}}},statics:{highlightStyle:{backgroundColor:"rgba(255, 85, 0, 0.2)"},getHeaderCellStyle:function(e,t){var a={height:e-2,minHeight:e-2,maxHeight:e-2};return"object"==typeof t?c.merge(a,t):a},getCellStyle:s.memoize(function(e,t){var a={overflow:"hidden",textAlign:"left"};return t&&(a=c.merge(v.highlightStyle,a)),"object"==typeof e?c.merge(a,e):a},function(e,t){return JSON.stringify({s:e,h:t})}),getCellContentStyle:s.memoize(function(e){return c.merge({padding:"5px 5px 5px 15px"},e||{})},function(e){return JSON.stringify({s:e})})},getRowHeaderHTML:function(e,t){var a={color:"#85bd00",fontWeight:300,paddingLeft:3,height:t};return this.props.highlight&&(a=c.merge(v.highlightStyle,a)),r.createElement("td",{style:a},c.formatNumber(e))},render:function(){var e,t,a,n=this.props.number,s=this.props.data,i=this.getRowHeaderHTML(n,this.props.rowHeight),o=v.getCellStyle({},this.props.highlight);return s&&s.length<this.props.columns.length&&(s=this.props.columns.map(function(e,t){return s[t]||null})),a=void 0===s?this.props.columns.map(function(e,t){return r.createElement("td",{className:"padding canvas-sframe-table-head-value"})},this):r.createElement("div",null,i,s.map(function(a,n){return e=this.props.formatter(a,this.props.rowHeight),t=c.isSArrayImageType(a)?{margin:"0 auto"}:null,r.createElement("td",{key:n,className:"padding canvas-sframe-table-head-value",style:o},r.createElement("div",{style:v.getCellContentStyle(t)},e))},this)),r.createElement("tr",{key:n,className:"canvas-sframe-table-head-row",onClick:this.props.onClick},a)}}),w=r.createClass({displayName:"TabularView",mixins:[u.AsyncState,u.SizeToWindow],statics:{getColumns:m},getDefaultProps:function(){return{rowHeight:38,imageRowHeight:66,headerHeight:l.get("table_column_header_height"),rowsToFetch:300}},getInitialState:function(){return{rows:[],rowStart:0,scrollTop:0,scrollLeft:0,currentTask:null,taskTimeout:null,pageOffset:0,highlightRow:null,getColumnWidth:s.memoize(f),getColumns:s.memoize(m),getTableWidth:s.memoize(b)}},updateAsyncState:function(e){this.setState({getColumnWidth:s.memoize(f),getColumns:s.memoize(m),getTableWidth:s.memoize(b)},function(){var t=[];0!==c.tryGetProperty(e.selected_variable,["descriptives","rows"],0)&&(t.push(new d.SingleTask("/rows/"+String(this.state.rowStart)+"/"+String(this.props.rowsToFetch+this.state.rowStart),".head()").done(function(e){this.setState({rows:e.values})}.bind(this))),this.addTask(new d.MultiTask(t).always(function(){var e=(this.canceled?"page_task":"page_task.canceled")+".duration.ms";p.reportMetric(e,this.elapsed(),{operation:this.operation(),type:"SFrame"})})))}.bind(this))},scrollTable:function(e){var t=o(e.target).scrollTop(),a=o(e.target).scrollLeft();this.setState({scrollTop:t,scrollLeft:a})},docScrollTable:function(e){this.setState({pageOffset:e})},componentDidUpdate:function(e,t){if(this.state.scrollTop!==t.scrollTop||this.state.pageOffset!==t.pageOffset){var a=r.findDOMNode(this.refs.tableScrollContainer);o(a).scrollTop(this.state.scrollTop),o(a).scrollLeft(this.state.scrollLeft),this.updateTable()}},updateTable:function(){var e=this.getDimensions();if(e.currentRowStart>this.state.rowStart+this.props.rowsToFetch-50||Math.max(e.currentRowStart-5,0)<this.state.rowStart){var t=Math.max(e.currentRowStart-50,0);if(t!==this.state.rowStart){var a=new d.SingleTask("/rows/"+String(t)+"/"+String(t+this.props.rowsToFetch)).done(function(e){this.setState({rows:e.values,rowStart:t,currentTask:null})}.bind(this)).fail(function(){this.setState({currentTask:null})}.bind(this));null!==this.state.taskTimeout&&clearTimeout(this.state.taskTimeout),null!==this.state.currentTask&&this.state.currentTask.cancel(),this.setState({currentTask:a,taskTimeout:setTimeout(function(){a.run()},200)})}}},getDimensions:function(e,t){"undefined"==typeof e&&(e=this.state.scrollTop),"undefined"==typeof t&&(t=this.state.pageOffset);var a=c.tryGetProperty(this.props.selected_variable,["descriptives","rows"],0),r=1e5,n=l.get("table_nav_width"),s=l.tableHeight(),i=this.props.headerHeight,o=s-24-10,d=Math.min(1,r/a)*o,u=Math.max(0,10-d),p=l.tableWidth(),h=this.state.getColumns(this.props),m=h.some(function(e){return"Image"===e.dtype})?this.props.imageRowHeight:this.props.rowHeight,f=Math.min(a,r),b=Math.ceil(t/o*a),g=b+Math.floor(e/m);g-=g%2;var y=Math.ceil(s/m)+3,v=g+y,w=Math.min(y,this.state.rowStart-g),E=Math.min(y,v-(this.state.rowStart+this.props.rowsToFetch)),_=(g-b)*m,x=Math.max(0,(f-(v-b))*m),S=18+Math.floor(10*Math.log(a)/Math.LN10),k=Math.min(p,this.state.getTableWidth(h,S+1));return y>a&&(g=0,v=a,w=0,_=0,x=0,E=0),{elementHeight:s,currentRowStart:g,currentRowEnd:v,fillerAbove:w,fillerBelow:E,heightAbove:_,heightBelow:x,rowHeaderWidth:S,tableWidth:k,docScrollerWidth:n,docScrollerHeight:o,docScrollerPageHeight:d,docScrollerVisualPadding:u,rowsInView:f,columnHeaderHeight:i,rowHeight:m,totalRows:a,docScrollerThreshold:r}},highlightRow:function(e){e===this.state.highlightRow&&(e=null),this.setState({highlightRow:e})},onDocScroll:function(e){this.setState({pageOffset:e})},goToRowChange:function(e){var t=null,a=this.getDimensions();try{t=parseInt(r.findDOMNode(this.refs.goToRow).value,10)}catch(n){return}var a=this.getDimensions(),s=a.totalRows-a.rowsInView,i=0;0>t?t=a.totalRows+t:t>a.totalRows-1&&(t=a.totalRows-1);var o=t/a.totalRows*a.docScrollerHeight;if(t>s){var l=t-s;o=s/a.totalRows*a.docScrollerHeight,i=l/a.rowsInView*a.rowsInView*a.rowHeight}this.setState({scrollTop:i,pageOffset:o})},handleKeyDown:function(e){return 13==e.keyCode?this.goToRowChange(e):void 0},render:function(){var e=this.getDimensions(),t=this.state.getColumns(this.props),a=s.memoize(c.formatSArrayValue,JSON.stringify);if(!t||0===t.length)return null;var i=20,o="1px solid #dedede",d=r.createElement("div",{style:{width:e.docScrollerWidth,height:i}},r.createElement("input",{id:"goToRow",ref:"goToRow",style:{width:69,height:i,borderLeft:o,borderTop:o,borderBottom:o,borderRight:"none",paddingLeft:5},type:"number",placeholder:"row #",onKeyDown:this.handleKeyDown}),r.createElement("a",{style:{display:"inline-block",width:27,height:i,backgroundColor:"#85bd41",color:"white",textTransform:"uppercase",verticalAlign:"top",textDecoration:"none",lineHeight:String(i)+"px",textAlign:"center",fontSize:11},href:"javascript:",onClick:this.goToRowChange},"Go")),u=e.tableWidth-e.rowHeaderWidth,p=void 0!==this.state.rows[e.currentRowStart-this.state.rowStart],h=(t.map(function(e){return null}),p?null:r.createElement("div",{className:"sframe-table-overlay",style:{position:"absolute",top:0,left:e.docScrollerWidth+e.rowHeaderWidth,height:e.columnHeaderHeight,width:u,zIndex:100,backgroundColor:"#333",opacity:.8,verticalAlign:"middle",textAlign:"center"}},r.createElement("span",{style:{display:"inline-block",fontSize:"24px",color:"#efefef"}},"Loading...")));return r.createElement("div",{className:"canvas sframe",style:{width:l.contentWidth(),zIndex:1,position:"relative"}},r.createElement("div",{style:{"float":"left"}},d,r.createElement(y,{width:e.docScrollerWidth,height:e.docScrollerHeight,pageHeight:e.docScrollerPageHeight,totalHeight:e.elementHeight,visualPadding:e.docScrollerVisualPadding,totalRows:e.totalRows,dragPosition:this.state.pageOffset,marginTop:e.columnHeaderHeight-i-18,onDragEnd:this.docScrollTable})),h,r.createElement("div",{style:{overflow:"hidden"}},r.createElement("div",{className:"canvas-sframe-table-header",style:{overflow:"hidden",marginLeft:e.rowHeaderWidth,height:e.columnHeaderHeight,width:u}},r.createElement("table",{className:"sframe-table table table-striped",style:{marginBottom:0,marginLeft:-this.state.scrollLeft,width:e.tableWidth-e.rowHeaderWidth,tableLayout:"fixed"}},r.createElement("thead",null,r.createElement("tr",null,t.map(function(t,a){(function(e){var t=this.props.selected_variable.name.concat([e.name]);this.props.selectVariable(t)}).bind(this,t);return r.createElement("th",{key:a,style:v.getHeaderCellStyle(e.columnHeaderHeight,{width:this.state.getColumnWidth(t.dtype)})},r.createElement(g,{name:t.name,selected_variable:this.props.selected_variable,selectVariable:this.props.selectVariable}))},this)))))),r.createElement("div",{id:"tableArea",style:{overflow:"hidden",marginLeft:e.docScrollerWidth},onScroll:this.scrollTable,ref:"tableArea"},r.createElement("div",{style:{position:"relative",overflowY:"scroll",height:l.tableHeight()+1,width:e.tableWidth+l.get("table_vertical_scroll_width")+2,borderLeft:"1px solid #EEE",borderRight:"1px solid #EEE",borderBottom:"1px solid #EEE"},ref:"tableScrollContainer"},r.createElement("div",{style:{marginTop:e.heightAbove,marginBottom:e.heightBelow}},r.createElement("table",{className:"sframe-table table-striped",style:{tableLayout:"fixed",width:e.tableWidth}},r.createElement("thead",null,r.createElement("th",{style:{width:e.rowHeaderWidth}}),t.map(function(e,t){return r.createElement("th",{style:{width:this.state.getColumnWidth(e.dtype)},key:t})},this)),r.createElement("tbody",null,n.range(e.fillerAbove).map(function(a){return r.createElement(v,{key:a,columns:t,number:a+e.currentRowStart})}),this.state.rows.slice(e.currentRowStart-this.state.rowStart,e.currentRowEnd-this.state.rowStart).map(function(n,s){var i=s+e.currentRowStart;return r.createElement(v,{key:i,columns:t,onClick:this.highlightRow.bind(this,i),highlight:this.state.highlightRow===i,number:i,data:n,formatter:a,rowHeight:e.rowHeight,imageRowHeight:e.imageRowHeight})},this),n.range(e.fillerBelow).map(function(a){return r.createElement(v,{key:a,columns:t,number:a+e.currentRowStart})})))))))}});t.exports={TabularView:w,Column:g}},{"./common_controls":2,"./common_util":3,"./logging":15,"./page_layout":30,"./taskqueue":53,bowser:"bowser",d3:"d3",lodash:"lodash","react/addons":"react/addons","zepto-browserify":"zepto-browserify"}],53:[function(e,t,a){"use strict";function r(){this.canceled=!1,this.startTime=null,this.endTime=null,this.fn_always=[],this.fn_done=[],this.fn_fail=[]}function n(e,t){r.call(this),this.url=e,this.op=t,this.performRequest=null}function s(e,t,a,r){n.call(this,e,t),this._progressFn=a,this._progress=0,this._timeout=null,this._pollInterval=r}function i(e){r.call(this),this.tasks=e,this.currentTask=0}function o(){if(0!==f.length){if(f[0].running());else if(f[0].finished()){if(f.length>1){p.log("removing completed task");var e=f.shift();return p.log(e.toString()),void setTimeout(o,0)}}else p.log("starting new task"),p.log(f[0].toString()),f[0].run();var t=f[0],a=t.progress(),r=t.finished();(a!==h||r!==m)&&(h=a,m=r,u.set({task:{progress:a,finished:r}}))}}function l(){for(var e=0;e<f.length;e++)f[e].cancel()}var c=e("zepto-browserify").$,d=e("./common_util"),u=e("./state"),p=e("./logging");r.prototype.toString=function(){return JSON.stringify({canceled:this.canceled,startTime:this.startTime,endTime:this.endTime})},r.prototype.always=function(e){return this.fn_always.push(e),this},r.prototype.done=function(e){return this.fn_done.push(e),this},r.prototype.fail=function(e){return this.fn_fail.push(e),this},r.prototype.progress=function(){return 0},r.prototype.operation=function(){return""},r.prototype.running=function(){return null!=this.startTime&&null==this.endTime},r.prototype.finished=function(){return null!=this.startTime&&null!=this.endTime},r.prototype.elapsed=function(){return this.finished()?this.endTime-this.startTime:this.running()?Date.now()-this.startTime:0},r.prototype.run=function(){d.assert(!this.finished()),d.assert(!this.running()),this.startTime=Date.now()},r.prototype.end=function(){this.endTime=Date.now();var e=function(e,t){e.forEach(function(e){e.apply(this,t)}.bind(this))}.bind(this);this.canceled?e(this.fn_fail,arguments):e(this.fn_done,arguments),e(this.fn_always,arguments),setTimeout(o,0)},r.prototype.cancel=function(){this.finished()||(this.canceled=!0,this.end.apply(this,arguments))},n.prototype.toString=function(){return JSON.stringify({url:this.url,op:this.op,canceled:this.canceled,startTime:this.startTime,endTime:this.endTime})},n.prototype=new r,n.prototype.cancel=function(){null!==this.performRequest&&(this.performRequest=!1),r.prototype.cancel.apply(this,arguments)},n.prototype.run=function(){r.prototype.run.call(this),this.performRequest=!0,c.ajax({type:"GET",url:this.url,beforeSend:function(){return this.performRequest}.bind(this),success:function(e){this.canceled||this.end(e)}.bind(this),error:function(){this.cancel.apply(this,arguments)}.bind(this)})},n.prototype.operation=function(){return this.op},s.prototype=new n,s.prototype.run=function(){function e(){c.ajax({type:"GET",url:t.url,success:function(t){this.canceled||(this._progressFn(t),t.complete?(this.end(t),this._progress=1):(this._progress=t.progress,this._timeout=setTimeout(e,this._pollInterval)))}.bind(t),error:function(){this.cancel.apply(this,arguments)}.bind(t)})}r.prototype.run.call(this);var t=this;e()},s.prototype.progress=function(){return this._progress},s.prototype.cancel=function(){clearTimeout(this._timeout),n.prototype.cancel.call(this)},i.prototype=new r,i.prototype.progress=function(){if(0===this.tasks.length)return 0;var e=this.currentTask/this.tasks.length;return this.tasks[this.currentTask]instanceof s&&(e+=this.tasks[this.currentTask].progress()/this.tasks.length),d.assert(!isNaN(e)),e},i.prototype.operation=function(){return this.tasks.map(function(e){return e.operation()})},i.prototype.run=function(){function e(){t.canceled||(t.currentTask===t.tasks.length?t.end():t.tasks[t.currentTask].finished()?t.currentTask++:t.tasks[t.currentTask].running()||t.tasks[t.currentTask].run(),t.finished()||requestAnimationFrame(e))}r.prototype.run.call(this);var t=this;e()},i.prototype.cancel=function(){for(var e=0;e<this.tasks.length;e++)this.tasks[e].cancel();r.prototype.cancel.call(this)};var h=null,m=null,f=[];t.exports={add:function(e){f.push(e)},cancelAll:l,start:function(){setInterval(o,200)},Task:r,SingleTask:n,ProgressTask:s,MultiTask:i}},{"./common_util":3,"./logging":15,"./state":51,"zepto-browserify":"zepto-browserify"}],54:[function(e,t,a){function r(){d=!1,o.length?c=o.concat(c):u=-1,c.length&&n()}function n(){if(!d){var e=setTimeout(r);d=!0;for(var t=c.length;t;){for(o=c,c=[];++u<t;)o&&o[u].run();u=-1,t=c.length}o=null,d=!1,clearTimeout(e)}}function s(e,t){this.fun=e,this.array=t}function i(){}var o,l=t.exports={},c=[],d=!1,u=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];c.push(new s(e,t)),1!==c.length||d||setTimeout(n,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],App:[function(e,t,a){(function(a){"use strict";function r(e){e=e||window.document.body,"production"!==a.env.NODE_ENV&&(window.React=i),i.render(i.createElement(o,null),e)}function n(e){window.addEventListener("load",r.bind(null,e),!1)}function s(){this.embedded=!1}e("babelify/polyfill");var i=e("react/addons"),o=e("./canvas"),l=e("./common_util"),c=e("./data_components/data_views").views,d=e("./model_components/model_views").views,u=l.merge(l.merge({},c),d);s.prototype.attachCanvasOnLoad=function(e){n(e)},s.prototype.attachView=function(e,t,a,r){if(this.embedded=!0,e in u&&t in u[e]){var n=u[e][t];return void i.render(i.createElement(n,a),r)}console.log("App.attachView was called, but did not create specified view.")},t.exports=s}).call(this,e("../node_modules/browserify/node_modules/process/browser.js"))},{"../node_modules/browserify/node_modules/process/browser.js":54,"./canvas":1,"./common_util":3,"./data_components/data_views":5,"./model_components/model_views":26,"babelify/polyfill":"babelify/polyfill","react/addons":"react/addons"}]},{},["App"]);
//# sourceMappingURL=app.js.map
